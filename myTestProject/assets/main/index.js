System.register("chunks:///_virtual/ActionInfo.ts",["cc","./GameConst.ts"],(function(t){var n,i;return{setters:[function(t){n=t.cclegacy},function(t){i=t.GameConst}],execute:function(){n._RF.push({},"ecd0a7U7pNKd4z66FlS7gFN","ActionInfo",void 0);t("ActionInfo",(function(t,n,e,o){void 0===n&&(n=null),void 0===e&&(e=-1),void 0===o&&(o=i.Idle),this.name=void 0,this.handler=void 0,this.times=-1,this.endActionName=i.Idle,this.name=t,this.handler=n,this.times=e,this.endActionName=o}));n._RF.pop()}}}));

System.register("chunks:///_virtual/AFKGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./ViewRegisterMgr.ts","./PanelEnum.ts","./LayerManager.ts","./GameScene.ts","./ViewConst.ts","./HashMap.ts","./FightHeroInfo.ts","./GameConst.ts","./FightRoleEntity.ts","./Utils.ts","./FightMgr.ts","./FightConfig.ts"],(function(e){var t,n,i,o,a,r,s,c,u,f,h,p,g,d,l,m,v,y,w,M,F;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e._decorator,r=e.math,s=e.resources,c=e.JsonAsset},function(e){u=e.default},function(e){f=e.registerView},function(e){h=e.PanelType},function(e){p=e.LayerType},function(e){g=e.GameScene},function(e){d=e.default},function(e){l=e.HashMap},function(e){m=e.FightHeroInfo},function(e){v=e.GameConst},function(e){y=e.FightRoleEntity},function(e){w=e.default},function(e){M=e.FightMgr},function(e){F=e.FightConfig}],execute:function(){var C;o._RF.push({},"86e896MaEBGsp9GQ8s3/bXj","AFKGame",void 0);var G=a.ccclass,I=(a.property,e("AFKGame",G("AFKGame")(C=function(e){function o(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).scene=void 0,t.gameConfig=void 0,t.heroMap=void 0,t.enmeyMap=void 0,t.positionMap=void 0,t.isInit=!1,t}t(o,e);var a=o.prototype;return a.start=function(){},a.update=function(e){this.isInit&&M.instance.doFrameHandler()},a.init=function(){this.heroMap=new l,this.enmeyMap=new l,this.positionMap=new l,this.isInit=!1},a.onOpen=function(){var e=n(i().mark((function e(t){var n,o,a,r,s,c,u,f,h,p,d,m,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadConfig();case 2:for(this.scene=new g,this.scene.init(),this.scene.name="afkScene",this.node.addChild(this.scene),n=0;n<5;n++)o="left"+n,a="right"+n,r=w.FindChildByName(this.node,o),s=w.FindChildByName(this.node,a),(c=this.positionMap.get(0))||(c=new l),(u=this.positionMap.get(1))||(u=new l),r.active=s.active=!1,c.put(n+1,r.position.clone()),u.put(n+1,s.position.clone()),this.positionMap.put(0,c),this.positionMap.put(1,u);f=this.heroMap.values(),h=this.enmeyMap.values(),p=0;case 10:if(!(p<f.length)){e.next=17;break}return d=f[p],e.next=14,this.createHero(d);case 14:p++,e.next=10;break;case 17:m=0;case 18:if(!(m<h.length)){e.next=25;break}return v=h[m],e.next=22,this.createHero(v);case 22:m++,e.next=18;break;case 25:M.instance.setRandomSeed(99856269),this.isInit=!0;case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.loadConfig=function(){var e=n(i().mark((function e(){var t=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){s.load("afk/afkGameConfg",c,(function(i,o){if(i)n(i);else{t.gameConfig=o.json,F.instance.init(t.gameConfig);var a=t.gameConfig.heros;for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)){var s=a[r],c=Number(r),u=t.setFightHeroInfo(1e3,s);0==s.comp?t.heroMap.put(c,u):t.enmeyMap.put(c,u)}e()}}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.setFightHeroInfo=function(e,t){var n=new m;return n.setData(e,t),n},a.getPosition=function(e){var t=e.camp,n=e.site,i=this.positionMap.get(t);return i?i.get(n):r.v3(0,0)},a.createHero=function(e){var t=this;return new Promise((function(n,i){t.create(y,e,t.scene,0==e.camp?v.RIGHT:v.LEFT).then((function(o){var a=t.getPosition(e);o.setLocation(a.x,a.y),o.initHeadBar().then((function(t){M.instance.addEntity(o),console.log("hero_"+e.spineId,o.getBounds()),n()})).catch((function(e){i(e)}))})).catch((function(e){i(e)}))}))},a.create=function(e,t,n,i,o){return void 0===i&&(i=v.RIGHT),void 0===o&&(o=v.Idle),new Promise((function(a,r){var s=new e;s.setData(t),n.getUnitById(s.getId())||n.addUnit(s),s.setRole(t.heroConfig.spineId).then((function(e){s.changeActionAndDirection(o,i),a(s)})).catch((function(e){r(e)}))}))},o}(u))||C));f({viewCls:I,id:h.AFKGame,layer:p.view,prefabPathPrefix:d.defaultPrefabPathPrefix+"afk/"}),o._RF.pop()}}}));

System.register("chunks:///_virtual/AFKGameConfigVo.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"bee34vsZcpM2J1haGSe2RYX","AFKGameConfigVo",void 0);e("AFKGameConfigVo",(function(){this.heros=void 0,this.skills=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/AFKResultPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./ViewRegisterMgr.ts","./PanelEnum.ts","./LayerManager.ts","./ViewConst.ts","./Utils.ts","./ViewManager.ts","./Enum.ts","./FightMgr.ts"],(function(n){var t,e,i,o,s,a,r,u,c,l,f,p,h,d;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,o=n.Button,s=n.sp},function(n){a=n.default},function(n){r=n.registerView},function(n){u=n.PanelType},function(n){c=n.LayerType},function(n){l=n.default},function(n){f=n.default},function(n){p=n.viewManager},function(n){h=n.ViewShowTypes},function(n){d=n.FightMgr}],execute:function(){var g;e._RF.push({},"d07402x9N1DjZYR2sCnp7gT","AFKResultPanel",void 0);var y=i.ccclass,v=(i.property,n("AFKResultPanel",y("AFKResultPanel")(g=function(n){function e(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=n.call.apply(n,[this].concat(i))||this).showType=h.ViewAddition,t.btn=void 0,t.spine=void 0,t}t(e,n);var i=e.prototype;return i.init=function(){this.btn=f.FindChildByName(this.node,"tryBtn").getComponent(o),this.spine=f.FindChildByName(this.node,"spineNode").getComponent(s.Skeleton),this.btn&&this.btn.node.on(o.EventType.CLICK,this.onClickBtn,this)},i.onClickBtn=function(){p.close(this),d.instance.reset(),p.open(u.AFKGame)},i.onOpen=function(n){var t=arguments.length<=1?void 0:arguments[1],e=t?"animation_2":"animation_3";this.spine&&(this.spine.animation=e)},i.onLoad=function(){},i.start=function(){},i.update=function(n){},e}(a))||g));r({viewCls:v,id:u.AFKResultPanel,layer:c.view,prefabPathPrefix:l.defaultPrefabPathPrefix+"afk/"}),e._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationPath.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TowerLauncher.ts"],(function(t){var r,n,i,a,e,o,s,c,h,l;return{setters:[function(t){r=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,a=t.Animation,e=t.Graphics,o=t.resources,s=t.Color,c=t.math,h=t.Component},function(t){l=t.TowerLauncher}],execute:function(){var u;n._RF.push({},"85731V2OvZAdZqz5Y5lYAJZ","AnimationPath",void 0);var p=i.ccclass;i.property,t("AnimationPath",p("AnimationPath")(u=function(t){function n(){for(var r,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(r=t.call.apply(t,[this].concat(i))||this).animation=void 0,r.graphics=void 0,r.p2pDistance=25,r}r(n,t);var i=n.prototype;return i.onLoad=function(){this.animation=this.getComponent(a),this.animation||(this.animation=this.node.addComponent(a)),this.graphics=this.node.getComponent(e),this.graphics||(this.graphics=this.node.addComponent(e))},i.start=function(){this.getWorldPathByMapId(1)},i.update=function(t){},i.getWorldPathByMapId=function(t,r){var n=this;return void 0===r&&(r=l.instance.theme),new Promise((function(i,a){var e="anim/map/map"+r+"_"+t;o.load(e,(function(t,r){if(t)return console.error(t),void a(t);console.log(r);var e=n.getNodePath(r);n.drawPoint(e,s.RED),i(e)}))}))},i.getWorldPath=function(){var t=this.animation.clips,r=this.getNodePath(t[0]);return console.log(r),this.drawPoint(r,s.RED),r},i.getNodePath=function(t){var r=t.tracks[0].channels(),n=r[0].curve,i=r[1].curve,a=n.values(),e=i.values();return this.getBezierPartArray(a,e)},i._getPath=function(t){for(var r,n=[],i=0;i<t.length;i++)(r=t[i]).createPosArray(16),n=n.concat(r.posArray);return n},i.getBezierPartArray=function(t,r){for(var n=[],i=Math.max(t.length,r.length),a=0;a<i-1;a++){var e=t[a],o=r[a],s=t[a+1],c=r[a+1],h=this.createBezierPartArray(e,o,s,c);n=n.concat(h)}return n},i.createBezierPartArray=function(t,r,n,i){for(var a=c.v2(t.value,r.value),e=c.v2(n.value,i.value).subtract(a),o=e.length()/this.p2pDistance,s=e.x/o,h=e.y/o,l=[],u=0;u<=o;u++){var p=a.x+u*s,g=a.y+u*h;l.push(c.v2(p,g))}return l},i.drawPoint=function(t,r){if(void 0===r&&(r=null),this.graphics.clear(),this.graphics.strokeColor=null===r?s.RED:r,this.graphics.fillColor=s.RED,this.graphics.lineWidth=1,t.length)for(var n=0;n<t.length;n++)this.graphics.circle(t[n].x,t[n].y,2),this.graphics.fill();else this.graphics.circle(t.x,t.y,2),this.graphics.fill()},n}(h))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/AreaType.ts",["cc"],(function(e){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"c5be0bRepNF2YyFPUHoUaZK","AreaType",void 0);var t=e("AreaType",(function(){}));t.LT=1,t.RT=16,t.LB=256,t.RB=4096,c._RF.pop()}}}));

System.register("chunks:///_virtual/ArrayUtils.ts",["cc"],(function(r){var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){n._RF.push({},"881a3GBmmtBJLOMpwSDzNlQ","ArrayUtils",void 0);r("default",function(){function r(){}return r.randomIndex=function(r,n,t){void 0===t&&(t=!1);for(var o=[],e={},u=0;u<n;){var i=Math.floor(Math.random()*r*100%r);(null==e[i]||t)&&(o.push(i),e[i]=i,u++)}return o},r.randomRange=function(r,n,t){return void 0===t&&(t=!0),t?Math.floor(Math.random()*(n-r+1))+r:Math.random()*(n-r)+r},r.removeItem=function(r,n){for(var t=r.length;t>0;)if(r[--t]===n)return r.splice(t,1),!0;return!1},r.sortBy=function(r,n,t){void 0===n&&(n=!1),void 0===t&&(t=!0);var o=t?r.concat():r;return o.sort((function(r,t){if(r<t)return n?-1:1;return r==t?0:n?1:-1})),o},r.sortBy2=function(r,n,t,o){void 0===t&&(t=!1),void 0===o&&(o=!0);var e=o?r.concat():r;return e.sort((function(r,o){if(r[n]<o[n])return t?-1:1;return r[n]==o[n]?0:t?1:-1})),e},r.sortBy3=function(r,n,t,o){void 0===t&&(t=!1),void 0===o&&(o=!0);var e=o?r.concat():r;return e.sort((function(r,o){var e=0;for(;;){if(r[n[e]]<o[n[e]])return t?1:-1;if(r[n[e]]>o[n[e]])return t?-1:1;if(r[n[e]]==o[n[e]]&&++e>=n.length)break}return 0})),e},r.sortBy4=function(r,n,t,o){void 0===o&&(o=!0);var e=o?r.concat():r;return e&&0!=e.length?(e.sort((function(r,o){for(var e,u=r,i=o,f=!1,a=0;a<n.length;a++){for(r=u,o=i,f=t[a],e=0;e<n[a].length;e++)r=r[n[a][e]];for(e=0;e<n[a].length;e++)o=o[n[a][e]];if(r!=o)break}if(r<o)return f?-1:1;return r==o?0:f?1:-1})),e):[]},r.sortBy5=function(r,n,t,o){void 0===t&&(t=[]),void 0===o&&(o=!0);var e=o?r.concat():r;return e.sort((function(r,o){var e=0;for(;;){var u=t[e];if(r[n[e]]<o[n[e]])return u?1:-1;if(r[n[e]]>o[n[e]])return u?-1:1;if(r[n[e]]==o[n[e]]&&++e>=n.length)break}return 0})),e},r}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AssetMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t,u,a,s;return{setters:[function(e){r=e.createClass,n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){u=e.cclegacy,a=e.assetManager,s=e.instantiate}],execute:function(){u._RF.push({},"0ab7eWf9V9HAqiDU1r3bcOH","AssetMgr",void 0),e("default",function(){function e(){}var u=e.prototype;return u.getBundle=function(e){if(!e||""===e)return Promise.reject(" ***** ERROR Bundle name ***** ");var r=a.getBundle(e);return r?Promise.resolve(r):new Promise((function(r,n){a.loadBundle(e,(function(t,u){t&&(console.error(" ***** load bundle "+e+" error: "+t+" ***** "),n(t)),r(u)}))}))},u.load=function(){var e=n(t().mark((function e(r,n){var u,a,s,i,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(u=this.parseAssetPath(r))){e.next=3;break}return e.abrupt("return",Promise.reject(" ***** ERROR Bundle: "+r+" ***** "));case 3:return a=u.bundleName,s=u.assetName,e.next=6,this.getBundle(a);case 6:if(i=e.sent){e.next=10;break}return n&&n(" ***** ERROR Bundle: "+a+" ***** ",null),e.abrupt("return",Promise.reject(" ***** ERROR Bundle: "+a+" ***** "));case 10:if(!(o=i.get(s))){e.next=14;break}return n&&n(null,o),e.abrupt("return",Promise.resolve(o));case 14:if(!n){e.next=17;break}return i.load(s,(function(e,r){n(e,r)})),e.abrupt("return");case 17:return e.abrupt("return",new Promise((function(e,n){i.load(s,(function(t,u){t&&(console.error(" ***** load asset "+r+" error: "+t+" ***** "),n(t)),e(u)}))})));case 18:case"end":return e.stop()}}),e,this)})));return function(r,n){return e.apply(this,arguments)}}(),u.preload=function(){var e=n(t().mark((function e(r){var n,u,a,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=this.parseAssetPath(r))){e.next=3;break}return e.abrupt("return",Promise.reject(" ***** ERROR Bundle: "+r+" ***** "));case 3:return u=n.bundleName,a=n.assetName,e.next=6,this.getBundle(u);case 6:if(s=e.sent){e.next=9;break}return e.abrupt("return");case 9:s.preload(a);case 10:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),u.parseAssetPath=function(e){var r,n;if(-1!=e.indexOf(":")){var t=e.match(/(.*):\/\/(.*)/);if(null==t||t.length<=0)return null;r=t[1],n=t[2]}else r="resources",n=e;return{bundleName:r,assetName:n}},u.release=function(e,r){void 0===r&&(r=!1);var n=this.parseAssetPath(e);if(null==n)return Promise.reject(" ***** ERROR Bundle: "+e+" ***** ");var t=n.bundleName,u=n.assetName,s=a.getBundle(t);s&&(r?this.releaseBundle(s):s.release(u))},u.releaseBundle=function(e){if("string"==typeof e){var r=a.getBundle(e);if(!r)return;r.releaseAll(),a.removeBundle(r)}else{if(!e)return;e.releaseAll(),a.removeBundle(e)}},u.releaseAll=function(){a.releaseAll()},u.createPrefab=function(){var e=n(t().mark((function e(r){var n,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(r);case 2:return n=e.sent,u=s(n),e.abrupt("return",u);case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),u.base64ToTexture=function(){var e=n(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),u.base64ToSpriteFrame=function(){var e=n(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),r(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,u._RF.pop()}}}));

System.register("chunks:///_virtual/AStarRoadSeeker.ts",["cc","./Enum3.ts","./BinaryTreeNode.ts"],(function(t){var e,s,r,i;return{setters:[function(t){e=t.cclegacy},function(t){s=t.PathQuadSeek,r=t.PathOptimize},function(t){i=t.default}],execute:function(){e._RF.push({},"70b6f336f1Bn5hqVuXLEGek","AStarRoadSeeker",void 0);t("default",function(){function t(t){this.COST_STRAIGHT=10,this.COST_DIAGONAL=14,this.maxStep=1e3,this._openList=void 0,this._closeList=void 0,this._binaryTreeNode=new i,this._startNode=void 0,this._currentNode=void 0,this._targetNode=void 0,this._roadNodes=void 0,this._round1=[[0,-1],[1,0],[0,1],[-1,0]],this._round2=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],this._round=this._round2,this.handle=-1,this._pathOptimize=r.best,this._pathQuadSeek=s.path_dire_8,this._isPassCallBack=null,this._roadNodes=t}var e=t.prototype;return e.seekPath=function(t,e){if(this._startNode=t,this._targetNode=e,this._currentNode=t,!this._startNode||!this._targetNode)return[];if(this._startNode==this._targetNode)return[this._targetNode];if(!this.isPassNode(this._targetNode))return console.error("目标不可达到"),[];this._startNode.g=0,this._startNode.resetTree(),this._binaryTreeNode.refleshTag();for(var s=0;;){if(s>this.maxStep)return console.error("没有找到计算目标",s),[];if(s++,this.searchRoundNodes(this._currentNode),this._binaryTreeNode.isTreeNull())return console.error("没有找到目标",s),[];if(this._currentNode=this._binaryTreeNode.getMinFNode(),this._currentNode==this._targetNode)return console.error("找到目标了",s),this.getPath();this._binaryTreeNode.setRoadNodeInCloseList(this._currentNode)}},e.seekPath2=function(t,e){if(this._startNode=t,this._currentNode=t,this._targetNode=e,!this._startNode||!this._targetNode)return[];if(this._startNode==this._targetNode)return[this._targetNode];var s=this.maxStep;this.isPassNode(this._targetNode)||(s=3*(Math.abs(this._targetNode.cx-this._startNode.cx)+Math.abs(this._targetNode.cy-this._startNode.cy)))>this.maxStep&&(s=this.maxStep),this._startNode.g=0,this._startNode.resetTree(),this._binaryTreeNode.refleshTag();for(var r=0,i=null;;){if(r>s)return console.error("没找到目标计算步骤为：",r),this.seekPath(t,i);if(r++,this.searchRoundNodes(this._currentNode),this._binaryTreeNode.isTreeNull())return console.error("没找到目标计算步骤为：",r),this.seekPath(t,i);if(this._currentNode=this._binaryTreeNode.getMinFNode(),(null==i||this._currentNode.h<i.h)&&(i=this._currentNode),this._currentNode==this._targetNode)return console.error("找到目标计算步骤为：",r),this.getPath();this._binaryTreeNode.setRoadNodeInCloseList(this._currentNode)}},e.testSeekPathStep=function(t,e,s,r,i){throw new Error("Method not implemented.")},e.isArriveBetweenTwoNodes=function(t,e){if(t==e)return!1;var s=Math.abs(e.cx-t.cx),r=Math.abs(e.cy-t.cy),i=0;e.cx>t.cx?i=1:e.cx<t.cx&&(i=-1);var o=0;e.cy>t.cy?o=1:e.cy<t.cy&&(o=-1);var h=0,a=0,n=0,d=0;if(s>r)for(var c=r/s,_=0;_<s;_++){a=t.cy+_*o*c,n=Math.floor(a),d=a%1;var u=t.cx+_*i,N=d<=.5?n:n+1;a=t.cy+(_+1)*o*c,n=Math.floor(a),d=a%1;var f=t.cx+(_+1)*i,l=d<=.5?n:n+1,y=this.getRoadNode(u,N),g=this.getRoadNode(f,l);if(!this.isCrossAtAdjacentNodes(y,g))return!1}else for(c=s/r,_=0;_<r;_++){h=_*i*c,n=i>0?Math.floor(t.cx+h):Math.ceil(t.cx+h);u=(d=Math.abs(h%1))<=.5?n:n+1*i,N=t.cy+_*o;h=(_+1)*i*c,n=i>0?Math.floor(t.cx+h):Math.ceil(t.cx+h);f=(d=Math.abs(h%1))<=.5?n:n+1*i,l=t.cy+(_+1)*o,y=this.getRoadNode(u,N),g=this.getRoadNode(f,l);if(!this.isCrossAtAdjacentNodes(y,g))return!1}return!0},e.isCrossAtAdjacentNodes=function(t,e){if(t==e)return!1;if(!this.isPassNode(t)||!this.isPassNode(e))return!1;var s=e.cx-t.cx,r=e.cy-t.cy;return!(Math.abs(s)>1||Math.abs(r)>1)&&(t.cx==e.cx||t.cy==e.cy||!(!this.isPassNode(this.getRoadNode(t.cx,t.cy+r))||!this.isPassNode(this.getRoadNode(t.cx+s,t.cy))))},e.isPassNode=function(t){return null!=this._isPassCallBack?this._isPassCallBack(t):null!=t&&1!=t.value},e.getRoadNode=function(t,e){var s=t+"_"+e;return this._roadNodes[s]},e.setMaxSeekStep=function(t){this.maxStep=t},e.setPathOptimize=function(t){this._pathOptimize=t},e.setPathQuadSeek=function(t){this._pathQuadSeek=t,this._pathQuadSeek==s.path_dire_4?this._round=this._round1:this._pathQuadSeek==s.path_dire_8&&(this._round=this._round2)},e.setRoadNodePassCondition=function(t){this._isPassCallBack=t},e.searchRoundNodes=function(t){for(var e=0;e<this._round.length;e++){var s=t.cx+this._round[e][0],r=t.cy+this._round[e][1],i=this.getRoadNode(s,r);!this.isPassNode(i)||i==this._startNode||this.isInCloseList(i)||this.isInCorner(i)||this.setNodeFValue(i)}},e.getPath=function(){for(var t=[],e=this._targetNode;e!=this._startNode;)t.unshift(e),e=e.parent;if(t.unshift(this._startNode),this._pathOptimize==r.none)return t;for(var i=1;i<t.length-1;i++){var o=t[i-1],h=t[i],a=t[i+1],n=h.cx==o.cx&&h.cx==a.cx,d=h.cy==o.cy&&h.cy==a.cy,c=!1;this._pathQuadSeek==s.path_dire_8&&(c=(h.cx-o.cx)/(h.cy-o.cy)*((a.cx-h.cx)/(a.cy-h.cy))==1),(n||d||c)&&(t.splice(i,1),i--)}if(this._pathQuadSeek==s.path_dire_4)return t;if(this._pathOptimize==r.better)return t;for(i=0;i<t.length-2;i++){for(var _=t[i],u=null,N=t.length-1;N>i+1;N--){var f=t[N];if(_.cx!=f.cx&&_.cy!=f.cy&&Math.abs(f.cx-_.cx)!=Math.abs(f.cy-_.cy)&&this.isArriveBetweenTwoNodes(_,f)){u=f;break}}if(u){var l=N-i-1;t.splice(i+1,l)}}return t},e.setNodeFValue=function(t){var e;e=t.cx==this._currentNode.cx||t.cy==this._currentNode.cy?this._currentNode.g+this.COST_STRAIGHT:this._currentNode.g+this.COST_DIAGONAL,this.isInOpenList(t)?e<t.g&&(t.g=e,t.parent=this._currentNode,t.h=(Math.abs(this._targetNode.cx-t.cx)+Math.abs(this._targetNode.cy-t.cy))*this.COST_STRAIGHT,t.f=t.g+t.h,this._binaryTreeNode.removeTreeNode(t),this._binaryTreeNode.addTreeNode(t)):(t.g=e,this._binaryTreeNode.setRoadNodeInOpenList(t),t.resetTree(),t.parent=this._currentNode,t.h=(Math.abs(this._targetNode.cx-t.cx)+Math.abs(this._targetNode.cy-t.cy))*this.COST_STRAIGHT,t.f=t.g+t.h,this._binaryTreeNode.addTreeNode(t))},e.isInCloseList=function(t){return this._binaryTreeNode.isInCloseList(t)},e.isInOpenList=function(t){return this._binaryTreeNode.isInOpenList(t)},e.isInCorner=function(t){if(this._pathQuadSeek==s.path_dire_4)return!1;if(t.cx==this._currentNode.cx||t.cy==this._currentNode.cy)return!1;var e=this.getRoadNode(this._currentNode.cx,t.cy),r=this.getRoadNode(t.cx,this._currentNode.cy);return!this.isPassNode(e)||!this.isPassNode(r)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Background.ts",["./rollupPluginModLoBabelHelpers.js","cc","./config.ts"],(function(t){var e,r,i,o,n,a,c,s,l,h,u,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,c=t.SpriteFrame,s=t.Node,l=t.Sprite,h=t.UITransform,u=t.math,d=t.Component},function(t){m=t.config}],execute:function(){var p,f,y,g,v;n._RF.push({},"8c523QmY1BGjJbstFHJdR36","Background",void 0);var b=a.ccclass,k=a.property;t("Background",(p=b("Background"),f=k(c),p((v=e((g=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(e,"itemSpriteFrame",v,o(e)),e.itemArray=[],e}r(e,t);var n=e.prototype;return n.onLoad=function(){this.init()},n.init=function(){this.itemArray=[];for(var t=m.row*m.blockHeight,e=m.col*m.blockWidth,r=0;r<m.row;r++){this.itemArray[r]=[];for(var i=0;i<m.col;i++){var o=-e/2+m.blockWidth/2+i*m.blockWidth,n=t/2-m.blockHeight/2-r*m.blockHeight,a=this.createItem(o,n);this.itemArray[r][i]=a}}console.log(this.itemArray)},n.createItem=function(t,e){var r=new s,i=r.addComponent(l);return i.spriteFrame=this.itemSpriteFrame,i.sizeMode=l.SizeMode.CUSTOM,this.node.addChild(r),r.setPosition(t,e),r.addComponent(h).contentSize=u.size(m.blockWidth,m.blockHeight),r},n.onDestroy=function(){for(var t=0;t<this.itemArray.length;t++)for(var e=this.itemArray[t],r=0;r<e.length;r++){var i=e[r];i&&i.destroy()}this.itemArray=[]},e}(d)).prototype,"itemSpriteFrame",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),y=g))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./Behaviour.ts"],(function(n){var e,i,o,t;return{setters:[function(n){e=n.inheritsLoose},function(n){i=n.cclegacy},function(n){o=n.ViewShowTypes},function(n){t=n.Behaviour}],execute:function(){i._RF.push({},"db7c5MaGkBBtrvyGxinAVPh","BaseView",void 0),n("default",function(n){function i(){for(var e,i=arguments.length,t=new Array(i),u=0;u<i;u++)t[u]=arguments[u];return(e=n.call.apply(n,[this].concat(t))||this).quickClose=!1,e.cache=!1,e.showType=o.ViewSingle,e.UIid=0,e}e(i,n);var t=i.prototype;return t.init=function(){},t.onOpen=function(n){},t.onOpenAniOver=function(){},t.onClose=function(){},t.onTop=function(n){},i}(t)).uiIndex=0,i._RF.pop()}}}));

System.register("chunks:///_virtual/Behaviour.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuadTree.ts"],(function(i){var t,o,n,r,s,e,l,h,a,c,f,u,g,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,o=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized,s=i.createClass},function(i){e=i.cclegacy,l=i._decorator,h=i.Collider2D,a=i.Contact2DType,c=i.Collider,f=i.UITransform,u=i.UIOpacity,g=i.Component},function(i){d=i.QuadTreeRect}],execute:function(){var _,p,y,D,T;e._RF.push({},"78837+997RN1Yv+tqVlWR8Q","Behaviour",void 0);var C=l.ccclass,m=l.property;i("Behaviour",(_=C("Behaviour"),p=m({tooltip:"对象标识"}),_((T=t((D=function(i){function t(){for(var t,o=arguments.length,s=new Array(o),e=0;e<o;e++)s[e]=arguments[e];return t=i.call.apply(i,[this].concat(s))||this,n(t,"tag",T,r(t)),t.colliders_2D=null,t.colliders_3D=null,t._transform=null,t._gameObject=null,t._uiTransform=null,t._uiOpacity=null,t._alpha=1,t._opacity=255,t}o(t,i);var e=t.prototype;return e.onLoad=function(){this.addColliderEventListener()},e.addColliderEventListener=function(){this.add2DColliderEventListener(),this.add3DColliderEventListener()},e.onTriggerEnter2D=function(i,t,o){},e.onTriggerExit2D=function(i,t,o){},e.onCollisionEnter2D=function(i,t,o){},e.onCollisionExit2D=function(i,t,o){},e.add2DColliderEventListener=function(){var i;for(this.colliders_2D=this.getComponents(h),i=0;i<this.colliders_2D.length;i++)this.colliders_2D[i].on(a.BEGIN_CONTACT,this.onTriggerEnter2D,this);for(i=0;i<this.colliders_2D.length;i++)this.colliders_2D[i].on(a.END_CONTACT,this.onTriggerExit2D,this);for(i=0;i<this.colliders_2D.length;i++)this.colliders_2D[i].on(a.BEGIN_CONTACT,this.onCollisionEnter2D,this);for(i=0;i<this.colliders_2D.length;i++)this.colliders_2D[i].on(a.END_CONTACT,this.onCollisionExit2D,this)},e.onTriggerEnter=function(i){},e.onTriggerStay=function(i){},e.onTriggerExit=function(i){},e.onCollisionEnter=function(i){},e.onCollisionStay=function(i){},e.onCollisionExit=function(i){},e.add3DColliderEventListener=function(){this.colliders_3D=this.getComponents(c);for(var i=0;i<this.colliders_3D.length;i++)this.colliders_3D[i].on("onTriggerEnter",this.onTriggerEnter,this);for(var t=0;t<this.colliders_3D.length;t++)this.colliders_3D[t].on("onTriggerStay",this.onTriggerStay,this);for(var o=0;o<this.colliders_3D.length;o++)this.colliders_3D[o].on("onTriggerExit",this.onTriggerExit,this);for(var n=0;n<this.colliders_3D.length;n++)this.colliders_3D[n].on("onCollisionEnter",this.onCollisionEnter,this);for(var r=0;r<this.colliders_3D.length;r++)this.colliders_3D[r].on("onCollisionStay",this.onCollisionStay,this);for(var s=0;s<this.colliders_3D.length;s++)this.colliders_3D[s].on("onCollisionExit",this.onCollisionExit,this)},e.removeAllColliderEventListener=function(){if(this.colliders_2D)for(var i=0;i<this.colliders_2D.length;i++)this.colliders_2D[i].off(a.BEGIN_CONTACT,this.onTriggerEnter2D,this),this.colliders_2D[i].off(a.END_CONTACT,this.onTriggerExit2D,this),this.colliders_2D[i].off(a.BEGIN_CONTACT,this.onCollisionEnter2D,this),this.colliders_2D[i].off(a.END_CONTACT,this.onCollisionExit2D,this);if(this.colliders_3D)for(var t=0;t<this.colliders_3D.length;t++)this.colliders_3D[t].off("onTriggerEnter",this.onTriggerEnter,this),this.colliders_3D[t].off("onTriggerStay",this.onTriggerStay,this),this.colliders_3D[t].off("onTriggerExit",this.onTriggerExit,this),this.colliders_3D[t].off("onCollisionEnter",this.onCollisionEnter,this),this.colliders_3D[t].off("onCollisionStay",this.onCollisionStay,this),this.colliders_3D[t].off("onCollisionExit",this.onCollisionExit,this)},e.onDestroy=function(){this.removeAllColliderEventListener()},s(t,[{key:"rect",get:function(){var i=this.node.position.clone();return new d(i.x,i.y,this.width,this.height)}},{key:"transform",get:function(){return this._transform||(this._transform=this.node),this._transform}},{key:"gameObject",get:function(){return this._gameObject||(this._gameObject=this.node),this._gameObject}},{key:"uiTransform",get:function(){return this._uiTransform||(this._uiTransform=this.node.getComponent(f)),this._uiTransform}},{key:"uiOpacity",get:function(){return this._uiOpacity||(this._uiOpacity=this.node.getComponent(u)),this._uiOpacity}},{key:"width",get:function(){return this.uiTransform?this.uiTransform.width:0},set:function(i){this.uiTransform&&(this.uiTransform.width=i)}},{key:"height",get:function(){return this.uiTransform?this.uiTransform.height:0},set:function(i){this.uiTransform&&(this.uiTransform.height=i)}},{key:"alpha",get:function(){return this._alpha},set:function(i){this._alpha=i,this._alpha<0?this._alpha=0:this._alpha>1&&(this._alpha=1),null!=this.uiOpacity&&(this.uiOpacity.opacity=this._alpha/1*255)}},{key:"opacity",get:function(){return this._opacity},set:function(i){this._opacity=i,this._opacity<0?this._opacity=0:this._opacity>255&&(this._opacity=255),null!=this.uiOpacity&&(this.uiOpacity.opacity=this._opacity)}},{key:"x",get:function(){return this.transform.position.x},set:function(i){var t=this.transform.position;t.x=i,this.transform.position=t}},{key:"y",get:function(){return this.transform.position.y},set:function(i){var t=this.transform.position;t.y=i,this.transform.position=t}},{key:"z",get:function(){return this.transform.position.z},set:function(i){var t=this.transform.position;t.z=i,this.transform.position=t}},{key:"wx",get:function(){return this.transform.worldPosition.x},set:function(i){var t=this.transform.worldPosition;t.x=i,this.transform.worldPosition=t}},{key:"wy",get:function(){return this.transform.worldPosition.y},set:function(i){var t=this.transform.transform.worldPosition;t.y=i,this.transform.worldPosition=t}},{key:"wz",get:function(){return this.transform.worldPosition.z},set:function(i){var t=this.transform.worldPosition;t.z=i,this.transform.worldPosition=t}}]),t}(g)).prototype,"tag",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=D))||y));e._RF.pop()}}}));

System.register("chunks:///_virtual/BezierPart.ts",["cc"],(function(t){var s,i,r;return{setters:[function(t){s=t.cclegacy,i=t._decorator,r=t.math}],execute:function(){var e;s._RF.push({},"3f432xl0ENMxZF0TrIni9z0","BezierPart",void 0);var o=i.ccclass;i.property,t("BezierPart",o("BezierPart")(e=function(){function t(t,s,i,r){this.startPos=void 0,this.cPos1=void 0,this.cPos2=void 0,this.endPos=void 0,this.posArray=[],this.lenght=null,this.startPos=t,this.cPos1=s,this.cPos2=i,this.endPos=r,this.lenght=this.getBezierLen()}var s=t.prototype;return s.createPosArray=function(t){for(var s=Math.floor(this.lenght/t),i=1/s,e=i;e<=1;e+=i){var o=this.bezier(this.startPos.x,this.cPos1.x,this.cPos2.x,this.endPos.x,e),h=this.bezier(this.startPos.y,this.cPos1.y,this.cPos2.y,this.endPos.y,e);this.posArray.push(r.v2(o,h))}this.posArray.length<s&&this.posArray.push(this.endPos)},s.getBezierLen=function(t){var s,i,e=0,o=r.v2(0,0);for(s=0;s<=1;s+=.05){var h=this.bezier(this.startPos.x,this.cPos1.x,this.cPos2.x,this.endPos.x,s),n=this.bezier(this.startPos.y,this.cPos1.y,this.cPos2.y,this.endPos.y,s);e+=(i=r.v2(h,n)).subtract(o).length(),o=i}return e},s.bezier=function(t,s,i,r,e){return t*Math.pow(1-e,3)+3*s*e*Math.pow(1-e,2)+3*i*e*e*(1-e)+r*Math.pow(e,3)},t}())||e);s._RF.pop()}}}));

System.register("chunks:///_virtual/BinaryTreeNode.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"656f9y+lfxGjINj0fvyGiQy","BinaryTreeNode",void 0);e("default",function(){function e(){this.seekTag=0,this.openNode=null,this.count=0}var t=e.prototype;return t.refleshTag=function(){this.openNode=null,this.count=0,this.seekTag++,this.seekTag>1e9&&(this.seekTag=0)},t.isTreeNull=function(){return null==this.openNode},t.addTreeNode=function(e,t){if(void 0===t&&(t=null),this.count++,null==t){if(this.isTreeNull())return void(this.openNode=e);t=this.openNode}t!=e&&(e.f>=t.f?null==t.right?(t.right=e,e.treeParent=t):this.addTreeNode(e,t.right):null==t.left?(t.left=e,e.treeParent=t):this.addTreeNode(e,t.left))},t.removeTreeNode=function(e){this.count++,null!=e.treeParent||null!=e.left||null!=e.right?(null==e.treeParent?e.left?(this.openNode=e.left,e.left.treeParent=null,e.right&&(e.right.treeParent=null,this.addTreeNode(e.right,this.openNode))):e.right&&(this.openNode=e.right,e.right.treeParent=null):e.treeParent.left==e?e.right?(e.treeParent.left=e.right,e.right.treeParent=e.treeParent,e.left&&(e.left.treeParent=null,this.addTreeNode(e.left,e.right))):(e.treeParent.left=e.left,e.left&&(e.left.treeParent=e.treeParent)):e.treeParent.right==e&&(e.left?(e.treeParent.right=e.left,e.left.treeParent=e.treeParent,e.right&&(e.right.treeParent=null,this.addTreeNode(e.right,e.left))):(e.treeParent.right=e.right,e.right&&(e.right.treeParent=e.treeParent))),e.resetTree()):e==this.openNode&&(this.openNode=null)},t.getMinFNode=function(e){if(void 0===e&&(e=null),this.count++,null==e){if(null==this.openNode)return null;e=this.openNode}if(null==e.left){var t=e;return null==e.treeParent?(this.openNode=e.right,this.openNode&&(this.openNode.treeParent=null)):(e.treeParent.left=e.right,e.right&&(e.right.treeParent=e.treeParent)),t}return this.getMinFNode(e.left)},t.setRoadNodeInOpenList=function(e){e.openTag=this.seekTag,e.closeTag=0},t.setRoadNodeInCloseList=function(e){e.openTag=0,e.closeTag=this.seekTag},t.isInOpenList=function(e){return e.openTag==this.seekTag},t.isInCloseList=function(e){return e.closeTag==this.seekTag},t.getOpenList=function(){var e=[];return this.seachTree(this.openNode,e),e},t.seachTree=function(e,t){null!=e&&(t.push(e),e.left&&this.seachTree(e.left,t),e.right&&this.seachTree(e.right,t))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Block.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var o,t,i,e,c;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,i=n._decorator,e=n.Animation,c=n.Component}],execute:function(){var r;t._RF.push({},"5c597v9Ai9GhZ6PDvUITBI9","Block",void 0);var a=i.ccclass;i.property,n("Block",a("Block")(r=function(n){function t(){for(var o,t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return(o=n.call.apply(n,[this].concat(i))||this).animation=void 0,o}o(t,n);var i=t.prototype;return i.onLoad=function(){this.animation=this.node.getComponent(e)},i.playEff=function(){var n=this;return new Promise((function(o,t){n.animation?(n.animation.play("block"),n.animation.on(e.EventType.FINISHED,(function(){o(!0)}),n)):t("动画组件未挂载")}))},t}(c))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/Boss.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Character.ts","./TowerLauncher.ts"],(function(t){var r,e,n,o,s,i,c;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.ProgressBar,s=t.Vec3},function(t){i=t.default},function(t){c=t.TowerLauncher}],execute:function(){var a;e._RF.push({},"0327cg14fpLKrTPJG+gbfGL","Boss",void 0);var u=n.ccclass;n.property,t("Boss",u("Boss")(a=function(t){function e(){for(var r,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(r=t.call.apply(t,[this].concat(n))||this).progress=void 0,r._currentHp=10,r._maxHp=10,r}r(e,t);var n=e.prototype;return n.onLoad=function(){t.prototype.onLoad.call(this),this.progress=this.node.getChildByName("ProgressBar").getComponent(o)},n.start=function(){},n.update=function(t){},n.initEditData=function(t){this.node.position=new s(t.x,t.y),this.updateHp(this._currentHp)},n.updateHp=function(t){this.progress&&(this._currentHp=t,this.progress.progress=this._currentHp/this._maxHp)},n.bleeding=function(){var t=this;this._currentHp-=1,this.updateHp(this._currentHp),this._currentHp<=0&&(this.scheduleOnce((function(){t.node.removeFromParent()}),0),console.error("失败了"),c.instance.gameOver=!0,c.instance.doGameOver())},n.init=function(){},e}(i))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Character.ts","./BulletManager.ts","./TowerLauncher.ts"],(function(t){var i,e,n,o,a,r,s,l,h,c,u,d,p,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,l=t.CCInteger,h=t.Vec3,c=t.view,u=t.Animation},function(t){d=t.default},function(t){p=t.BulletManager},function(t){m=t.TowerLauncher}],execute:function(){var v,f,y,w,g,b,B;a._RF.push({},"9af87CBFw5C3I5xbYJSoQXb","Bullet",void 0);var M=r.ccclass,L=r.property;t("Bullet",(v=M("Bullet"),f=L(s),y=L(l),v((b=i((g=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,n(i,"targetNode",b,o(i)),n(i,"speed",B,o(i)),i.direction2=h.ZERO,i.body=void 0,i.harm=10,i.targetPosition=void 0,i.view=void 0,i.towerLevel=void 0,i.tower=null,i.animation=null,i}e(i,t);var a=i.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this),this.body=this.node.getChildByName("body"),this.view=c.getVisibleSize(),this.animation=this.node.getComponent(u)},a.start=function(){},a.update=function(t){if(m.instance&&(m.instance.gameOver||m.instance.pause))return this.node.removeFromParent(),void p.instance.release(this);if(this.direction2){var i=Math.atan2(this.direction2.y,this.direction2.x),e=this.direction2.clone().normalize(),n=i/Math.PI*180;this.node.angle=n;var o=e.multiplyScalar(this.speed*t);this.node.position=this.node.position.clone().add(o)}(Math.abs(this.node.position.x)>this.view.width||Math.abs(this.node.position.y)>this.view.height||Math.abs(this.node.position.x)<0||Math.abs(this.node.position.y)<0)&&(this.node.removeFromParent(),p.instance.release(this))},a.short=function(t,i){this.direction2=t,this.tower=i,i&&(this.towerLevel=i.level,this.playBulletAnimation(),this.speed=i.towerData.speed,this.harm=i.towerData.harm)},a.playBulletAnimation=function(){if(this.animation){var t=this.animation.clips.map((function(t){return t.name}),this);return this.animation.on(u.EventType.FINISHED,this.onAnimationFinished,this),this.animation.play(t[Math.max(0,this.towerLevel-1)]),!0}return!1},a.onAnimationFinished=function(){},i}(d)).prototype,"targetNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(g.prototype,"speed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=g))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/BulletManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bullet.ts"],(function(t){var e,l,n,i,s,u;return{setters:[function(t){e=t.createClass},function(t){l=t.cclegacy,n=t._decorator,i=t.NodePool,s=t.instantiate},function(t){u=t.Bullet}],execute:function(){var r,a;l._RF.push({},"c87ecJWPIZNaIXzqNH5cDtE","BulletManager",void 0);var o=n.ccclass;n.property,t("BulletManager",o("BulletManager")(((a=function(){function t(){this._bulletPool=null,this.bulletList=[],this._bulletPool={},this.bulletList=[]}var l=t.prototype;return l.create=function(t){if(!t)return null;var e=this._bulletPool[t.data.name];e||(e=new i);var l=(e.size()>0?e.get():s(t)).getComponent(u);return this.bulletList.push(l),l},l.release=function(t){if(t){var e=this.bulletList.indexOf(t);e>-1&&this.bulletList.splice(e,1);var l=this._bulletPool[t.node.name];l&&l.put(t.node)}},l.releaseAll=function(){if(this.bulletList.length>0)for(var t=0;t<this.bulletList.length;t++){var e=this.bulletList[t];e.node.removeFromParent(),this.release(e),this.bulletList.splice(t,1),t--}},l.update=function(t){},e(t,null,[{key:"instance",get:function(){return t._instance||(t._instance=new t),t._instance}}]),t}())._instance=null,r=a))||r);l._RF.pop()}}}));

System.register("chunks:///_virtual/Character.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Behaviour.ts","./PathFindingAgent.ts"],(function(t){var e,i,n,o,s,a,r,h,d,l,c,u,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){a=t.cclegacy,r=t._decorator,h=t.Label,d=t.view,l=t.math,c=t.sp},function(t){u=t.Behaviour},function(t){_=t.default}],execute:function(){var p,v,f,g,m;a._RF.push({},"47c79NPDE1Obqtin1lh3e7r","Character",void 0);var k=r.ccclass,y=r.property,N=t("CharacterState",function(t){return t[t.idle=0]="idle",t[t.walk=1]="walk",t[t.sitdown=2]="sitdown",t[t.sitdown_walk=3]="sitdown_walk",t}({}));t("default",(p=k("Character"),v=y(h),p((m=e((g=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(e,"nameTxt",m,o(e)),e._objName="",e._skeleton=null,e._direction=0,e._state=0,e._lastRoadNode=null,e._currentNode=void 0,e.moving=!1,e.moveSpeed=200,e._moveAngle=0,e._roadNodeArr=[],e._roadNodeVec2=[],e._nodeIndex=0,e.speedX=100,e.speedY=100,e.directionX=1,e.directionY=1,e.screenWidth=0,e.screenHeight=0,e}i(e,t);var a=e.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this);var e=d.getVisibleSize();this.screenWidth=e.width,this.screenHeight=e.height},a.start=function(){this.state=N.idle},a.update=function(t){if(this.moving){var e=this._roadNodeVec2[this._nodeIndex],i=this.node.position,n=i.x,o=i.y,s=e.x-n,a=e.y-o,r=this.moveSpeed*t;if(s*s+a*a>r*r){if(0==this._moveAngle){this._moveAngle=Math.atan2(a,s);var h=Math.round((-this._moveAngle+Math.PI)/(Math.PI/4));this.direction=h>5?h-6:h+2}n+=Math.cos(this._moveAngle)*r,o+=Math.sin(this._moveAngle)*r}else this._moveAngle=0,this._nodeIndex==this._roadNodeArr.length-1?(n=e.x,o=e.y,this.stop()):this.walk();this.node.setPosition(n,o)}this.updateCharaterStateByNode()},a.updateCharaterStateByNode=function(){var t=this.roadNode;if(t!=this._lastRoadNode&&(this._lastRoadNode=t,this._lastRoadNode))switch(this._lastRoadNode.value){case 2:.4!=this.alpha&&(this.alpha=.4);break;case 3:this.alpha>0&&(this.alpha=0);break;default:this.alpha<1&&(this.alpha=1)}},a.walkByRoad=function(t){this._roadNodeArr=t;var e=this._roadNodeArr.map((function(t){return l.v2(t.px,t.py)}),this);this.wolkByVec2(e)},a.wolkByVec2=function(t){this._roadNodeVec2=t,this._nodeIndex=0,this._moveAngle=0,this.walk(),this.move()},a.walk=function(){this._nodeIndex<this._roadNodeVec2.length-1&&this._nodeIndex++},a.move=function(){this.moving=!0,this.state=N.walk},a.stop=function(){this.moving=!1,this.state=N.idle},a.navTo=function(t,e){var i=_.instance.seekPath(l.v2(this.node.position.x,this.node.position.y),l.v2(t,e));i.length>0&&(console.log(i),this.walkByRoad(i))},s(e,[{key:"objName",get:function(){return this._objName},set:function(t){var e;(this._objName=t,null==this.nameTxt)&&(this.nameTxt=null==(e=this.node.getChildByName("NameTxt"))?void 0:e.getComponent(h));this.nameTxt&&(this.nameTxt.string=this._objName)}},{key:"skeleton",get:function(){return this._skeleton||(this._skeleton=this.node.getComponentInChildren(c.Skeleton)),this._skeleton}},{key:"direction",get:function(){return this._direction},set:function(t){if(this._direction=t,2==t){var e=this.skeleton.node.scale.clone(),i=e.x;return e.x=-i,void(this.skeleton.node.scale=e)}var n=this.skeleton.node.scale.clone(),o=n.x;n.x=o,this.skeleton.node.scale=n}},{key:"state",get:function(){return this._state},set:function(t){}},{key:"roadNode",get:function(){return _.instance.getRoadNodeByPixel(this.node.position.x,this.node.position.y)}}]),e}(u)).prototype,"nameTxt",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/config.ts",["cc"],(function(e){var n,w;return{setters:[function(e){n=e.cclegacy,w=e.Vec2}],execute:function(){n._RF.push({},"c6c25PlK05J7Zxjenr5Qj17","config",void 0);e("config",{sceneWidth:740,sceneHeight:1200,blockWidth:90,blockHeight:90,itemWidth:78,itemHeight:67,row:20,col:10,startPos:new w(1,3),shape1:[[new w(0,-1),new w(0,0),new w(0,1),new w(0,2)],[new w(-1,0),new w(0,0),new w(1,0),new w(2,0)],[new w(0,-1),new w(0,0),new w(0,1),new w(0,2)],[new w(-1,0),new w(0,0),new w(1,0),new w(2,0)]],shape2:[[new w(-1,-1),new w(-1,0),new w(0,-1),new w(0,0)],[new w(-1,-1),new w(-1,0),new w(0,-1),new w(0,0)],[new w(-1,-1),new w(-1,0),new w(0,-1),new w(0,0)],[new w(-1,-1),new w(-1,0),new w(0,-1),new w(0,0)]],shape3:[[new w(0,-1),new w(-1,0),new w(0,0),new w(0,1)],[new w(1,0),new w(-1,0),new w(0,0),new w(0,1)],[new w(0,-1),new w(1,0),new w(0,0),new w(0,1)],[new w(0,-1),new w(-1,0),new w(0,0),new w(1,0)]],shape4:[[new w(-1,0),new w(0,0),new w(1,0),new w(1,1)],[new w(1,-1),new w(0,-1),new w(0,0),new w(0,1)],[new w(-1,-1),new w(-1,0),new w(0,0),new w(1,0)],[new w(-1,1),new w(0,-1),new w(0,0),new w(0,1)]],shape5:[[new w(-1,0),new w(0,0),new w(1,0),new w(1,-1)],[new w(-1,-1),new w(0,-1),new w(0,0),new w(0,1)],[new w(-1,0),new w(-1,1),new w(0,0),new w(1,0)],[new w(0,-1),new w(0,0),new w(0,1),new w(1,1)]],shape6:[[new w(-1,0),new w(-1,1),new w(0,-1),new w(0,0)],[new w(-1,-1),new w(0,-1),new w(0,0),new w(1,0)],[new w(-1,0),new w(-1,1),new w(0,-1),new w(0,0)],[new w(-1,-1),new w(0,-1),new w(0,0),new w(1,0)]],shape7:[[new w(-1,-1),new w(-1,0),new w(0,0),new w(0,1)],[new w(1,-1),new w(-1,0),new w(0,0),new w(0,-1)],[new w(-1,-1),new w(-1,0),new w(0,0),new w(0,1)],[new w(1,-1),new w(-1,0),new w(0,0),new w(0,-1)]]});n._RF.pop()}}}));

System.register("chunks:///_virtual/Containers.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HashMap.ts","./NodeFactory.ts","./GameObject.ts","./GameConst.ts","./EntityLayer.ts"],(function(t){var n,e,i,a,o,r,s;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.HashMap},function(t){a=t.NodeFactory},function(t){o=t.GameObject},function(t){r=t.GameConst},function(t){s=t.default}],execute:function(){e._RF.push({},"406abiLprxDE6tPkrsWB920","Containers",void 0);t("Containers",function(t){function e(){var n;return(n=t.call(this)||this).containerMap=void 0,n.containerMap=new i,n}n(e,t);var o=e.prototype;return o.onLoad=function(){},o.getChildContainer=function(t){if(this.containerMap.hasKey(t))return this.containerMap.get(t);var n=a.instance.createNode();return this.addChild(n),this.containerMap.put(t,n),n},o.setContainers=function(t){for(var n=0;n<t.length;n++){var e=a.instance.createNode();e.name=t[n],this.addChild(e),t[n]==r.ROLE_LAYER&&e.addComponent(s),this.containerMap.put(t[n],e)}},o.addContainer=function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=-1),null==this.containerMap.get(t)&&(n||(n=a.instance.createNode()),-1==e||n.setSiblingIndex(e),this.addChild(n),this.containerMap.put(t,n))},o.removeContainer=function(t){var n=this.containerMap.get(t);return n?(this.containerMap.remove(t),this.removeChild(n),n):null},o.remove=function(){this.parent&&this.parent.removeChild(this)},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/DepthHelper.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"717d9+EQtdDM7KUvmMmxVwF","DepthHelper",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/DestroyUtils.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"148efdAHCROIaJCUDI1S35L","DestroyUtils",void 0),e("DestroyUtils",function(){function e(){}return e.destroy=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)this.destroy(e[t]);else for(t=0;t<this.keyNames.length;t++)if(e[this.keyNames[t]])return void e[this.keyNames[t]]()},e}()).keyNames=["destroy","dispose"],t._RF.pop()}}}));

System.register("chunks:///_virtual/EditObjData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,a;return{setters:[function(t){n=t.inheritsLoose},function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"4b613uVFoVGBLPJihnr8m8F","EditObjData",void 0);var r=t("default",(function(){this.objId="",this.objName="",this.objType="",this.skin="",this.x=0,this.y=0,this.cx=0,this.cy=0,this.params=""}));t("EditNpcData",function(t){function a(){for(var n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=t.call.apply(t,[this].concat(r))||this).direction=0,n.isPatrol=!1,n.dialogueId=0,n.taskId=0,n.funcId=0,n.npcType=0,n}return n(a,t),a}(r)),t("EditMonsterData",function(t){function a(){for(var n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=t.call.apply(t,[this].concat(r))||this).direction=0,n.isPatrol=!1,n.dialogueId=0,n.fightId=0,n.monsterType=0,n}return n(a,t),a}(r)),t("EditTransferData",function(t){function a(){for(var n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=t.call.apply(t,[this].concat(r))||this).targetMapId="",n.targetMapSpawnId=0,n.transferType=0,n}return n(a,t),a}(r)),t("EditSpawnPointData",function(t){function a(){for(var n,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=t.call.apply(t,[this].concat(r))||this).spawnId=0,n.defaultSpawn=!1,n}return n(a,t),a}(r));a._RF.pop()}}}));

System.register("chunks:///_virtual/EditPlot.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,n,o,a,l,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.CCBoolean,u=t.SpriteFrame,c=t.Component}],execute:function(){var p,s,f,d,y,b,h;o._RF.push({},"06729MDWzRCfZXpI15JTffo","EditPlot",void 0);var v=a.ccclass,g=a.property;t("EditPlot",(p=v("EditPlot"),s=g(l),f=g(u),p((b=e((y=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"canBuild",b,n(e)),i(e,"defaultObj",h,n(e)),e}r(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){},e}(c)).prototype,"canBuild",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=e(y.prototype,"defaultObj",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/EffectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewConst.ts","./AssetMgr.ts"],(function(e){var t,n,r,o,a,i,s,c;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime,r=e.createClass},function(e){o=e.cclegacy,a=e.Animation,i=e.NodePool},function(e){s=e.default},function(e){c=e.default}],execute:function(){o._RF.push({},"f74ef144S1HvKrHDo8Ygtmd","EffectManager",void 0),e("EffectManager",function(){function e(){this._nodePool=void 0,this._effectLayer=void 0,this._nodePool=new i}var o=e.prototype;return o.initEffectLayer=function(e){this._effectLayer=e},o.getNode=function(){var e=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._nodePool&&this._nodePool.size()>0)){e.next=4;break}return e.abrupt("return",this._nodePool.get());case 4:return t=s.defaultPrefabPathPrefix+"tower/effect",e.next=7,c.instance.createPrefab(t);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.showEffect=function(e,r){var o=this;return new Promise(t(n().mark((function t(i,s){var c,u,f,p,l;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.getNode();case 2:if(c=t.sent){t.next=7;break}return console.error(" ***** tower/effect is not exist ***** "),i(null),t.abrupt("return");case 7:if(c.setPosition(r),o._effectLayer&&o._effectLayer.addChild(c),u=c.getComponent(a)){t.next=13;break}return s("***** animation is not exist ***** "),t.abrupt("return");case 13:if(f=u.clips,(p=f.map((function(e){return e.name}))).length&&-1!==p.indexOf(e)){t.next=18;break}return s("***** effect name is not exist ***** "),t.abrupt("return");case 18:if(l=f.find((function(t){return t.name===e}))){t.next=22;break}return s("***** playClip is not exist ***** "),t.abrupt("return");case 22:1==l.wrapMode&&u.on(a.EventType.FINISHED,(function(){o._nodePool.put(c),c.removeFromParent(),i()}),o),u.play(e),2==l.wrapMode&&i();case 25:case"end":return t.stop()}}),t)}))))},r(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Character.ts","./TowerLauncher.ts","./EffectManager.ts"],(function(n){var t,e,o,r,i,c,s,a;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){o=n.cclegacy,r=n._decorator,i=n.ProgressBar},function(n){c=n.default},function(n){s=n.TowerLauncher},function(n){a=n.EffectManager}],execute:function(){var u;o._RF.push({},"76911HV09VC7YhNBD9FE13i","Enemy",void 0);var p=r.ccclass;r.property,n("Enemy",p("Enemy")(u=function(n){function o(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=n.call.apply(n,[this].concat(o))||this).progress=void 0,t._currentHp=100,t._maxHp=100,t.price=50,t}t(o,n);var r=o.prototype;return r.start=function(){},r.damage=function(n){this._currentHp-=n,this.updateHp(),a.instance.showEffect("tower1_eff",this.node.position.clone()).then((function(n){})).catch((function(n){console.error(n)})),this._currentHp<=0&&(this.die(),s.instance.value+=this.price,s.instance.popEnemyCount++,a.instance.showEffect("EnemyDie",this.node.position.clone()))},r.die=function(){var n=this;this._currentHp=0,this.scheduleOnce((function(){s.instance.removeEnemy(n),n.node.removeFromParent()}),0)},r.updateHp=function(){this.progress&&(this.progress.progress=this._currentHp/this._maxHp)},r.onLoad=function(){n.prototype.onLoad.call(this),this.progress=this.node.getChildByName("ProgressBar").getComponent(i),this.updateHp()},r.navigationByPath=function(n){n.length>0&&this.wolkByVec2(n)},r.init=function(){},r.onTriggerEnter2D=function(n,t,e){},r.onTriggerExit2D=function(n,t,e){},r.onCollisionEnter2D=function(n,t,e){},r.onCollisionExit2D=function(n,t,e){},e(o,[{key:"hp",get:function(){return this._currentHp}}]),o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/Entity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Unit.ts","./GameConst.ts","./SpineSkeleton.ts","./FightUtil.ts","./ActionInfo.ts"],(function(t){var i,e,n,o,s,c,h,d,r;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy,o=t.Vec3},function(t){s=t.Unit},function(t){c=t.GameConst},function(t){h=t.SpineSkeleton},function(t){d=t.FightUtil},function(t){r=t.ActionInfo}],execute:function(){n._RF.push({},"177d2BJmcdFAaRAa6yopDHs","Entity",void 0);t("Entity",function(t){function n(){var i;return(i=t.call(this)||this).mScene=void 0,i.speed=12,i.url=void 0,i.role=void 0,i.direction=0,i.action=void 0,i.dirMode=void 0,i.roleSpine=void 0,i.dx=void 0,i.dy=void 0,i.dist=void 0,i.moveAngle=void 0,i.oldAngle=-1,i.oldMoveAngle=-1,i.xSpeed=0,i.ySpeed=0,i}i(n,t);var s=n.prototype;return s.init=function(){},s.changeDirByAngle=function(t){this.setDirection(d.instance.getDirectionByAngle(t))},s.setRole=function(t){return this.roleSpine||(this.roleSpine=this.getComponent(h),this.roleSpine||(this.roleSpine=this.addComponent(h))),this.roleSpine.setSpineId(t)},s.stopAction=function(){this.setAction(c.Idle)},s.setAction=function(t,i,e,n,o){if(void 0===i&&(i=-1),void 0===e&&(e=null),void 0===o&&(o=!1),t!=this.action||o){this.action=t,this.action=t;var s=new r(t,e,i);return this.roleSpine.setAnimation(s)}},s.getCurrentAction=function(){return this.roleSpine?this.roleSpine.currentAnimation:this.action},s.setSpineKeyFrameHandler=function(t){this.roleSpine&&(this.roleSpine.keyFrameHandler=t)},s.setDirection=function(t,i,e){if(void 0===i&&(i=!1),t!=this.direction||i){this.direction=t;var n=new o;this.getScale(n);var s=d.instance.getScaleXByDirection(t),c=Math.abs(n.x)*s;this.setScale(c,n.y)}},s.changeActionAndDirection=function(t,i,e,n,o){void 0===i&&(i=-1),void 0===e&&(e=-1),void 0===n&&(n=null),void 0===o&&(o=!1),this.setDirection(i,o),this.setAction(t,e,n)},s.setSpeed=function(t){this.speed=Math.floor(t),this.oldAngle=-1},s.getSize=function(){return 50},s.move=function(t){this.setAction(c.Move);var i=this.getLocation();this.dx=t.x-i.x,this.dy=t.y-i.y,this.dist=Math.sqrt(this.dx*this.dx+this.dy*this.dy),this.dist<this.speed?this.onMoveEnd(t):this.toMove(this.moveAngle,-1)},s.onMoveEnd=function(t){this.oldAngle=-1,this.setLocation(t.x,t.y),this.setAction(c.Idle)},s.setSpeedXY=function(t,i,e){void 0===i&&(i=-1),-1==i?(this.xSpeed=this.speed*Math.cos(t*Math.PI/180)*e,this.ySpeed=this.speed*Math.sin(t*Math.PI/180)*e):(this.xSpeed=i*Math.cos(t*Math.PI/180),this.ySpeed=i*Math.sin(t*Math.PI/180))},s.toMove=function(t,i){void 0===i&&(i=-1),this.oldAngle!=t&&this.setSpeedXY(t,i,1),this.oldAngle=t;var e=this.getLocation(),n=e.x+this.xSpeed,o=e.y+this.ySpeed;this.setLocation(n,o),this.updateHeadPos()},s.updateHeadPos=function(){},e(n,[{key:"x",get:function(){var t=this.getLocation();return t?t.x:0}},{key:"y",get:function(){var t=this.getLocation();return t?t.y:0}}]),n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/EntityInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"5ee61g4pjlEU4+HcWD289Ep","EntityInfo",void 0);t("EntityInfo",function(){function t(){this._name=void 0,this._entityId=void 0,this.onlyId=void 0,this.type=void 0,this.insId=void 0}var i=t.prototype;return i.setEntityId=function(t,n){this.type=n,this.onlyId=t,this._entityId="s"+t+"_"+(arguments.length<=2?void 0:arguments[2])},i.getEntityId=function(){return this._entityId},n(t,[{key:"name",get:function(){return this._name},set:function(t){this._name=t}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/EntityLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,i,e;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.Component}],execute:function(){var r;o._RF.push({},"f8428h81G1PqoDcFwlkxzA9","EntityLayer",void 0);var s=i.ccclass;i.property,t("default",s("EntityLayer")(r=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var i=o.prototype;return i.update=function(t){this.sortZindex()},i.sortZindex=function(){var t=this.node.children.slice();t.sort((function(t,n){return t.position.y>n.position.y?-1:t.position.y<n.position.y?1:0}));for(var n=t.length,o=0;o<n;o++)t[o].setSiblingIndex(o)},o}(e))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/Enum.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"33eadHkwjBM0ZpN3gEUmHSL","Enum",void 0);e("TouchEvent",function(e){return e.UP="touch_up",e.RIGHT="touch_right",e.DOWN="touch_down",e.LEFT="touch_left",e}({})),e("ViewShowTypes",function(e){return e[e.ViewFullScreen=0]="ViewFullScreen",e[e.ViewAddition=1]="ViewAddition",e[e.ViewSingle=2]="ViewSingle",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/enum2.ts",["cc"],(function(o){var r;return{setters:[function(o){r=o.cclegacy}],execute:function(){r._RF.push({},"2233fzhdj5DyrXxiL5WmwqT","enum",void 0);o("ItemColor",function(o){return o[o.NULL=0]="NULL",o[o.Color1=1]="Color1",o[o.Color2=2]="Color2",o[o.Color3=3]="Color3",o[o.Color4=4]="Color4",o[o.Color5=5]="Color5",o[o.Color6=6]="Color6",o[o.Color7=7]="Color7",o}({})),o("TouchEvent",function(o){return o.UP="touch-up",o.DOWN="touch-down",o.LEFT="touch-left",o.RIGHT="touch-right",o}({})),o("MusicEvent",function(o){return o.BGM="bgm",o.ACTION="action",o.GAME_OVER="over",o.ELIMINATE="eliminate",o}({})),o("NodeUrl",function(o){return o.Canvas="Canvas",o.Music="Music",o}({}));r._RF.pop()}}}));

System.register("chunks:///_virtual/Enum3.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"6d9f4TPX1RN17SPhyI25mzw","Enum",void 0);t("RPGModelAnimName",function(t){return t.Idel="steady",t.Attack="attack1",t.Jump="jump",t.Walk="walk",t.Walk2="walk2",t}({})),t("RPGModelDirection",function(t){return t[t.Left=0]="Left",t[t.Right=1]="Right",t}({})),t("MapType",function(t){return t[t.Angle45=0]="Angle45",t[t.Angle90=1]="Angle90",t}({})),t("MapLoadModel",function(t){return t[t.single=0]="single",t[t.split=1]="split",t}({})),t("PathOptimize",function(t){return t[t.none=0]="none",t[t.better=1]="better",t[t.best=2]="best",t}({})),t("PathQuadSeek",function(t){return t[t.path_dire_4=0]="path_dire_4",t[t.path_dire_8=1]="path_dire_8",t}({})),t("MapItemType",function(t){return t.Npc="npc",t.Monster="monster",t.Transfer="transfer",t.SpawnPoint="spawnPoint",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/FairyBirdConst.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"b6b32pUGMdBL52SQSLtd9+1","FairyBirdConst",void 0);var i=t("FairyBirdConst",(function(){}));i.TAG_LAND=10,i.TAG_PIPE=20,i.TAG_COIN=30,i.STATE_READING=1,i.STATE_GAMEING=2,i.STATE_GAMEOVER=3,r._RF.pop()}}}));

System.register("chunks:///_virtual/FairyBirdGameManger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FairyBirdConst.ts","./Utils.ts"],(function(e){var t,i,n,r,a,o,l,s,u,c,d,f,g,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,l=e._decorator,s=e.CCInteger,u=e.Node,c=e.Label,d=e.NodeEventType,f=e.Component},function(e){g=e.FairyBirdConst},function(e){h=e.default}],execute:function(){var p,y,b,m,v,_,T,S,A,E,N,R,C,G,B,L;o._RF.push({},"0cca7wA41VCl7tdU/twDYnk","FairyBirdGameManger",void 0);var F=l.ccclass,k=l.property;e("FairyBirdGameManger",(p=F("FairyBirdGameManger"),y=k(s),b=k(u),m=k(u),v=k(c),_=k(c),T=k(u),p(((L=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"moveSpeed",E,r(t)),n(t,"gameReadyNode",N,r(t)),n(t,"gameOverNode",R,r(t)),n(t,"goldLabel",C,r(t)),n(t,"silverLabel",G,r(t)),n(t,"bird",B,r(t)),t.gameState=g.STATE_READING,t._readyPosition=null,t._gold=0,t._silver=0,t}i(t,e);var o=t.prototype;return o.onLoad=function(){t._instance=this,this._readyPosition=this.bird.position},o.start=function(){},o.update=function(e){},o.transformGameState=function(e){if(this.gameReadyNode.active=e==g.STATE_READING,this.gameOverNode.active=e==g.STATE_GAMEOVER,this.gameState=e,e==g.STATE_READING){var t=h.FindChildByName(this.gameReadyNode,"startBtn");t&&t.on(d.TOUCH_START,this.onClickStartBtn,this),this.bird.setPosition(this._readyPosition)}else if(e==g.STATE_GAMEOVER){var i=h.FindChildByName(this.gameOverNode,"startBtn");i&&i.on(d.TOUCH_START,this.onClickReStart,this)}},o.onClickStartBtn=function(){this.transformGameState(g.STATE_GAMEING)},o.onClickReStart=function(){this.transformGameState(g.STATE_READING)},a(t,[{key:"gold",get:function(){return this._gold},set:function(e){this._gold=e,this.goldLabel&&(this.goldLabel.string=""+e)}},{key:"silver",get:function(){return this._silver},set:function(e){this._silver=e,this.silverLabel&&(this.silverLabel.string=""+e)}}],[{key:"instance",get:function(){return this._instance}}]),t}(f))._instance=null,E=t((A=L).prototype,"moveSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),N=t(A.prototype,"gameReadyNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(A.prototype,"gameOverNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(A.prototype,"goldLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(A.prototype,"silverLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(A.prototype,"bird",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=A))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/FairybirdMainPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./ViewRegisterMgr.ts","./PanelEnum.ts","./LayerManager.ts","./FairyBirdGameManger.ts","./FairyBirdConst.ts"],(function(e){var n,r,i,t,a,o,s,c,l;return{setters:[function(e){n=e.inheritsLoose},function(e){r=e.cclegacy,i=e._decorator},function(e){t=e.default},function(e){a=e.registerView},function(e){o=e.PanelType},function(e){s=e.LayerType},function(e){c=e.FairyBirdGameManger},function(e){l=e.FairyBirdConst}],execute:function(){var d;r._RF.push({},"2bc56J0gMNEi5Xf0wn9QzrS","FairybirdMainPanel",void 0);var u=i.ccclass,f=(i.property,e("FairybirdMainPanel",u("FairybirdMainPanel")(d=function(e){function r(){for(var n,r=arguments.length,i=new Array(r),t=0;t<r;t++)i[t]=arguments[t];return(n=e.call.apply(e,[this].concat(i))||this).seed=5,n.initSeed=5,n.logRandomArray=[],n}n(r,e);var i=r.prototype;return i.onOpen=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];console.log("成功打开了",e,r);for(var t=10,a=0;a<t;a++)console.log("random value:"+this.seedRandom());c.instance.transformGameState(l.STATE_READING)},i.setRandomSeed=function(e){this.initSeed=e,console.error("收到随机数",this.initSeed)},i.seedRandom=function(){return this.logRandomArray.length<30&&this.logRandomArray.push(this.seed),this.seed=(9301*this.seed+49297)%233280,this.seed/233280},i.onClose=function(){},i.start=function(){},i.update=function(e){},r}(t))||d));a({viewCls:f,id:o.FairybirdMainPanel,layer:s.view}),r._RF.pop()}}}));

System.register("chunks:///_virtual/FairyBirdPipe.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FairyBirdGameManger.ts","./FairyBirdPipeManger.ts","./FairyBirdConst.ts"],(function(i){var e,n,t,r,o,a,s,c,d,u,p,l;return{setters:[function(i){e=i.applyDecoratedDescriptor,n=i.inheritsLoose,t=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){o=i.cclegacy,a=i._decorator,s=i.Prefab,c=i.instantiate,d=i.Component},function(i){u=i.FairyBirdGameManger},function(i){p=i.FairyBirdPipeManger},function(i){l=i.FairyBirdConst}],execute:function(){var h,f,y,F,P;o._RF.push({},"179e91xHLFMw5T3SJJnqC/p","FairyBirdPipe",void 0);var g=a.ccclass,v=a.property;i("FairyBirdPipe",(h=g("FairyBirdPipe"),f=v(s),h((P=e((F=function(i){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=i.call.apply(i,[this].concat(o))||this,t(e,"coin",P,r(e)),e.coinNode=null,e}n(e,i);var o=e.prototype;return o.start=function(){},o.instanceCoin=function(){if(this.coinNode)this.coinNode&&!this.coinNode.parent&&this.node.addChild(this.coinNode);else{var i=c(this.coin);this.node.addChild(i),this.coinNode=i}},o.update=function(i){var e=this;if(u.instance.gameState==l.STATE_GAMEING){var n=this.node.getPosition();this.node.setPosition(n.x-u.instance.moveSpeed*i,n.y),this.node.getPosition().x<-1440&&this.scheduleOnce((function(){e.node.removeFromParent(),p.instance.relasePipe(e.node)}),0)}},e}(d)).prototype,"coin",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=F))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/FairyBirdPipeManger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FairyBirdPipe.ts","./FairyBirdConst.ts","./FairyBirdGameManger.ts"],(function(i){var e,t,n,r,a,o,s,c,l,u,p,d,f,h,y,P;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized,a=i.createClass},function(i){o=i.cclegacy,s=i._decorator,c=i.Prefab,l=i.CCInteger,u=i.NodePool,p=i.instantiate,d=i.math,f=i.Component},function(i){h=i.FairyBirdPipe},function(i){y=i.FairyBirdConst},function(i){P=i.FairyBirdGameManger}],execute:function(){var g,_,m,b,B,F,v,C;o._RF.push({},"b66fcw4ACNGHbny7wJ7NKrB","FairyBirdPipeManger",void 0);var M=s.ccclass,w=s.property;i("FairyBirdPipeManger",(g=M("FairyBirdPipeManger"),_=w(c),m=w(l),g(((C=function(i){function e(){for(var e,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=i.call.apply(i,[this].concat(a))||this,n(e,"prafab",F,r(e)),n(e,"rate",v,r(e)),e._timer=0,e._nodePool=void 0,e}t(e,i);var o=e.prototype;return o.onLoad=function(){e._instance=this},o.start=function(){this._nodePool=new u},o.cratePipe=function(){return p(this.prafab)},o.update=function(i){if(P.instance.gameState==y.STATE_GAMEING&&(this._timer+=i,this._timer>=this.rate)){this._timer=0;var e=this.cratePipe();this.node.addChild(e);var t=this.node.getWorldPosition(),n=d.randomRangeInt(-100,140);e.setWorldPosition(t),e.getComponent(h).instanceCoin(),e.setPosition(0,n)}},o.relasePipe=function(i){return!!this._nodePool&&(this._nodePool.put(i),!0)},a(e,null,[{key:"instance",get:function(){return this._instance}}]),e}(f))._instance=null,F=e((B=C).prototype,"prafab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(B.prototype,"rate",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),b=B))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/FBird.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Behaviour.ts","./FairyBirdConst.ts","./FairyBirdGameManger.ts","./FCoin.ts"],(function(t){var n,o,e,i,r,a,s,c,l,u,d;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.RigidBody2D,r=t.input,a=t.Input,s=t.math},function(t){c=t.Behaviour},function(t){l=t.FairyBirdConst},function(t){u=t.FairyBirdGameManger},function(t){d=t.FCoin}],execute:function(){var h;o._RF.push({},"202366LCRVGrYoUfx+6SY0R","FBird",void 0);var g=e.ccclass;e.property,t("FBird",g("FBird")(h=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).rig2d=void 0,n.rotateSpeed=30,n}n(o,t);var e=o.prototype;return e.onLoad=function(){t.prototype.onLoad.call(this),this.rig2d=this.getComponent(i)},e.start=function(){r.on(a.EventType.TOUCH_START,this.onTouchStart,this)},e.onDestroy=function(){t.prototype.onDestroy.call(this),r.off(a.EventType.TOUCH_START,this.onTouchStart,this)},e.onTouchStart=function(){this.rig2d.linearVelocity=s.v2(0,10),this.node.angle=30},e.update=function(t){u.instance.gameState==l.STATE_GAMEING?(this.rig2d.enabled=!0,this.node.angle-=this.rotateSpeed*t,this.node.angle<-60&&(this.node.angle=-60)):this.rig2d.enabled=!1},e.onCollisionEnter2D=function(t,n,o){if(n.tag==l.TAG_LAND)console.log("游戏结束"),u.instance.transformGameState(l.STATE_GAMEOVER);else if(n.tag==l.TAG_PIPE)console.log("游戏结束"),u.instance.transformGameState(l.STATE_GAMEOVER);else if(n.tag==l.TAG_COIN){var e=n.node.getComponent(d);e&&(0==e.type?(console.log("吃到金币了"),u.instance.gold+=10):1==e.type&&(console.log("吃到银币了"),u.instance.silver+=5)),this.scheduleOnce((function(){n.node.removeFromParent(),console.log("吃到金币了")}),0)}},o}(c))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/FBMoveBg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FairyBirdGameManger.ts","./FairyBirdConst.ts"],(function(t){var i,o,e,n,r,s,a,c,u,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.Component},function(t){u=t.FairyBirdGameManger},function(t){l=t.FairyBirdConst}],execute:function(){var b,p,h,g,f,v,y;r._RF.push({},"abf56q2Fv1Jo5omKRjW+B8G","FBMoveBg",void 0);var j=s.ccclass,B=s.property;t("FBMoveBg",(b=j("FBMoveBg"),p=B(a),h=B(a),b((v=i((f=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,e(i,"obj1",v,n(i)),e(i,"obj2",y,n(i)),i.moveDistance=0,i}o(i,t);var r=i.prototype;return r.start=function(){this.moveDistance=u.instance.moveSpeed},r.update=function(t){if(u.instance.gameState==l.STATE_GAMEING){var i=this.obj1.getPosition(),o=this.obj2.getPosition();this.obj1.setPosition(i.x-this.moveDistance*t,i.y),this.obj2.setPosition(o.x-this.moveDistance*t,o.y),(i=this.obj1.getPosition()).x<-1335&&(o=this.obj2.getPosition(),this.obj1.setPosition(o.x+1334,o.y)),(o=this.obj2.getPosition()).x<-1335&&(i=this.obj1.getPosition(),this.obj2.setPosition(i.x+1334,i.y))}},i}(c)).prototype,"obj1",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(f.prototype,"obj2",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=f))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/FCoin.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,n,o,a,s,p,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.SpriteFrame,p=t.math,c=t.Sprite,u=t.Component}],execute:function(){var l,f,h,y,m;o._RF.push({},"038c5dA7nJHGY+QR/NI5gow","FCoin",void 0);var F=a.ccclass,d=a.property;t("FCoin",(l=F("FCoin"),f=d([s]),l((m=e((y=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"spriteFrames",m,n(e)),e.type=0,e}r(e,t);var o=e.prototype;return o.start=function(){this.type=p.randomRangeInt(0,2),this.node.getComponent(c).spriteFrame=this.spriteFrames[this.type]},o.update=function(t){},e}(u)).prototype,"spriteFrames",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=y))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/FightConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HashMap.ts"],(function(i){var t,n,s;return{setters:[function(i){t=i.createClass},function(i){n=i.cclegacy},function(i){s=i.HashMap}],execute:function(){n._RF.push({},"bfe12ULREpFUZPGSLT1sec7","FightConfig",void 0),i("FightConfig",function(){function i(){this._heroMap=void 0,this._skilsMap=void 0,this._gameConfigObj=void 0,this._heroMap=new s,this._skilsMap=new s}var n=i.prototype;return n.init=function(i){this._gameConfigObj=i;var t=i.heros;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=t[n],e=Number(n);this._heroMap.put(e,s)}var o=i.skills;for(var r in o){var a=o[r];this._skilsMap.put(a.skillId,a)}},n.getSkillConfigs=function(){return this._skilsMap?this._skilsMap.values():[]},n.getSkillConfig=function(i){return this._skilsMap?this._skilsMap.get(i):null},n.getHeroConfigs=function(){return this._heroMap?this._heroMap.values():[]},n.getHeroConfig=function(i){return this._heroMap?this._heroMap.get(i):null},t(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/FightHeroInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FightConfig.ts","./EntityInfo.ts","./FightSkillGroupInfo.ts","./FightSkillInfo.ts","./FightMgr.ts"],(function(t){var i,n,s,o,e,h,a,p;return{setters:[function(t){i=t.inheritsLoose,n=t.createClass},function(t){s=t.cclegacy},function(t){o=t.FightConfig},function(t){e=t.EntityInfo},function(t){h=t.FightSkillGroupInfo},function(t){a=t.FightSkillInfo},function(t){p=t.FightMgr}],execute:function(){s._RF.push({},"fa0c1FkfBZNF683OP8bYNeb","FightHeroInfo",void 0);t("FightHeroInfo",function(t){function s(){for(var i,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(i=t.call.apply(t,[this].concat(s))||this).playerId=0,i.spineId=0,i.camp=0,i.site=0,i.hp=0,i.normalMaxHp=0,i._maxHp=0,i.mp=0,i.maxMp=1e3,i.shield=0,i.shieldMax=0,i.heroConfig=void 0,i.fightSkills=void 0,i}i(s,t);var e=s.prototype;return e.setData=function(t,i,n){void 0===n&&(n=1),this.playerId=t,this.heroConfig=i,this.normalMaxHp=i.maxHp,this.hp=i.maxHp,this.maxMp=i.maxMp,this.camp=i.comp,this.site=i.site,this.setEntityId(t,n,i.spineId),this.spineId=i.spineId,this.fightSkills=new h;for(var s=i.skillIds,e=[],p=0;p<s.length;p++){var r=s[p],l=o.instance.getSkillConfig(r),f=new a;f.setData(l),e.push(f)}this.fightSkills.add(e)},e.addMp=function(t){this.mp+=t,this.mp=Math.max(Math.min(this.mp,this.maxMp),0)},e.useMp=function(){p.instance.isEnd||(this.mp=0)},n(s,[{key:"maxHp",get:function(){return Math.max(this.normalMaxHp+this._maxHp,1)},set:function(t){this._maxHp=t}}]),s}(e));s._RF.pop()}}}));

System.register("chunks:///_virtual/FightMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FindTargetInfo.ts","./GameConst.ts","./FightUtil.ts","./ViewManager.ts","./PanelEnum.ts"],(function(t){var i,n,e,s,a,r,o;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy},function(t){e=t.FindTargetInfo},function(t){s=t.GameConst},function(t){a=t.FightUtil},function(t){r=t.viewManager},function(t){o=t.PanelType}],execute:function(){n._RF.push({},"804beaJBcJAnZ3TmGa2HePe","FightMgr",void 0),t("FightMgr",function(){function t(){this.fightTime=0,this.entitys=[],this.dieEntitys=[],this.fightEnd=null,this.isEnd=!1,this.seed=5,this.initSeed=5,this.index=0,this.logRandomArr=[]}var n=t.prototype;return n.reset=function(){this.dieEntitys=[],this.entitys=[],this.fightTime=0,this.isEnd=!1},n.setRandomSeed=function(t){this.initSeed=t},n.resRandomSeed=function(){this.seed=this.initSeed},n.seedRandom=function(){return this.logRandomArr.length<30&&this.logRandomArr.push(this.seed),this.seed,this.seed,this.seed/2333280},n.randomInt=function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=1),t>i){var e=t;t=i,i=e}var s=i-t+1*n,a=this.seedRandom()*s;return Math.floor(a/n)*n},n.isRandTrue=function(t){return this.randomInt(0,1e4)<=t},n.randomProbability=function(t){for(var i,n=0,e=[],s=0;s<t.length;s++)n+=t[s],e.push(n);if(0==n)return 0;do{i=this.randomInt(0,n)}while(0==i);for(var a=0;a<e.length;a++)if(!(i>e[a]))return a},n.randomArray=function(t){for(var i=t.concat(),n=i.length,e=0;e<n;e++){var s=Math.floor(this.seedRandom()*i.length),a=i[s];i[s]=i[e],i[e]=a}return i},n.addEntity=function(t){t.isRemoveTime=!1,this.entitys.push(t)},n.removeEntity=function(t){t.isRemoveTime=!0},n.getEntitys=function(){return this.entitys},n.entityToDie=function(t){this.addDieEntity(t)},n.addDieEntity=function(t){t.isRemoveTime=!0,-1==this.dieEntitys.indexOf(t)&&this.dieEntitys.push(t)},n.start=function(t){this.fightEnd=t;for(var i=0;i<this.entitys.length;i++)this.entitys[i]},n.doActiveSkillStopHandler=function(){return this.isEnd},n.doFrameHandler=function(){var t=0,i=0;if(!this.doActiveSkillStopHandler()){this.index++;for(var n=0;n<this.entitys.length;n++){var e=this.entitys[n];e.isRemoveTime||(e.checkNextFrame()&&e.check(!1),0==e.data.camp?i++:t++)}}if(0==t&&i>0){this.isEnd=!0;for(var s=0;s<this.entitys.length;s++){var a=this.entitys[s];a.isRemoveTime||a.setIsWin(!0)}console.error("赢了"),r.open(o.AFKResultPanel,!0)}else if(0==i&&t>0){this.isEnd=!0;for(var h=0;h<this.entitys.length;h++){var u=this.entitys[h];u.isRemoveTime||u.setIsWin(!0)}console.error("输了"),r.open(o.AFKResultPanel,!1)}return 0},n.getCanSelectEntitys=function(){for(var t=[],i=this.entitys.concat(),n=0;n<i.length;n++){var e=i[n];e.canSelect()&&!e.isRemoveTime&&t.push(e)}return t},n.findMainEntity=function(t,i,n){void 0===n&&(n=0);var r=[],o=this.getCanSelectEntitys(),h=new e;switch(h.enemys=o,h.form=t,h.type=1,h.isPaiChuNotSelect=n,i){case s.Main_JuLiZuiJin:r=a.instance.findLatelyOrFarEntity(!0,h);break;case s.Main_JuLiZuiYuan:r=a.instance.findLatelyOrFarEntity(!1,h);break;case s.Main_XueBaiFenZuiDi:r=a.instance.findLowHpEntity(!0,h);break;case s.Main_XueBaiFenZuiGao:r=a.instance.findLowHpEntity(!1,h);break;case s.Main_ChuShiDuiChengWeiZhi:r=a.instance.findDuiChenEntity(h);break;case s.Main_DangQianMuBiao:r=a.instance.findLatelyOrFarEntity(!0,h)}return 0==r.length&&(r=a.instance.findLatelyOrFarEntity(!0,h)),r},n.findEntity=function(t,i){var n=[],r=this.getCanSelectEntitys(),o=new e;switch(o.enemys=r,o.form=t,o.type=i[1],o.num=i[2],i[0]){case s.JuLiZuiJin:n=a.instance.findLatelyOrFarEntity(!1,o);break;case s.JuLiZuiYuan:n=a.instance.findLatelyOrFarEntity(!0,o);break;case s.SuiJiBuKeChongFu:n=a.instance.findRandomEntity(!1,o);break;case s.SuiJiKeChongFu:n=a.instance.findRandomEntity(!0,o);break;case s.ChuShiDuiChengWeiZhi:n=a.instance.findDuiChenEntity(o);break;case s.XueZuiDi:n=a.instance.findLowHpEntity(!0,o,!1);break;case s.XueZuiGao:n=a.instance.findLowHpEntity(!1,o,!1)}return n},i(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/FightRoleEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RoleEntity2.ts","./FightMgr.ts","./FightUtil.ts","./GameConst.ts","./HeadBar.ts","./AssetMgr.ts","./ViewConst.ts","./Handler.ts"],(function(t){var i,e,s,n,a,h,l,r,c,o,u,f,g;return{setters:[function(t){i=t.inheritsLoose,e=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){n=t.cclegacy,a=t.math},function(t){h=t.RoleEntity},function(t){l=t.FightMgr},function(t){r=t.FightUtil},function(t){c=t.GameConst},function(t){o=t.HeadBar},function(t){u=t.default},function(t){f=t.default},function(t){g=t.Handler}],execute:function(){n._RF.push({},"937ce0DwwZEgI3DXHqJi4/L","FightRoleEntity",void 0);t("FightRoleEntity",function(t){function n(){var i;return(i=t.call(this)||this).isAI=!1,i.isDie=!1,i.isFight=!1,i.selectTargets=[],i.selectMainTarget=null,i.skillInfo=null,i.isUseCtrSkill=!1,i.headBar=null,i.isWin=!1,i}i(n,t);var h=n.prototype;return h.updateHeadPos=function(){if(this.headBar){var t=this.getLocation(),i=this.getBounds(),e=t.x,s=t.y,n=i[3]+s;this.headBar.node.setPosition(e,n)}},h.initHeadBar=function(){var t=e(s().mark((function t(){var i,e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.instance.createPrefab(f.defaultPrefabPathPrefix+"afk/headBar");case 2:if(i=t.sent){t.next=6;break}return console.log("加载预制体失败"),t.abrupt("return");case 6:this.headBar=i.getComponent(o),e=this.mScene.getChildContainer(c.ROLE_NAME_LAYER),i.parent=e,this.updateHeadPos(),this.updateHeadInfo();case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),h.updateHeadInfo=function(){this.data&&this.headBar&&(this.headBar.setName(this.data.site+"_"+(0==this.data.camp?"队友":"敌人")+"_"+this.data.heroConfig.spineId),this.headBar.setData(this.data))},h.setData=function(){var i=e(s().mark((function i(e){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t.prototype.setData.call(this,e),this.isAI=!0;case 2:case"end":return i.stop()}}),i,this)})));return function(t){return i.apply(this,arguments)}}(),h.nextRoleFrame=function(){this.nextPlayerFrame(),this.move()},h.move=function(){this.setSpeed(this.data.heroConfig.speed),t.prototype.move.call(this)},h.check=function(t){void 0===t&&(t=!1),this.nextRoleFrame(),this.isDie||this.isWin||(this.data.fightSkills.nextFrame(),(!this.isFight||this.isUseCtrSkill||t)&&(t&&(this.isUseCtrSkill=!0,this.isFight=!0),this.checkSkill(t),this.checkSelectTarget(),this.attack()))},h.canSelect=function(){return!this.isDie&&!this.isRemoveTime},h.canAttack=function(){return!0},h.checkSelectTarget=function(){this.skillInfo&&(0==this.selectTargets.length?this.onNotSelectTarget():this.onHasSelectTarget())},h.onHasSelectTarget=function(){},h.onNotSelectTarget=function(){var t=this.skillInfo.cfg.targetTypes;if(this.selectTargets=l.instance.findEntity(this,t),0==this.selectTargets.length){if(t[0]==c.MiJi)this.skillInfo=this.data.fightSkills.getSkillByIndex(0);else if(t[0]!=c.MaxMp){var i=t.concat();i[0]=c.DangQianMuBiao,this.selectTargets=l.instance.findEntity(this,i)}0==this.selectTargets.length&&this.onSelectTargetNull()}},h.onSelectTargetNull=function(){this.data.fightSkills.useSkill(this.skillInfo.skillId),this.skillInfo=null},h.checkSkillMainTarget=function(){0==this.selectTargets.length&&(this.selectMainTarget&&(this.selectMainTarget.canSelect()||this.clearMainTarget()),this.selectMainTarget&&this.skillInfo.cfg.target==c.Main_DangQianMuBiao||(this.selectMainTarget=l.instance.findMainEntity(this,this.skillInfo.cfg.target)[0]))},h.clearMainTarget=function(){this.selectMainTarget=null},h.canCheckAngerSkill=function(){return!(!this.isUseCtrSkill&&!this.isAI)},h.canUseAngerSkill=function(){return!!this.canMove()&&this.data.mp>=this.data.maxMp},h.selectAngerSkill=function(){return this.data.fightSkills.checkAiToCtrAngerSkill(this)},h.selectAngerCheckSelectTarget=function(){this.selectTargets.length=0},h.checkPassSkillBySkillCheck=function(t){},h.selectSkill=function(){return this.data.fightSkills.selectSkill(this)},h.checkSkill=function(t){void 0===t&&(t=!1),!this.skillInfo||this.isUseCtrSkill||t?((this.canCheckAngerSkill()||t)&&(this.canUseAngerSkill()||t)&&(this.skillInfo=this.selectAngerSkill(),this.skillInfo&&this.selectAngerCheckSelectTarget()),(this.skillInfo||(this.checkPassSkillBySkillCheck(this),this.skillInfo=this.selectSkill(),this.skillInfo))&&this.checkSkillMainTarget()):this.checkSkillMainTarget()},h.checkAttack=function(t){if(void 0===t&&(t=!1),!this.canMove())return!1;if(!this.canAttack())return!1;if(!t){var i=this.selectTargets[0]?this.selectTargets[0].getLocation():a.v3(0,0),e=this.getLocation();if(this.targetMovePoint=r.instance.getTargetPointByDis(i,e,this.skillInfo.cfg.distance),this.targetMovePoint)return this.moveAngle=r.instance.getAngleByVec(this.x,this.y,this.targetMovePoint.x,this.targetMovePoint.y),this.changeDirByAngle(this.moveAngle),!1}return!0},h.attack=function(){0!=this.selectTargets.length&&this.skillInfo&&(this.isFight&&this.skillInfo.cfg.type!=c.Skill_Active||this.checkAttack()&&(this.data.fightSkills.useSkill(this.skillInfo.skillId),this.skillInfo.cfg.type==c.Skill_Active&&(this.data.useMp(),this.headBar.updateMp(this.data.mp/this.data.maxMp),this.isUseCtrSkill=!1),this.stopAction(),this.startAttackAction(this.skillInfo,this.selectTargets)))},h.getTenThousandPlaceValue=function(t){if("number"!=typeof t||!Number.isFinite(t))throw new Error("请输入一个有效的数字");return Math.floor(Math.abs(t)/1e4)%10},h.startAttackAction=function(){var t=e(s().mark((function t(i,e){var n,a,h,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("第"+l.instance.index+"帧,攻击者："+this.data.spineId+"发起技能"+i.skillId+"攻击了"),this.fightStart(),this.setSpineKeyFrameHandler(g.create(this.onSpineKeyFrame,this)),n=this.getTenThousandPlaceValue(i.skillId),a=1==n?c.Attack:c.Ultimateskill,t.next=7,this.setAction(a,1);case 7:for(h=0;h<e.length;h++)(r=e[h]).hurt(i.cfg.hurt,this),r.recovery(i.cfg.recoveyAnger,this);this.fightEnd();case 9:case"end":return t.stop()}}),t,this)})));return function(i,e){return t.apply(this,arguments)}}(),h.onSpineKeyFrame=function(t,i){},h.fightStart=function(){this.isFight=!0},h.fightEnd=function(){this.isFight=!1,this.skillInfo=null,this.selectTargets.length=0},h.hurt=function(t,i){this.data.hp=this.data.hp-t,this.headBar.updateHp(this.data.hp/this.data.maxHp),this.data.hp<=0&&this.die()},h.recovery=function(t,i){this.data.mp+=t,this.headBar.updateMp(this.data.mp/this.data.maxMp)},h.setIsWin=function(t){this.isWin=t,t&&this.setAction(c.Win)},h.die=function(){var t=e(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.stopAction(),l.instance.entityToDie(this),t.next=4,this.setAction(c.Death);case 4:this.active=!1,this.headBar&&(this.headBar.node.active=!1),this.isDie=!0;case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n}(h));n._RF.pop()}}}));

System.register("chunks:///_virtual/FightSkillGroupInfo.ts",["cc","./ArrayUtils.ts","./HashMap.ts","./GameConst.ts"],(function(i){var t,l,s,r;return{setters:[function(i){t=i.cclegacy},function(i){l=i.default},function(i){s=i.HashMap},function(i){r=i.GameConst}],execute:function(){t._RF.push({},"4f07dGCsfFHepdBgnFR7yCI","FightSkillGroupInfo",void 0);i("FightSkillGroupInfo",function(){function i(){this.activeSkillIndex=-1,this.skillMap=void 0,this.cdArray=[],this.cdMaxArray=[],this.cdInitMaxArray=[],this.skillIds=[],this.skillMap=new s}var t=i.prototype;return t.add=function(i){for(var t=0;t<i.length;t++){var l=i[t];this.skillMap.put(l.skillId,l),this.skillIds.push(l.skillId),this.cdArray.push(l.cfg.firstCd),this.cdMaxArray.push(l.cfg.cd),l.cfg.type==r.Skill_Active&&(this.activeSkillIndex=t)}},t.getSkillBySkillId=function(i){return this.skillMap.get(i)},t.getSkillByIndex=function(i){return this.skillMap.get(this.skillIds[i])},t.nextFrame=function(){for(var i=0;i<this.cdArray.length;i++)this.cdArray[i]--,this.cdArray[i]<=0&&(this.cdArray[i]=0)},t.selectSkill=function(i,t,s){void 0===t&&(t=-1);for(var n=[],e=0;e<this.cdArray.length;e++)if(0==this.cdArray[e]){var a=this.skillMap.get(this.skillIds[e]);s&&!s.execute(a)||a.cfg.type==r.Skill_Auto&&1==a.cfg.skillType&&n.push(a)}if(n.length>0){l.sortBy2(n,"skillSort",!1,!1);var c=n[0];if(-1!=t)for(e=0;e<n.length;e++)if(n[e].skillSort==t){c=n[e];break}return c}return null},t.checkAiToCtrAngerSkill=function(i,t){void 0===t&&(t=-1);var l=!1,s=this.skillMap.get(this.skillIds[this.activeSkillIndex]);if(-1!=t){var r=this.skillMap.get(this.skillIds[t]);r&&!this.isSkillCD(r.skillId)&&(s=r,l=!0)}return l||s&&s.checkAiToCtrAngerSkill()?s:null},t.isSkillCD=function(i){var t=this.skillIds.indexOf(i);return this.cdArray[t]>0},t.useSkill=function(i){var t=this.skillIds.indexOf(i);this.cdArray[t]=this.cdMaxArray[t]},t.useAngerSkill=function(){return this.skillMap.get(this.skillIds[this.activeSkillIndex])},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/FightSkillInfo.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"c0d14T+zTtFLrOYLrMg5Cy8","FightSkillInfo",void 0);t("FightSkillInfo",function(){function t(){this.skillId=void 0,this.cfg=void 0,this.skillSort=void 0}var i=t.prototype;return i.setData=function(t){this.cfg=t,this.skillId=t.skillId},i.checkAiToCtrAngerSkill=function(){return!0},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/FightUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConst.ts","./ArrayUtils.ts","./FightMgr.ts"],(function(t){var e,n,a,i,c,r,u,s,o;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,a=t.math,i=t.Vec3,c=t.view,r=t.randomRangeInt},function(t){u=t.GameConst},function(t){s=t.default},function(t){o=t.FightMgr}],execute:function(){n._RF.push({},"835b0w6aMtI9aydb0ZR8uRY","FightUtil",void 0),t("FightUtil",function(){function t(){}var n=t.prototype;return n.getTargetPointByDis=function(t,e,n){var i=this.distance(t,e),c=Math.floor(i-n);if(c<100)return null;var r=this.radian(t,e),u=Math.sin(r)*c,s=Math.cos(r)*c;return a.v3(s,u)},n.distance=function(t,e){var n=i.distance(t,e);return n},n.radian=function(t,e){return Math.atan2(t.y-e.y,t.x-e.x)},n.getAngleByVec=function(t,e,n,a){var i=180*Math.atan2(a-e,n-t)/Math.PI;return i<0&&(i+=360),i},n.getScenceRandomPosition=function(){var t=c.getVisibleSize(),e=t.width/2,n=t.height/2,i=r(-e,e),u=r(-n,n);return a.v3(i,u)},n.getDirectionByAngle=function(t){var e=0;return t>67.5&&t<112.5?e=u.S:t>22.5&&t<=67.5?e=u.ES:t<22.5||t>337.5?e=u.E:t>292.5&&t<=337.5?e=u.NE:t>247.5&&t<=292.5?e=u.N:t>202.5&&t<=247.5?e=u.WN:t>157.5&&t<=202.5?e=u.W:t>112.5&&t<=157.5&&(e=u.SW),e},n.getScaleXByDirection=function(t){var e=-1;switch(t){case u.RIGHT_UP:case u.RIGHT:case u.RIGHT_DOWN:e=1}return e},n.checkSeduce=function(t,e){return e},n.findLatelyOrFarEntity=function(t,e){var n=e.form,a=e.enemys,i=e.type||1,c=null==e.num?1:e.num,r=e.isPaiChu,u=i;i=this.checkSeduce(n,i);for(var o=[],h=0;h<a.length;h++)if((1==e.isPaiChuNotSelect||a[h].canSelect())&&(!r||a[h]!=n)&&(3==i||2==i&&a[h].data.camp==n.data.camp||1==i&&a[h].data.camp!=n.data.camp)){var l=a[h].getLocation(),d=n.getLocation(),m=this.distance(l,d);a[h].findLatelyEntity_dis=m,o.push(a[h])}return u!=i&&s.removeItem(o,n),s.sortBy2(o,"findLatelyEntity_dis",t,!1),o.slice(0,c)},n.findRandomEntity=function(t,e){var n=e.form,a=e.enemys,i=e.type||1,c=null==e.num?1:e.num,r=e.isPaiChu,u=i;i=this.checkSeduce(n,i);for(var h=[],l=0;l<a.length;l++)(1==e.isPaiChuNotSelect||a[l].canSelect())&&(r&&a[l]==n||(3==i||2==i&&a[l].data.camp==n.data.camp||1==i&&a[l].data.camp!=n.data.camp)&&h.push(a[l]));var d=[];if(h.length>0)if(t)for(;c>d.length;){var m=o.instance.randomInt(0,h.length-1);d.push(h[m])}else d=(h=o.instance.randomArray(h)).slice(0,c);return u!=i&&s.removeItem(d,n),d},n.findLowHpEntity=function(t,e,n){void 0===n&&(n=!0);var a=e.form,i=e.enemys,c=e.type||1,r=null==e.num?1:e.num,u=e.isPaiChu,o=c;c=this.checkSeduce(a,c);for(var h=[],l=0;l<i.length;l++)if((1==e.isPaiChuNotSelect||i[l].canSelect())&&(!u||i[l]!=a)&&(3==c||2==c&&i[l].data.camp==a.data.camp||1==c&&i[l].data.camp!=a.data.camp)){var d=n?i[l].data.hp/i[l].data.maxHp*1e4:i[l].data.hp;i[l].findLatelyEntity_hp=d,h.push(i[l])}return o!=c&&s.removeItem(h,a),s.sortBy2(h,"findLatelyEntity_hp",t,!1),h.slice(0,r)},n.findDuiChenEntity=function(t){var e=t.form,n=t.enemys,a=t.type||1,i=(null==t.num||t.num,t.isPaiChu);a=this.checkSeduce(e,a);for(var c=[],r=0;r<n.length;r++)if((1==t.isPaiChuNotSelect||n[r].canSelect())&&(!i||n[r]!=e)&&(3==a||2==a&&n[r].data.camp==e.data.camp||1==a&&n[r].data.camp!=e.data.camp)&&n[r].data.site==e.data.site){c.push(n[r]);break}return c.length>0&&s.removeItem(c,e),c},e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/FindTargetInfo.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"ed3b5XozOdITJc6MtUICcmM","FindTargetInfo",void 0);t("FindTargetInfo",(function(){this.enemys=[],this.form=null,this.isPaiChu=!1,this.isPaiChuNotSelect=0,this.type=void 0,this.num=1,this.skillType=0,this.job=0,this.maxMp=0,this.guild=0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/Game2048.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Grid.ts","./Game2048Enum.ts","./Tile.ts","./Enum.ts"],(function(i){var t,e,n,r,s,o,a,l,h,u;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy,n=i._decorator,r=i.math,s=i.Component},function(i){o=i.Grid},function(i){a=i.DirectionType,l=i.config2048},function(i){h=i.Tile},function(i){u=i.TouchEvent}],execute:function(){var d,c;e._RF.push({},"094bfWv+LJIwITzglpKT3vc","Game2048",void 0);var v=n.ccclass,f=(n.property,i("Game2048",v("Game")(((c=function(i){function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).grid=void 0,t.startTiles=void 0,t.size=void 0,t}t(e,i);var n=e.prototype;return n.onLoad=function(){var i=this;e._ins=this,this.node.on(u.UP,(function(){i.move(a.UP)}),this),this.node.on(u.RIGHT,(function(){i.move(a.RIGHT)}),this),this.node.on(u.DOWN,(function(){i.move(a.DOWN)}),this),this.node.on(u.LEFT,(function(){i.move(a.LEFT)}),this)},n.start=function(){var i=this;this.size=l.size,this.startTiles=l.startTiles,this.grid=this.node.addComponent(o),this.grid.setup(this.size),this.addStartTiles(),this.grid.initNode().then((function(){i.grid.render(),i.grid.printGrid()}))},n.update=function(i){},n.getVector=function(i){var t;return((t={})[a.UP]=r.v2(0,-1),t[a.DOWN]=r.v2(0,1),t[a.RIGHT]=r.v2(1,0),t[a.LEFT]=r.v2(-1,0),t)[i]},n.buildTraversals=function(i){for(var t={x:[],y:[]},e=0;e<this.size;e++)t.x.push(e),t.y.push(e);return 1==i.x&&(t.x=t.x.reverse()),1==i.y&&(t.y=t.y.reverse()),t},n.findFarthestPoint=function(i,t){var e;do{e=i,i.set(e.x+t.x,e.y+t.y)}while(this.grid.withinBounds(i)&&this.grid.checkCellAvailable(i));return{farthest:e,next:i}},n.prepareTiles=function(){this.grid.foreachCell((function(i,t,e){e&&(e.megreFrom=null,e.savePosition())}))},n.addStartTiles=function(){for(var i=0;i<this.startTiles;i++)this.addRandomTile()},n.addRandomTile=function(){if(this.grid.checkCellsAvailable()){var i=Math.random()<.9?2:4,t=this.createTile(this.grid.randomAvailableCell(),i);this.grid.insertTile(t)}},n.nextPos=function(i,t){var e,n=((e={})[a.UP]=function(i){return r.v2(i.x+1,i.y)},e[a.DOWN]=function(i){return r.v2(i.x-1,i.y)},e[a.LEFT]=function(i){return r.v2(i.x,i.y+1)},e[a.RIGHT]=function(i){return r.v2(i.x,i.y-1)},e)[t](i);return this.grid.withinBounds(n)?{pos:n,value:this.grid.getCellValue(n)}:null},n.nextNonZore=function(i,t){var e=this.nextPos(i,t);if(!e)return null;var n=e.pos,r=e.value;return this.grid.withinBounds(n)?0==r?this.nextNonZore(n,t):e:null},n.cale=function(i,t){var e=this.grid.getCellValue(i),n=this.nextNonZore(i,t);if(n){var s=this.grid.getCellContent(i),o=n.pos,a=n.value,l=this.grid.getCellContent(o);if(0==e)this.grid.insertTile(s,o),this.grid.insertTile(l,r.v2(i.x,i.y)),this.cale(i,t);else if(e===a){var h=this.createTile(o,2*a);h.megreFrom=[s,l],this.grid.removeTile(null,o),this.grid.insertTile(h,r.v2(i.x,i.y))}var u=this.nextPos(i,t);this.cale(u.pos,t)}},n.move=function(i){if(this.prepareTiles(),i==a.UP)for(var t=0;t<this.size;t++)this.cale(r.v2(0,t),i);else if(i==a.DOWN)for(var e=0;e<this.size;e++)this.cale(r.v2(this.size-1,e),i);else if(i==a.LEFT)for(var n=0;n<this.size;n++)this.cale(r.v2(n,0),i);else if(i==a.RIGHT)for(var s=0;s<this.size;s++)this.cale(r.v2(s,this.size-1),i);this.addRandomTile(),this.grid.render(),this.grid.printGrid()},n.positionsEqual=function(i,t){return i.x===t.x&&i.y===t.y},n.createTile=function(i,t){var e=new h;return e.setup(i,t),e},n.serialize=function(){return{grid:this.grid.serialize()}},e}(s))._ins=void 0,d=c))||d));window.Game2048=f,e._RF.pop()}}}));

System.register("chunks:///_virtual/Game2048Enum.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e407aBiWc5Cpb/l/I62tqMx","Game2048Enum",void 0);t("DirectionType",function(t){return t[t.UP=0]="UP",t[t.RIGHT=1]="RIGHT",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t}({})),t("config2048",{tileWidth:100,tileHight:100,size:4,startTiles:2});e._RF.pop()}}}));

System.register("chunks:///_virtual/GameCamera.ts",["cc"],(function(i){var o,t;return{setters:[function(i){o=i.cclegacy,t=i.UITransform}],execute:function(){o._RF.push({},"a3b88529T1KQoJSKfL0O65j","GameCamera",void 0);i("GameCamera",function(){function i(i,o,s){this.viewPortNode=void 0,this.mapNode=void 0,this.roleNode=void 0,this.xRange=void 0,this.yRange=void 0,this.lastX=void 0,this.lastY=void 0,this.viewPortNode=i,this.mapNode=o,this.roleNode=s;var e=this.viewPortNode.getComponent(t),h=this.mapNode.getComponent(t);h.width>e.width?this.xRange=(h.width-e.width)/2:this.xRange=0,h.height>e.height?this.yRange=(h.height-e.height)/2:this.yRange=0,this.lastX=s.position.x,this.lastY=s.position.y}return i.prototype.updatePosition=function(){if(this.lastX!==this.roleNode.position.x||this.lastY!==this.roleNode.position.y){this.lastX=this.roleNode.position.x,this.lastX=this.roleNode.position.y;var i=this.roleNode.position.x,o=this.roleNode.position.y;this.mapNode.setPosition(-i,-o),this.mapNode.position.x>this.xRange?(this.mapNode.setPosition(this.xRange,this.mapNode.position.y),console.log("摄像头超过右边界")):this.mapNode.position.x<-this.xRange&&(this.mapNode.setPosition(-this.xRange,this.mapNode.position.y),console.log("摄像头超过左边界")),this.mapNode.position.y>this.yRange?(this.mapNode.setPosition(this.mapNode.position.x,this.yRange),console.log("摄像头超过上边界")):this.mapNode.position.y<-this.yRange&&(this.mapNode.setPosition(this.mapNode.position.x,-this.yRange),console.log("摄像头超过下边界"))}},i}());o._RF.pop()}}}));

System.register("chunks:///_virtual/GameConst.ts",["cc"],(function(i){var n;return{setters:[function(i){n=i.cclegacy}],execute:function(){n._RF.push({},"08605JgqfRAzLt29kz51t36","GameConst",void 0);var e=i("GameConst",(function(){}));e.Attack="att",e.Idle="holdon",e.Move="move",e.Skill="skill",e.Ultimateskill="ultimateskill",e.BeHit="behit",e.Death="death",e.Win="win",e.UP=0,e.RIGHT_UP=1,e.RIGHT=2,e.RIGHT_DOWN=3,e.DOWN=4,e.LEFT_DOWN=5,e.LEFT=6,e.LEFT_UP=7,e.N=0,e.NE=1,e.E=2,e.ES=3,e.S=4,e.SW=5,e.W=6,e.WN=7,e.BG_LAYER="bgContainer",e.MAP_Bottom_Role_LAYER="bottomRoleContainer",e.MAP_LAYER="mapContainer",e.DECORATE_LAYER="decorateContainer",e.MAP_SHADOW_LAYER="shadowContainer",e.MAP_MAGIC_LAYER="magicContainer",e.MAP_EFFECT_LAYER="mapEffectContainer",e.MAP_DROP_LAYER="dropContainer",e.EFFECT_Bottom_LAYER="effectBottomContainer",e.EFFECT_TOP_LAYER="effectTopContainer",e.ROLE_LAYER="roleContainer",e.ROLE_NAME_LAYER="roleNameContainer",e.EFFECT_LAYER="effectContainer",e.HIT_EFFECT_LAYER="hitEffectLayer",e.HURT_EFFECT_LAYER="hurtContainer",e.CENTER_LAYER="centerContainer",e.TOP_LAYER="topContainer",e.Main_DangQianMuBiao=1,e.Main_XueBaiFenZuiDi=2,e.Main_XueBaiFenZuiGao=3,e.Main_JuLiZuiYuan=4,e.Main_JuLiZuiJin=5,e.Main_ChuShiDuiChengWeiZhi=6,e.DangQianMuBiao=1,e.QuanTi=2,e.ZhanLiZuiGao=3,e.GongJiZuiGao=4,e.XueBaiFenZuiDi=5,e.XueBaiFenZuiGao=6,e.JuLiZuiYuan=7,e.JuLiZuiJin=8,e.ChuShiDuiChengWeiZhi=9,e.ZuiKaoQian=10,e.ZuiKaoHou=11,e.QianPai=12,e.HouPai=13,e.SuiJiBuKeChongFu=14,e.SuiJiKeChongFu=15,e.MiJi=16,e.FangYuDi=17,e.ZhiDingYingXiong=18,e.FontNotDun=19,e.Buff=20,e.XueZuiDi=21,e.XueZuiGao=22,e.GongJiLeiXing=23,e.JiaoDuZuiXiao=24,e.Job=25,e.MaxMp=26,e.ZhiDingZhenYing=27,e.Ziji=28,e.WeiXieZuiDa=29,e.ZuiKaoJinWoFangHouPai=30,e.BuffOrFangYuDi=31,e.ZhiDingQuYu=32,e.ZhenYingGongJiLiZuiGao=34,e.BaoJiLvZuiGao=35,e.Skill_Active=1,e.Skill_Auto=2,e.Skill_Passive=3,e.Skill_PassiveToActive=4,e.Skill_GodWeapon=5,e.Skill_ShengLong=6,e.Action_Opre_One=1,e.Action_Opre_Quaue=2,n._RF.pop()}}}));

System.register("chunks:///_virtual/GameElement.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuadTree.ts"],(function(t){var i,e,n,h,s,o,r,d,a,c,l,u;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy,h=t._decorator,s=t.Label,o=t.UITransform,r=t.Sprite,d=t.Color,a=t.randomRange,c=t.math,l=t.Component},function(t){u=t.QuadTreeRect}],execute:function(){var m;n._RF.push({},"196be8lNWNNdb5ESOo35Ojk","GameElement",void 0);var p=h.ccclass;h.property,t("GameElement",p("GameElement")(m=function(t){function n(){for(var i,e=arguments.length,n=new Array(e),h=0;h<e;h++)n[h]=arguments[h];return(i=t.call.apply(t,[this].concat(n))||this)._x=void 0,i._y=void 0,i._width=void 0,i._height=void 0,i.size=void 0,i.dir=void 0,i.speed=250,i.nameLabel=void 0,i.myself=!1,i}i(n,t);var h=n.prototype;return h.onLoad=function(){this.nameLabel=this.node.getChildByName("nameLable").getComponent(s),this.nameLabel&&(this.nameLabel.string=this.node.name)},h.start=function(){var t=this.getComponent(o);this.width=t.width,this.height=t.height},h.update=function(t){if(this.UpdatePoint(),!this.myself){var i=this.dir.clone().multiplyScalar(this.speed*t),e=this.node.position.clone().add(i);e.x-this.width/2<-this.size.width/2&&(this.dir.x=-this.dir.x),e.x+this.width/2>this.size.width/2&&(this.dir.x=-this.dir.x),e.y-this.height/2<-this.size.height/2&&(this.dir.y=-this.dir.y),e.y+this.height/2>this.size.height/2&&(this.dir.y=-this.dir.y);var n=this.node.position.clone().add(this.dir.clone().multiplyScalar(this.speed*t));this.node.setPosition(n)}},h.UpdatePoint=function(){this.x=this.node.position.x,this.y=this.node.position.y},h.InitDir=function(){this.dir=this.randomInsideUnitCircle()},h.Init=function(t,i){void 0===i&&(i=!1),this.UpdatePoint(),this.InitDir(),this.myself=i,this.myself&&(this.node.getComponent(r).color=d.BLACK),this.width=this.node.getComponent(o).width,this.height=this.node.getComponent(o).height,this.size=t},h.randomInsideUnitCircle=function(){var t=2*a(1,360)*Math.PI,i=Math.sqrt(Math.random()),e=Math.cos(t)*i,n=Math.sin(t)*i;return c.v3(e,n,0).normalize()},h.Click=function(t){this.node.getComponent(r).color=t?d.RED:d.WHITE},e(n,[{key:"rect",get:function(){return new u(this.x,this.y,this.width,this.height)}},{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),n}(l))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts"],(function(t){var e,i,n;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.Entity}],execute:function(){i._RF.push({},"1097aDJjh1GrqGdab6KT6HP","GameEntity",void 0);t("GameEntity",function(t){function i(){var e;return(e=t.call(this)||this).maxIndex=1,e.index=0,e.isRemoveTime=!1,e.entityInfo=void 0,e.targetMovePoint=void 0,e.form=void 0,e.oldMoveX=void 0,e.oldMoveY=void 0,e}e(i,t);var n=i.prototype;return n.nextPlayerFrame=function(){},n.checkNextFrame=function(){return this.index++,this.index>=this.maxIndex&&(this.index=0,!0)},n.canMove=function(){return!0},n.move=function(){this.canMove()&&this.targetMovePoint&&(this.oldMoveX=this.targetMovePoint.x,this.oldMoveY=this.targetMovePoint.y,t.prototype.move.call(this,this.targetMovePoint))},n.check=function(){},i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./SpawnPoint.ts","./TransferDoor.ts","./Npc.ts","./Monster.ts"],(function(e){var n,t,r,o,i,a,s,c,u,f,l,p,b,d,P,g,m;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createClass},function(e){a=e.cclegacy,s=e._decorator,c=e.Prefab,u=e.director,f=e.instantiate,l=e.Vec3,p=e.Component},function(e){b=e.default},function(e){d=e.default},function(e){P=e.default},function(e){g=e.Npc},function(e){m=e.Monster}],execute:function(){var v,y,h,w,D,C,M,_,z,G,L,N,R,S;a._RF.push({},"ff55acmKi5LqKnsxhJvYbs3","GameManager",void 0);var T=s.ccclass,k=s.property;e("GameManager",(v=T("GameManager"),y=k(c),h=k(c),w=k(c),D=k(c),C=k(c),v(((S=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,r(n,"playerPrefab",z,o(n)),r(n,"monsterPrefab",G,o(n)),r(n,"npcPrefab",L,o(n)),r(n,"spawnPointPrefab",N,o(n)),r(n,"transferDoorPrefabs",R,o(n)),n}t(n,e);var a=n.prototype;return a.onLoad=function(){n._instance?this.node.destroy():(n._instance=this,u.addPersistRootNode(this.node),this.init())},a.getPlayer=function(){var e=f(this.playerPrefab).getComponent(b);return e.node.position=new l(0,0,0),e.node.active=!0,e},a.getNPC=function(){var e=f(this.npcPrefab).getComponent(g);return e.node.active=!0,e.node.position=new l(0,0,0),e},a.getMonster=function(){var e=f(this.monsterPrefab).getComponent(m);return e.node.active=!0,e.node.position=new l(0,0,0),e},a.getSpawnPoint=function(){var e=f(this.spawnPointPrefab).getComponent(d);return e.node.active=!0,e.node.position=new l(0,0,0),e},a.getTransferDoor=function(e){var n=0;e<this.transferDoorPrefabs.length&&(n=e);var t=f(this.transferDoorPrefabs[n]).getComponent(P);return t.node.active=!0,t.node.position=new l(0,0,0),t},a.init=function(){},a.start=function(){},a.update=function(e){},i(n,null,[{key:"instance",get:function(){return n._instance}}]),n}(p))._instance=void 0,z=n((_=S).prototype,"playerPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(_.prototype,"monsterPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(_.prototype,"npcPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(_.prototype,"spawnPointPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(_.prototype,"transferDoorPrefabs",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=_))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameObject.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,c,i,o;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass},function(e){n=e.cclegacy,c=e._decorator,i=e.Node,o=e.director}],execute:function(){var a;n._RF.push({},"8f9d1AmxnVFlKR6f8Cx6a4k","GameObject",void 0);var s=c.ccclass,u=(c.property,e("GameObject",s("GameObject")(a=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.setActive=function(e){this.active!=e&&(this.active=e)},n.Find=function(e){var t=o.getScene();return this.searchChildByName(t,e)},n.searchChildByName=function(e,t){var r=e.getChildByName(t);if(r)return r;for(var n=e.children.length,c=null,i=0;i<n;i++){if((c=e.children[i]).name==t)return r=c;if(r=this.searchChildByName(c,t))return r}return r},n.FindObjectOfType=function(e){var t=e;return o.getScene().getComponentInChildren(t)},n.FindObjectsOfType=function(e){var t=e;return o.getScene().getComponentsInChildren(t)},r(n,[{key:"transform",get:function(){return this}},{key:"gameObject",get:function(){return this}}]),n}(i))||a));i.prototype.setActive=u.prototype.setActive,i.prototype.gameObject=u.prototype.gameObject,i.prototype.transform=u.prototype.transform,n._RF.pop()}}}));

System.register("chunks:///_virtual/GameOverOrWin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./ViewRegisterMgr.ts","./PanelEnum.ts","./LayerManager.ts","./ViewConst.ts","./Utils.ts","./ViewManager.ts","./AssetMgr.ts","./Enum.ts","./TowerLauncher.ts","./TowerSceneMap.ts"],(function(e){var t,n,r,i,o,a,s,c,u,l,p,d,f,h,m,y,v,w,g,B,C,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.SpriteFrame,l=e.Sprite,p=e.Button},function(e){d=e.default},function(e){f=e.registerView},function(e){h=e.PanelType},function(e){m=e.LayerType},function(e){y=e.default},function(e){v=e.default},function(e){w=e.viewManager},function(e){g=e.default},function(e){B=e.ViewShowTypes},function(e){C=e.TowerLauncher},function(e){x=e.TowerSceneMap}],execute:function(){var T,b,O,M,F,S,P;s._RF.push({},"4085bx6yndKv5TD6BJzY4uB","GameOverOrWin",void 0);var G=c.ccclass,L=c.property,A=e("GameOverOrWin",(T=G("GameOverOrWin"),b=L(u),O=L(u),T((S=t((F=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).bg=void 0,t.tryBtn=void 0,t.nextBtn=void 0,r(t,"winSpriteFrame",S,i(t)),r(t,"loseSpriteFrame",P,i(t)),t.showType=B.ViewAddition,t}n(t,e);var s=t.prototype;return s.onOpen=function(){var e=o(a().mark((function e(t){var n,r,i,o,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length<=1?void 0:s[1],e.next=3,g.instance.load("resources://tower/res/NormalMordel/GameOverAndWin/gameover0-hd_1/texture");case 3:return r=e.sent,e.next=6,g.instance.load("resources://tower/res/NormalMordel/GameOverAndWin/gameover0-hd_8/texture");case 6:i=e.sent,this.bg&&((o=new u).texture=n?i:r,this.bg.spriteFrame=o);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.init=function(){this.bg=v.FindChildByName(this.node,"bg").getComponent(l),this.tryBtn=v.FindChildByName(this.node,"BtnTry").getComponent(p),this.nextBtn=v.FindChildByName(this.node,"BtnContinue").getComponent(p),this.tryBtn&&this.tryBtn.node.on(p.EventType.CLICK,this.onClickTryAgain,this),this.nextBtn&&this.nextBtn.node.on(p.EventType.CLICK,this.onClickNext,this)},s.onClickTryAgain=function(){C.instance.restart(),x.instance.setMapId(C.instance.mapId),w.close()},s.onClickNext=function(){C.instance.restart(),x.instance.setMapId(C.instance.mapId+1),w.close()},s.start=function(){},s.update=function(e){},t}(d)).prototype,"winSpriteFrame",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(F.prototype,"loseSpriteFrame",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=F))||M));f({viewCls:A,id:h.GameOverOrWin,layer:m.window,prefabPathPrefix:y.defaultPrefabPathPrefix+"tower/"}),s._RF.pop()}}}));

System.register("chunks:///_virtual/GameScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Scene.ts"],(function(e){var n,t,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){c=e.Scene}],execute:function(){t._RF.push({},"43ea6TpugBL16mddOSsKgx/","GameScene",void 0);e("GameScene",function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/Grid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Game2048Enum.ts","./AssetMgr.ts"],(function(e){var t,n,i,r,s,l,o,a,c,u,h,f;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){r=e.cclegacy,s=e._decorator,l=e.math,o=e.Label,a=e.Component,c=e.Sprite,u=e.UITransform},function(e){h=e.config2048},function(e){f=e.default}],execute:function(){var p;r._RF.push({},"281eb3SsZ5CUL5yQpaRPi8c","Grid",void 0);var v=s.ccclass;s.property,e("Grid",v("Grid")(p=function(e){function r(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).cells=void 0,t.cellNodeArray=void 0,t.size=void 0,t}t(r,e);var s=r.prototype;return s.setup=function(e){this.size=e,this.cells=this.empty()},s.initNode=function(){var e=n(i().mark((function e(){var t,n,r,s,l,o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.cellNodeArray=[],this.cells&&this.cells.length){e.next=3;break}return e.abrupt("return");case 3:t=h.size*h.tileHight,n=h.size*h.tileWidth,r=0;case 6:if(!(r<this.cells.length)){e.next=25;break}s=this.cells[r],this.cellNodeArray[r]=[],l=0;case 10:if(!(l<s.length)){e.next=22;break}return e.next=13,this.createNode(0);case 13:o=e.sent,a=-n/2+h.tileWidth/2+l*h.tileWidth,c=t/2-h.tileHight/2-r*h.tileHight,o.setPosition(a,c),o.parent=this.node,this.cellNodeArray[r][l]=o;case 19:l++,e.next=10;break;case 22:r++,e.next=6;break;case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.empty=function(){for(var e=[],t=0;t<this.size;t++)for(var n=e[t]=[],i=0;i<this.size;i++)n.push(null);return e},s.randomAvailableCell=function(){var e=this.availableCells();return e.length?e[Math.floor(Math.random()*e.length)]:null},s.availableCells=function(){var e=[];return this.foreachCell((function(t,n,i){i||e.push(l.v2(t,n))})),e},s.foreachCell=function(e){for(var t=0;t<this.size;t++)for(var n=0;n<this.size;n++)e&&e(t,n,this.cells[t][n])},s.checkCellAvailable=function(e){return!this.getCellContent(e)},s.checkCellOccupied=function(e){return!!this.getCellContent(e)},s.checkCellsAvailable=function(){return!!this.availableCells().length},s.insertTile=function(e,t){var n=t?t.x:e.positionX,i=t?t.y:e.positionY;this.cells[n][i]=e},s.removeTile=function(e,t){if(e||t){var n=t?t.x:e.positionX,i=t?t.y:e.positionY;this.cells[n][i]=null}else console.warn("移除格子时即没有传入格子对象也没有传位置。两个参数至少传一个")},s.getCellContent=function(e){return this.withinBounds(e)?this.cells[e.x][e.y]:null},s.getCellValue=function(e){var t=this.getCellContent(e);return t?t.value:0},s.withinBounds=function(e){return e.x>=0&&e.x<this.size&&e.y>=0&&e.y<this.size},s.serialize=function(){for(var e=[],t=0;t<this.size;t++)for(var n=e[t]=[],i=0;i<this.size;i++){var r=this.cells[t][i];r?n.push(r.serialize()):n.push(null)}return{size:this.size,cells:e}},s.printGrid=function(){for(var e="",t=0;t<this.size;t++){for(var n=[],i=0;i<this.size;i++){var r=this.getCellValue(l.v2(t,i));n.push(r)}e+=n.join(",")+"\n"}console.log(e)},s.render=function(){for(var e=0;e<this.cells.length;e++)for(var t=this.cells[e],n=0;n<t.length;n++){var i=this.cellNodeArray[e][n];this.setNodeValue(i,this.getCellValue(l.v2(e,n)))}},s.createNode=function(){var e=n(i().mark((function e(t){var n,r,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"resources://prefabs/Title",e.next=3,f.instance.createPrefab("resources://prefabs/Title");case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return(r=n.getChildByName("Label"))&&(r.getComponent(o).string=""+t),(s=n.getChildByName("Ghost"))&&((l=s.getComponent(c)).sizeMode=c.SizeMode.CUSTOM,l.getComponent(u).setContentSize(h.tileWidth,h.tileHight)),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.setNodeValue=function(e,t){if(e){var n=e.getChildByName("Label");n&&(n.getComponent(o).string=t>0?""+t:"")}},s.onLoad=function(){this.cells=[]},s.start=function(){},s.update=function(e){},r}(a))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/Handler.ts",["cc","./Pool.ts"],(function(t){var i,e;return{setters:[function(t){i=t.cclegacy},function(t){e=t.Pool}],execute:function(){i._RF.push({},"42571OGuuRIwqH68/X8xnMc","Handler",void 0),t("Handler",function(){function t(t,i,e){void 0===t&&(t=null),void 0===i&&(i=null),this.param=void 0,this.paramList=void 0,this.fun=void 0,this.thisObj=void 0,this.inPool=void 0,this.autoRelease=void 0,null!=t&&this.init(t,i,e)}var i=t.prototype;return i.init=function(t,i,e){this.fun=t,this.param=e,this.thisObj=i},i.destroy=function(){this.autoRelease=!1,this.param=null,this.paramList=null,this.fun=null,this.thisObj=null},t.create=function(i,o,n,s){void 0===s&&(s=!1),null==this.pool&&(this.pool=new e(t,1e3));var l=this.pool.create();return l.autoRelease=s,l.inPool=!1,l.init(i,o,n),l},t.relesea=function(t){t.destroy(),t.inPool=!0,t.autoRelease=!1,this.pool.release(t)},i.execute=function(){if(this.fun){for(var i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];null!=this.param&&e.unshift(this.param);var n=this.fun.apply(this.thisObj,e);if(this.autoRelease){if(this.inPool)throw new Error("需要多次调用CallBack的execute方法的，不能设置为自动释放autoRelese");this.destroy(),t.relesea(this)}return n}},t}()).pool=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/HashMap.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"d23850qKnNKp7VL8QWfgUXE","HashMap",void 0);t("HashMap",function(){function t(){this.isDestroy=!1,this._length=void 0,this.obj=void 0,this.clear()}var n=t.prototype;return n.clear=function(){this.obj={},this._length=0},n.size=function(){return this._length},n.getContainer=function(){return this.obj},n.onDestroy=function(t){var n=["destroy","dispose"];if(t instanceof Array)for(var i=0;i<t.length;i++)this.destroy(t[i]);else for(var r=0;r<n.length;r++)if(t[n[r]])return void t[n[r]]()},n.destroy=function(t){for(var n in this.isDestroy=!0,this.obj)this.onDestroy(this.obj[n]);this.obj=null},n.isEmpty=function(){return 0==this._length},n.get=function(t){return this.obj[t]},n.put=function(t,n){null==this.obj[t]&&this._length++,this.obj[t]=n},n.remove=function(t){var n=this.obj[t];return null!=n&&(delete this.obj[t],this._length--),n},n.hasKey=function(t){return null!=this.obj[t]},n.hasValue=function(t){for(var n in this.obj)if(this.obj[n]==t)return!0;return!1},n.keys=function(){var t=[];if(0!=this._length){for(var n in this.obj)t.push(n);return t}return t},n.values=function(){var t=[];if(0!=this._length){for(var n in this.obj)t.push(this.obj[n]);return t}return t},n.numKeys=function(){var t=[];if(0!=this._length){for(var n in this.obj)t.push(Number(n));return t}return t},n.forEach=function(t,n){for(var i in this.obj)t.call(n,i,this.obj[i])},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/HeadBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts"],(function(t){var e,n,o,a,r,i,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,a=t.ProgressBar,r=t.Label,i=t.Component},function(t){p=t.default}],execute:function(){var s;n._RF.push({},"1d25e3coJ1HZKDDPRjZglvJ","HeadBar",void 0);var c=o.ccclass;o.property,t("HeadBar",c("HeadBar")(s=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).hpPro=void 0,e.mpPro=void 0,e.nameLabel=void 0,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this.hpPro=p.FindChildByName(this.node,"hp").getComponent(a),this.mpPro=p.FindChildByName(this.node,"mp").getComponent(a),this.nameLabel=p.FindChildByName(this.node,"name").getComponent(r)},o.start=function(){},o.setName=function(t){this.nameLabel.string=t},o.setData=function(t){this.updateHp(t.hp/t.maxHp),this.updateMp(t.mp/t.maxMp)},o.updateHp=function(t){this.hpPro.progress=t},o.updateMp=function(t){this.mpPro.progress=t},o.update=function(t){},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/HeroConfigVo.ts",["cc"],(function(i){var o;return{setters:[function(i){o=i.cclegacy}],execute:function(){o._RF.push({},"07a15b+27VNgIIpv+KDlv5t","HeroConfigVo",void 0);i("HeroConfigVo",(function(){this.spineId=void 0,this.maxHp=void 0,this.maxMp=void 0,this.comp=void 0,this.layer=void 0,this.site=void 0,this.speed=void 0,this.skillIds=void 0}));o._RF.pop()}}}));

System.register("chunks:///_virtual/IRoadSeeker.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"99f90Ka5M5NLpeUVKN1UMRB","IRoadSeeker",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,o,s,e,r,n,a,c,u,h,l,p,g,y,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,s=t.initializerDefineProperty,e=t.assertThisInitialized,r=t.createClass},function(t){n=t.cclegacy,a=t._decorator,c=t.Node,u=t.Vec2,h=t.Vec3,l=t.math,p=t.NodeEventType,g=t.Graphics,y=t.Color,f=t.Component}],execute:function(){var d,b,v,k,P,D,M,T,w;n._RF.push({},"6c02fb63zZKEI3rttdTkFsP","Joystick",void 0);var C=a.ccclass,R=a.property;t("Joystick",(d=C("Joystick"),b=R(c),v=R(c),k=R(c),d((M=i((D=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return i=t.call.apply(t,[this].concat(r))||this,s(i,"bg",M,e(i)),s(i,"bar",T,e(i)),s(i,"target",w,e(i)),i.isDragging=!1,i.dragOffset=new u,i.startTouchPos=new h,i.centerPosition=l.v3(0,0),i.joystickRadius=void 0,i.currentDirection=new h,i}o(i,t);var n=i.prototype;return n.start=function(){this.joystickRadius=100,this.drawBg(),this.drawBar(),this.bar.on(p.TOUCH_START,this.onMouseDown,this),this.bar.on(p.TOUCH_MOVE,this.onMouseMove,this),this.bar.on(p.TOUCH_END,this.onMouseUp,this),this.bar.on(p.TOUCH_CANCEL,this.onMouseUp,this)},n.drawBg=function(){var t=this.bg.getComponent(g);t.clear(),t.fillColor=y.WHITE,t.circle(0,0,this.joystickRadius),t.fill()},n.drawBar=function(){var t=this.bar.getComponent(g);t.clear(),t.fillColor=y.RED,t.circle(0,0,30),t.fill()},n.onMouseDown=function(t){this.isDragging=!0;var i=t.getLocation();this.startTouchPos.set(i.x,i.y,0),this.updateJoystickPosition(i)},n.onMouseMove=function(t){var i=t.getLocation();this.updateJoystickPosition(i)},n.updateJoystickPosition=function(t){var i=t.x-this.startTouchPos.x,o=t.y-this.startTouchPos.y;if(Math.sqrt(i*i+o*o)>this.joystickRadius){var s=Math.atan2(o,i),e=this.joystickRadius*Math.cos(s),r=this.joystickRadius*Math.sin(s);this.bar.setPosition(e,r,0)}else this.bar.setPosition(i,o,0);this.currentDirection.set(i/this.joystickRadius,o/this.joystickRadius,0)},n.onMouseUp=function(t){this.isDragging=!1,this.bar.setPosition(0,0,0),this.currentDirection.set(0,0,0)},n.update=function(t){0!=this.currentDirection.length()&&this.target&&this.target.setPosition(this.target.position.clone().add(this.currentDirection.clone().multiplyScalar(200*t)))},r(i,[{key:"direction",get:function(){var t=this.centerPosition.clone();return this.bar.position.clone().subtract(t)}}]),i}(f)).prototype,"bg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(D.prototype,"bar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(D.prototype,"target",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=D))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/LayerManager.ts",["cc"],(function(t){var e,n,i,o;return{setters:[function(t){e=t.cclegacy,n=t.UITransform,i=t.Node,o=t.Widget}],execute:function(){e._RF.push({},"769aa/Wn4ZEkZmhPzTBV/Nk","LayerManager",void 0);var r=t("LayerType",function(t){return t[t.none=0]="none",t[t.view=1]="view",t[t.window=2]="window",t[t.end=3]="end",t}({})),a=t("default",function(){function t(){}return t.init=function(t){if(!this.inited){this.layers={},this.inited=!0,this.root=t;var e=this.root.getComponent(n);e||(e=this.root.addComponent(n)),this.width=e.width||750,this.height=e.height||1334;for(var i=0;i<r.end;i++)i!=r.none&&this.createLayer(i)}},t.createLayer=function(t,e){var r=new i;r.name="layer_"+t,e||(e=this.root);var a=r.getComponent(n);a||(a=r.addComponent(n)),a.setContentSize(this.width,this.height);var h=r.addComponent(o);return h.left=h.right=h.top=h.bottom=0,h.target=e,r.parent=e,h.updateAlignment(),this.layers[t]=r,r},t.getLayer=function(t){return this.layers[t]},t}());a.inited=!1,a.layers=void 0,a.width=void 0,a.height=void 0,a.root=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AreaType.ts","./ArrayUtils.ts","./AssetMgr.ts","./DestroyUtils.ts","./Enum.ts","./Handler.ts","./Joystick.ts","./MathUtils.ts","./NodeFactory.ts","./Pool.ts","./QuadTree.ts","./SpineSkeleton.ts","./StringUtils.ts","./TimeUtils.ts","./Touch.ts","./Utils.ts","./HashMap.ts","./Game2048.ts","./Game2048Enum.ts","./Grid.ts","./Tile.ts","./Background.ts","./Block.ts","./Main.ts","./Render.ts","./config.ts","./enum2.ts","./AFKGame.ts","./Containers.ts","./GameConst.ts","./GameScene.ts","./Scene.ts","./Unit.ts","./DepthHelper.ts","./Entity.ts","./FightConfig.ts","./FightMgr.ts","./FightRoleEntity.ts","./FightUtil.ts","./GameEntity.ts","./RoleEntity2.ts","./ActionInfo.ts","./EntityInfo.ts","./FightHeroInfo.ts","./FightSkillGroupInfo.ts","./FightSkillInfo.ts","./FindTargetInfo.ts","./AFKResultPanel.ts","./HeadBar.ts","./AFKGameConfigVo.ts","./HeroConfigVo.ts","./SkillConfigVo.ts","./GameElement.ts","./QuadTreeTest.ts","./Behaviour.ts","./EditObjData.ts","./Enum3.ts","./GameCamera.ts","./GameManager.ts","./GameObject.ts","./IRoadSeeker.ts","./MainTest.ts","./RPGConfig.ts","./RPGLauncher.ts","./RPGPanel.ts","./RoleEntity.ts","./ScenceMap.ts","./SpineTest.ts","./Transform.ts","./Character.ts","./Monster.ts","./Npc.ts","./Player.ts","./MapParams.ts","./EntityLayer.ts","./MapLayer.ts","./AStarRoadSeeker.ts","./BinaryTreeNode.ts","./MapData.ts","./MapRoadUtils.ts","./PathFindingAgent.ts","./RoadNode.ts","./MapRoad45Angle.ts","./MapRoad90Angle.ts","./SpawnPoint.ts","./TransferDoor.ts","./SceneBase.ts","./AnimationPath.ts","./BezierPart.ts","./Boss.ts","./Bullet.ts","./BulletManager.ts","./EffectManager.ts","./Enemy.ts","./GameOverOrWin.ts","./RemoveOrUpLevel.ts","./SelectTowerBuild.ts","./Test.ts","./TouchMove.ts","./TowerCharacter.ts","./TowerConfig.ts","./TowerConst.ts","./TowerGameScene.ts","./TowerGameUIManager.ts","./TowerLauncher.ts","./TowerMapLayer.ts","./TowerSceneMap.ts","./EditPlot.ts","./TowerBuildInfo.ts","./TowerDataDTO.ts","./TowerMapDTO.ts","./FBMoveBg.ts","./FBird.ts","./FCoin.ts","./FairyBirdConst.ts","./FairyBirdGameManger.ts","./FairyBirdPipe.ts","./FairyBirdPipeManger.ts","./FairybirdMainPanel.ts","./MainPanel.ts","./BaseView.ts","./LayerManager.ts","./PanelEnum.ts","./UIExample.ts","./ViewConst.ts","./ViewManager.ts","./ViewRegisterMgr.ts","./ViewRegisterVo.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enum2.ts","./config.ts","./Render.ts"],(function(t){var e,n,r,a,i,s,h,c,o,u,p,l,f,d,S,C,v,y,x;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized,i=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){h=t.cclegacy,c=t._decorator,o=t.Node,u=t.math,p=t.Label,l=t.Button,f=t.input,d=t.Input,S=t.KeyCode,C=t.Component},function(t){v=t.ItemColor},function(t){y=t.config},function(t){x=t.Render}],execute:function(){var m,g,D,w,k,P,b;h._RF.push({},"da480qVdqFNTZhxH7gDX6/U","Main",void 0);var L=c.ccclass,A=c.property;t("Main",(m=L("Main"),g=A(o),D=A(o),m((P=e((k=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,r(e,"startPanel",P,a(e)),r(e,"endPanel",b,a(e)),e.dataArray=[],e.eliminateVec2s=[],e.currentShape={center:u.v2(0,0),index:0,color:v.NULL},e.time=0,e.isOpen=!1,e.score=0,e.scoreLabel=void 0,e.startBtn=void 0,e.pauseBtn=void 0,e.restartBtn=void 0,e._isPause=!1,e}n(e,t);var h=e.prototype;return h.findChild=function(t,e){for(var n=(e=e||this.node).children,r=0;r<n.length;r++){var a=n[r];if(a.name==t)return a;var i=this.findChild(t,a);if(null!=i)return i}return null},h.onLoad=function(){var t=Math.floor(y.sceneWidth/y.col),e=Math.floor(y.sceneHeight/y.row);y.blockWidth=y.blockHeight=Math.min(e,t),this.pauseBtn=this.findChild("pause"),this.restartBtn=this.findChild("restartBtn"),this.startBtn=this.findChild("startBtn");var n=this.findChild("score");n&&(this.scoreLabel=n.getComponent(p)),this.eliminateVec2s=[],this.showEndPanel(!1),this.updateScore(),this.pauseBtn.on(l.EventType.CLICK,this.onClickPause,this),this.restartBtn.on(l.EventType.CLICK,this.onClickRestart,this),f.on(d.EventType.KEY_DOWN,this.onKeyDown,this),this.startBtn.on(l.EventType.CLICK,this.gameStart,this)},h.showEndPanel=function(t,e){this.endPanel&&(this.endPanel.active=t),this._isPause=!!e},h.updateScore=function(){this.scoreLabel&&(this.scoreLabel.string=""+this.score)},h.onKeyDown=function(t){if(this.isOpen)switch(t.keyCode){case S.ARROW_LEFT:this.changeCurrentShapePos(u.v2(0,-1));break;case S.ARROW_RIGHT:this.changeCurrentShapePos(u.v2(0,1));break;case S.ARROW_DOWN:this.fastDown();break;case S.ARROW_UP:this.changeCurrentShapeIndex()}else console.warn("游戏未开始")},h.onClickPause=function(){this.isOpen=!1,this.showEndPanel(!0,!0)},h.onClickRestart=function(){this._isPause?(this.isOpen=!0,this.showEndPanel(!1,!1)):(this.gameStart(),this.showEndPanel(!1,!1))},h.start=function(){},h.gameStart=function(){this.isOpen?console.warn("游戏正在运行中！！！"):(this.startPanel&&(this.startPanel.active=!1),this.getComponent(x).init(),this.initData(),this.render(),this.randomOneShape(),this.isOpen=!0)},h.initData=function(){this.dataArray=[];for(var t=0;t<y.row;t++){this.dataArray[t]=[];for(var e=0;e<y.col;e++)this.dataArray[t][e]=v.NULL}},h.getRandom=function(t,e){return Math.floor(t+e*Math.random())},h.changeCurrentShapeIndex=function(){this.clearCurrentData(this.currentShape),this.currentShape.index+=3===this.currentShape.index?-3:1,this.checkCurrentShapeData(this.currentShape)?this.setCurrentData(this.currentShape):(console.warn("操作不合理"),this.currentShape.index+=0===this.currentShape.index?3:-1)},h.changeCurrentShapePos=function(t){this.clearCurrentData(this.currentShape),this.currentShape.center.x+=t.x,this.currentShape.center.y+=t.y,this.checkCurrentShapeData(this.currentShape)?this.setCurrentData(this.currentShape):(console.warn("操作不合理"),this.currentShape.center.x-=t.x,this.currentShape.center.y-=t.y)},h.fastDown=function(){var t=i(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.clearCurrentData(this.currentShape),e=this.currentShape.center.x;case 2:if(!(e<y.row)){t.next=17;break}if(this.currentShape.center.x=e,!this.checkCurrentShapeData(this.currentShape)){t.next=7;break}t.next=14;break;case 7:return console.warn("无法移动。下一个"),this.currentShape.center.x=e-1,this.setCurrentData(this.currentShape),t.next=12,this.checkLines();case 12:return this.randomOneShape(),t.abrupt("break",17);case 14:e++,t.next=2;break;case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),h.getCurrentShapeIndexData=function(t){var e=t.color,n=t.index,r=y["shape"+e];return r&&r[n]||[]},h.randomOneShape=function(){var t=this;this.currentShape.center.set(y.startPos),this.currentShape.color=this.getRandom(1,7),this.currentShape.index=Math.floor(4*Math.random()),this.checkCurrentShapeData(this.currentShape)?this.setCurrentData(this.currentShape):(this.isOpen=!1,this.setCurrentData(this.currentShape),this.scheduleOnce((function(){t.showEndPanel(!0,!1)}),2))},h.setCurrentData=function(t){for(var e=t.center,n=t.color,r=this.getCurrentShapeIndexData(t),a=0;a<r.length;a++){var i=r[a],s=e.x+i.x,h=e.y+i.y;this.dataArray[s][h]=n}this.render()},h.clearCurrentData=function(t){for(var e=t.center,n=t.color,r=t.index,a=y["shape"+n][r],i=0;i<a.length;i++){var s=a[i],h=e.x+s.x,c=e.y+s.y;this.dataArray[h][c]=v.NULL}},h.render=function(){var t=this.getComponent(x);t&&t.render(this.dataArray)},h.checkCurrentShapeData=function(t){for(var e=t.center,n=this.getCurrentShapeIndexData(t),r=0;r<n.length;r++){var a=n[r],i=e.x+a.x;if(i<0||i>=y.row)return!1;var s=e.y+a.y;if(s<0||s>=y.col)return!1;if(this.dataArray[i][s]!==v.NULL)return!1}return!0},h.autoDown=function(){var t=i(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.clearCurrentData(this.currentShape),this.currentShape.center.x+=1,!this.checkCurrentShapeData(this.currentShape)){t.next=6;break}this.setCurrentData(this.currentShape),t.next=12;break;case 6:return console.warn("无法移动。下一个"),this.currentShape.center.x-=1,this.setCurrentData(this.currentShape),t.next=11,this.checkLines();case 11:this.randomOneShape();case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),h.checkLines=function(){var t=i(s().mark((function t(){var e,n,r,a,i,h,c,o=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=y.row-1,this.eliminateVec2s=[];0!==e;){for(n=!0,r=0;r<y.col;r++)this.dataArray[e][r]===v.NULL&&(n=!1);if(n){for(a=0;a<y.col;a++)this.eliminateVec2s.push(u.v2(e,a));for(i=e;i>0;i--)for(h=0;h<y.col;h++)this.dataArray[i][h]=this.dataArray[i-1][h];this.score+=1}else e--}(c=this.getComponent(x))&&this.eliminateVec2s.length>0?c.playEliminateEff(this.eliminateVec2s).then((function(){o.updateScore()})):this.updateScore();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),h.update=function(t){this.isOpen&&(this.time+=t,this.time>1&&(this.time=0,this.autoDown()))},h.printDataArray=function(){for(var t="",e=0;e<this.dataArray.length;e++){t+=this.dataArray[e].join(",")+"\n"}console.log(t)},e}(C)).prototype,"startPanel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),b=e(k.prototype,"endPanel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=k))||w));h._RF.pop()}}}));

System.register("chunks:///_virtual/MainPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./ViewRegisterMgr.ts","./PanelEnum.ts","./LayerManager.ts","./ViewConst.ts","./ViewManager.ts","./TowerGameScene.ts","./FairybirdMainPanel.ts","./AFKGame.ts"],(function(e){var n,t,a,i,r,o,c,s,l,f,u,p,y;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,a=e._decorator,i=e.NodeEventType},function(e){r=e.default},function(e){o=e.registerView},function(e){c=e.PanelType},function(e){s=e.LayerType},function(e){l=e.default},function(e){f=e.viewManager},function(e){u=e.TowerGameScene},function(e){p=e.FairybirdMainPanel},function(e){y=e.AFKGame}],execute:function(){var d;t._RF.push({},"442abgev5ZGjKHGrEz1cBOH","MainPanel",void 0);var g=a.ccclass,h=(a.property,e("MainPanel",g("MainPanel")(d=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var a=t.prototype;return a.onOpen=function(n){for(var t,a=arguments.length,i=new Array(a>1?a-1:0),r=1;r<a;r++)i[r-1]=arguments[r];(t=e.prototype.onOpen).call.apply(t,[this,n].concat(i)),console.error(i)},a.init=function(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];(n=e.prototype.init).call.apply(n,[this].concat(a));for(var o=this.node.children,c=0;c<o.length;c++){var s=o[c];-1!=s.name.indexOf("btn_")&&s.on(i.TOUCH_START,this.onClickNode,this)}},a.onClickNode=function(e){var n=e.target;if(-1!=n.name.indexOf("btn_")){var t=n.name.split("_");if(t[1])switch(t[1]){case"tower":f.open(u);break;case"rpg":console.log("点击rpg");break;case"fb":f.open(p);break;case"afk":f.open(y)}}},a.start=function(){},a.update=function(e){},t}(r))||d));o({viewCls:h,id:c.MainPanel,layer:s.view,prefabPathPrefix:l.defaultPrefabPathPrefix+"main/"}),t._RF.pop()}}}));

System.register("chunks:///_virtual/MainTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScenceMap.ts"],(function(e){var o,t,i,s,n,r,l,h,a,c,d;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,l=e.Node,h=e.KeyCode,a=e.UITransform,c=e.Component},function(e){d=e.ScenceMap}],execute:function(){var p,u,N,y,f,g,C,m,v;n._RF.push({},"cd657OyPtVL8rVNBL7VI0TR","MainTest",void 0);var w=r.ccclass,P=r.property;e("MainTest",(p=w("MainTest"),u=P(l),N=P(l),y=P(l),p((C=o((g=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o=e.call.apply(e,[this].concat(n))||this,i(o,"viewPortNode",C,s(o)),i(o,"mapNode",m,s(o)),i(o,"roleNode",v,s(o)),o.gameCamera=void 0,o.roleSpeed=10,o.keyCache={},o.scenceMap=void 0,o}t(o,e);var n=o.prototype;return n.onLoad=function(){this.scenceMap=this.addComponent(d),this.scenceMap.mapId=1},n.start=function(){},n.onKeyDown=function(e){this.setKeyCodeCache(e.keyCode,!0)},n.onKeyUp=function(e){this.setKeyCodeCache(e.keyCode,!1)},n.setKeyCodeCache=function(e,o){void 0===o&&(o=!1),this.keyCache[e]=o},n.updateRoleMove=function(){var e=this.roleNode.position.x,o=this.roleNode.position.y;this.keyCache[h.ARROW_UP]&&this.roleNode.setPosition(e,o+=this.roleSpeed),this.keyCache[h.ARROW_DOWN]&&this.roleNode.setPosition(e,o-=this.roleSpeed),this.keyCache[h.ARROW_LEFT]&&this.roleNode.setPosition(e-=this.roleSpeed,o),this.keyCache[h.ARROW_RIGHT]&&this.roleNode.setPosition(e+=this.roleSpeed,o);var t=this.roleNode.getComponent(a),i=(this.roleNode.scale,this.mapNode.getComponent(a)),s=this.roleNode.position.x,n=this.roleNode.position.y;this.roleNode.position.x+t.width*this.roleNode.scale.x/2>i.width/2?(s=i.width/2-t.width*this.roleNode.scale.x/2,this.roleNode.setPosition(s,n),console.log("人物超过地图右边缘")):this.roleNode.position.x-t.width*this.roleNode.scale.x/2<-i.width/2&&(s=-i.width/2+t.width*this.roleNode.scale.x/2,this.roleNode.setPosition(s,n),console.log("人物超过地图左边缘")),this.roleNode.position.y+t.height*this.roleNode.scale.y/2>i.height/2?(n=i.height/2-t.height*this.roleNode.scale.y/2,this.roleNode.setPosition(s,n),console.log("人物超过地图上边缘")):this.roleNode.position.y-t.height*this.roleNode.scale.y/2<-i.height/2&&(n=-i.height/2+t.height*this.roleNode.scale.y/2,this.roleNode.setPosition(s,n),console.log("人物超过地图下边缘"))},n.update=function(e){},o}(c)).prototype,"viewPortNode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=o(g.prototype,"mapNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=o(g.prototype,"roleNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/MapData.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"85c90I1mbFJuKY26/Oh7Pp0","MapData",void 0);t("default",(function(){this.name=void 0,this.bgName=void 0,this.type=void 0,this.mapWidth=void 0,this.mapHeight=void 0,this.nodeWidth=void 0,this.nodeHeight=void 0,this.alignment=void 0,this.offsetX=void 0,this.offsetY=void 0,this.roadDataArr=void 0,this.mapItems=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/MapLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,a,o,s,g,h,p,m,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,s=t._decorator,g=t.Sprite,h=t.Node,p=t.UITransform,m=t.SpriteFrame,c=t.Component}],execute:function(){var u,l,d,b,f;o._RF.push({},"b68808DpwhOBpij/W+1VNnI","MapLayer",void 0);var y=s.ccclass,I=s.property;t("default",(u=y("MapLayer"),l=I(g),u((f=e((b=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"bgImg",f,r(e)),e._mapParams=null,e}i(e,t);var o=e.prototype;return o.update=function(t){},o.init=function(t){if(this._mapParams=t,!this.bgImg){var e=new h;this.node.addChild(e),e.layer=this.node.layer,this.bgImg=e.addComponent(g),this.bgImg.sizeMode=g.SizeMode.RAW,e.getComponent(p).anchorX=0,e.getComponent(p).anchorY=0}var i=new m;i.texture=t.bgTex,this.bgImg.spriteFrame=i,this.getComponent(p).width=this.width,this.getComponent(p).height=this.height},a(e,[{key:"bgImage",get:function(){return this.bgImg}},{key:"width",get:function(){return this.bgImg?this.bgImg.getComponent(p).width:this._mapParams.viewWidth}},{key:"height",get:function(){return this.bgImg?this.bgImg.getComponent(p).height:this._mapParams.viewHeight}}]),e}(c)).prototype,"bgImg",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/MapParams.ts",["cc","./Enum3.ts"],(function(t){var i,e,s;return{setters:[function(t){i=t.cclegacy},function(t){e=t.MapType,s=t.MapLoadModel}],execute:function(){i._RF.push({},"27244yA0LJIeoXhWxSb2Vt/","MapParams",void 0);t("default",(function(){this.name="",this.bgName="",this.mapType=e.Angle45,this.mapWidth=750,this.mapHeight=1600,this.ceilWidth=75,this.ceilHeight=75,this.viewWidth=750,this.viewHeight=1334,this.sliceWidth=256,this.sliceHeight=256,this.mapLoadModel=s.single,this.bgTex=null}));i._RF.pop()}}}));

System.register("chunks:///_virtual/MapRoad45Angle.ts",["cc","./RoadNode.ts"],(function(t){var i,e,o;return{setters:[function(t){i=t.cclegacy,e=t.math},function(t){o=t.default}],execute:function(){i._RF.push({},"8f288RAwupPzLSHB7dHkSgl","MapRoad45Angle",void 0);t("default",function(){function t(t,i,e,o,h,n){this._row=void 0,this._col=void 0,this._nodeWidth=void 0,this._nodeHeight=void 0,this._halfNodeWidth=void 0,this._halfNodeHeight=void 0,this._row=t,this._col=i,this._nodeWidth=e,this._nodeHeight=o,this._halfNodeWidth=h,this._halfNodeHeight=n}var i=t.prototype;return i.getNodeByPixel=function(t,i){var e=this.getWorldPointByPixel(t,i),h=this.getPixelByWorldPoint(e.x,e.y),n=this.getDerectByPixel(t,i),d=new o;return d.cx=e.x,d.cy=e.y,d.px=h.x,d.py=h.y,d.dx=n.x,d.dy=n.y,d},i.getNodeByDerect=function(t,i){var e=this.getPixelByDerect(t,i),h=this.getWorldPointByPixel(e.x,e.y),n=new o;return n.cx=h.x,n.cy=h.y,n.px=e.x,n.py=e.y,n.dx=t,n.dy=i,n},i.getNodeByWorldPoint=function(t,i){var e=this.getPixelByWorldPoint(t,i);return this.getNodeByPixel(e.x,e.y)},i.getWorldPointByPixel=function(t,i){var o=Math.ceil(t/this._nodeWidth-.5+i/this._nodeHeight)-1,h=this._col-1-Math.ceil(t/this._nodeWidth-.5-i/this._nodeHeight);return e.v2(o,h)},i.getPixelByWorldPoint=function(t,i){var o=Math.floor((t+1-(i-(this._col-1)))*this._halfNodeWidth),h=Math.floor((t+1+(i-(this._col-1)))*this._halfNodeHeight);return e.v2(o,h)},i.getDerectByPixel=function(t,i){var o=this.getWorldPointByPixel(t,i),h=this.getPixelByWorldPoint(o.x,o.y),n=Math.floor(h.x/this._nodeWidth)-(h.x%this._nodeWidth==0?1:0),d=Math.floor(h.y/this._halfNodeHeight)-1;return e.v2(n,d)},i.getDerectByWorldPoint=function(t,i){var o=Math.floor((t-(i-(this._col-1)))/2),h=t+(i-(this._col-1));return e.v2(o,h)},i.getPixelByDerect=function(t,i){var o=Math.floor((t+i%2)*this._nodeWidth+(1-i%2)*this._halfNodeWidth),h=Math.floor((i+1)*this._halfNodeHeight);return e.v2(o,h)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/MapRoad90Angle.ts",["cc","./RoadNode.ts"],(function(t){var e,i,o;return{setters:[function(t){e=t.cclegacy,i=t.math},function(t){o=t.default}],execute:function(){e._RF.push({},"28fe7OzQwFALqUkizw4ReO0","MapRoad90Angle",void 0);t("default",function(){function t(t,e,i,o,n,h){this._row=void 0,this._col=void 0,this._nodeWidth=void 0,this._nodeHeight=void 0,this._halfNodeWidth=void 0,this._halfNodeHeight=void 0,this._row=t,this._col=e,this._nodeWidth=i,this._nodeHeight=o,this._halfNodeHeight=h,this._halfNodeWidth=n}var e=t.prototype;return e.getDerectByPixel=function(t,e){var o=Math.floor(t/this._nodeWidth),n=Math.floor(e/this._nodeHeight);return i.v2(o,n)},e.getDerectByWorldPoint=function(t,e){return i.v2(t,e)},e.getNodeByDerect=function(t,e){var i=this.getPixelByDerect(t,e),n=this.getWorldPointByPixel(i.x,i.y),h=new o;return h.cx=n.x,h.cy=n.y,h.px=i.x,h.py=i.y,h.dx=t,h.dy=e,h},e.getNodeByPixel=function(t,e){var i=this.getWorldPointByPixel(t,e),n=this.getPixelByWorldPoint(i.x,i.y),h=this.getDerectByPixel(t,e),r=new o;return r.cx=i.x,r.cy=i.y,r.px=n.x,r.py=n.y,r.dx=h.x,r.dy=h.y,r},e.getNodeByWorldPoint=function(t,e){var i=this.getPixelByWorldPoint(t,e);return this.getNodeByPixel(i.x,i.y)},e.getPixelByDerect=function(t,e){var o=Math.floor((t+1)*this._nodeWidth-this._halfNodeWidth),n=Math.floor((e+1)*this._nodeHeight-this._halfNodeHeight);return i.v2(o,n)},e.getPixelByWorldPoint=function(t,e){return this.getPixelByDerect(t,e)},e.getWorldPointByPixel=function(t,e){return this.getDerectByPixel(t,e)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/MapRoadUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum3.ts","./RoadNode.ts","./MapRoad45Angle.ts","./MapRoad90Angle.ts"],(function(t){var e,i,o,n,h,a,d;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,o=t.math},function(t){n=t.MapType},function(t){h=t.default},function(t){a=t.default},function(t){d=t.default}],execute:function(){i._RF.push({},"fcf41L6Y0lEOKkZoBNNPomb","MapRoadUtils",void 0);var s=t("default",function(){function t(){this._mapWidth=void 0,this._mapHeight=void 0,this._nodeWidth=void 0,this._nodeHeight=void 0,this._halfNodeWidth=void 0,this._halfNodeHeight=void 0,this._col=void 0,this._row=void 0,this._mapType=void 0,this._mapRoad=void 0}var i=t.prototype;return i.updateMapInfo=function(t,e,i,o,h){switch(this._mapWidth=t,this._mapHeight=e,this._nodeWidth=i,this._nodeHeight=o,this._halfNodeWidth=Math.floor(i/2),this._halfNodeHeight=Math.floor(o/2),this._mapType=h,this._mapType){case n.Angle45:this._col=Math.ceil(t/i),this._row=2*Math.ceil(e/o),this._mapRoad=new a(this._row,this._col,this._nodeWidth,this._nodeHeight,this._halfNodeWidth,this._halfNodeHeight);break;case n.Angle90:this._col=Math.ceil(t/i),this._row=Math.ceil(e/o),this._mapRoad=new d(this._row,this._col,this._nodeWidth,this._nodeHeight,this._halfNodeWidth,this._halfNodeHeight)}},i.getNodeByPixel=function(t,e){return this._mapRoad?this._mapRoad.getNodeByPixel(t,e):new h},i.getNodeByDerect=function(t,e){return this._mapRoad?this._mapRoad.getNodeByDerect(t,e):new h},i.getNodeByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getNodeByWorldPoint(t,e):new h},i.getWorldPointByPixel=function(t,e){return this._mapRoad?this._mapRoad.getWorldPointByPixel(t,e):o.v2(0,0)},i.getPixelByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getPixelByWorldPoint(t,e):o.v2(0,0)},i.getDerectByPixel=function(t,e){return this._mapRoad?this._mapRoad.getDerectByPixel(t,e):o.v2(0,0)},i.getDerectByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getDerectByWorldPoint(t,e):o.v2(0,0)},i.getPixelByDerect=function(t,e){return this._mapRoad?this._mapRoad.getPixelByDerect(t,e):o.v2(0,0)},e(t,[{key:"mapWidth",get:function(){return this._mapWidth}},{key:"mapHeight",get:function(){return this._mapHeight}},{key:"nodeWidth",get:function(){return this._nodeWidth}},{key:"nodeHeight",get:function(){return this._nodeHeight}},{key:"halfNodeWidth",get:function(){return this._halfNodeWidth}},{key:"halfNodeHeight",get:function(){return this._halfNodeHeight}},{key:"col",get:function(){return this._col}},{key:"row",get:function(){return this._row}},{key:"mapType",get:function(){return this._mapType}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}());s._instance=void 0,window.mapRoadUtils=s.instance,i._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtils.ts",["cc"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy,e=t.Vec2}],execute:function(){n._RF.push({},"133a8p0X35GQKLoVrhmY7Dm","MathUtils",void 0);t("default",function(){function t(){}return t.createBezierPoints=function(t,n){for(var e=[],r=0;r<=n;r++){var a=this.caculateBezierPoint(t,r/n);e.push(a)}return e},t.caculateBezierPoint=function(t,n){for(var r=t.length,a=new e(0,0),o=function(t,n){for(var e=1,r=1;n>0;)e*=t,r*=n,t--,n--;return e/r},u=0;u<r;u++){var i=t[u];a.x+=i.x*o(r-1,u)*Math.pow(n,u)*Math.pow(1-n,r-1-u),a.y+=i.y*o(r-1,u)*Math.pow(n,u)*Math.pow(1-n,r-1-u)}return a},t.RadianToAngle=function(t){return 180*t/Math.PI},t.AngleToRadian=function(t){return t*Math.PI/180},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Monster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Character.ts"],(function(t){var n,e,i,r,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,r=t.Vec3},function(t){o=t.default}],execute:function(){var a;e._RF.push({},"bda92rL8kZC2Lqf5El7yZIo","Monster",void 0);var s=i.ccclass;i.property,t("Monster",s("Monster")(a=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))||this).monsterId=0,n.defaultDir=0,n.editData=null,n}n(e,t);var i=e.prototype;return i.start=function(){},i.init=function(){this.direction=this.defaultDir},i.update=function(t){},i.initEditData=function(t){this.editData=t,this.objName=t.objName,this.monsterId=Number(t.objId),this.node.position=new r(t.x,t.y),this.defaultDir=t.direction},e}(o))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/NodeFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var o,n,t,i;return{setters:[function(e){o=e.createClass},function(e){n=e.cclegacy,t=e.Node,i=e.NodePool}],execute:function(){n._RF.push({},"a09b6yVv6FPHrG4tGTpPz9D","NodeFactory",void 0),e("NodeFactory",function(){function e(){this._nodePool=void 0,this._nodePool=new i}var n=e.prototype;return n.createNode=function(){return this._nodePool.size()>0?this._nodePool.get():new t},n.release=function(e){this._nodePool&&this._nodePool.put(e)},o(e,null,[{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}}]),e}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/Npc.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Character.ts"],(function(t){var i,n,e,c,r;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,c=t.Vec3},function(t){r=t.default}],execute:function(){var o;n._RF.push({},"3e83e/tUzBGo59E2vutxtBx","Npc",void 0);var a=e.ccclass;e.property,t("Npc",a("Npc")(o=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(i=t.call.apply(t,[this].concat(e))||this).npcId=0,i.defaultDir=0,i.editData=null,i}i(n,t);var e=n.prototype;return e.start=function(){},e.update=function(t){},e.init=function(){this.direction=this.defaultDir},e.initEditData=function(t){this.editData=t,this.objName=t.objName,this.npcId=Number(t.objId),this.node.position=new c(t.x,t.y),this.defaultDir=t.direction},n}(r))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/PanelEnum.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"b7001BgKqtH3K1UCJSzUD69","PanelEnum",void 0);e("PanelType",function(e){return e[e.none=0]="none",e[e.FairybirdMainPanel=1]="FairybirdMainPanel",e[e.RPGPanel=2]="RPGPanel",e[e.MainPanel=3]="MainPanel",e[e.TowerGameScene=4]="TowerGameScene",e[e.GameOverOrWin=5]="GameOverOrWin",e[e.AFKGame=6]="AFKGame",e[e.AFKResultPanel=7]="AFKResultPanel",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/PathFindingAgent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AStarRoadSeeker.ts","./MapRoadUtils.ts"],(function(t){var e,a,i,n;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy},function(t){i=t.default},function(t){n=t.default}],execute:function(){a._RF.push({},"9f52a21pHhE7adxRmXzB/uE","PathFindingAgent",void 0);var o=t("default",function(){function t(){this._mapData=void 0,this._mapType=void 0,this._roadDic={},this._roadSeeker=void 0}var a=t.prototype;return a.init=function(t){this._mapData=t,this._mapType=t.type,n.instance.updateMapInfo(t.mapWidth,t.mapHeight,t.nodeWidth,t.nodeHeight,t.type),this._roadDic={};for(var e=this._mapData.roadDataArr,a=this._mapData.roadDataArr.length,o=this._mapData.roadDataArr[0].length,r=0,d=0,s=0,h=0;h<a;h++)for(var c=0;c<o;c++){r=e[h][c],d=c,s=h;var u=n.instance.getNodeByDerect(d,s);u.value=r,this._roadDic[u.cx+"_"+u.cy]=u}this._roadSeeker=new i(this._roadDic)},a.updateRoadSeekerInfo=function(t,e){this._roadSeeker.setPathOptimize(t),this._roadSeeker.setPathQuadSeek(e)},a.setRoadSeekerPassCondition=function(t){this._roadSeeker.setRoadNodePassCondition(t)},a.seekPath=function(t,e){var a=this.getRoadNodeByPixel(t.x,t.y),i=this.getRoadNodeByPixel(e.x,e.y);return this._roadSeeker.seekPath(a,i)},a.getRoadNodeByPixel=function(t,e){var a=n.instance.getWorldPointByPixel(t,e);return this.getRoadNode(a.x,a.y)},a.getRoadNode=function(t,e){return this._roadSeeker.getRoadNode(t,e)},e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}());o._instance=void 0,window.PathFindingAgent=o.instance,a._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Character.ts"],(function(t){var e,s,a,n,r,i;return{setters:[function(t){e=t.inheritsLoose,s=t.createClass},function(t){a=t.cclegacy,n=t._decorator},function(t){r=t.default,i=t.CharacterState}],execute:function(){var o;a._RF.push({},"c3d2cRxQ5ZKgoDAmYovesUc","Player",void 0);var c=n.ccclass;n.property,t("default",c("Player")(o=function(t){function a(){return t.apply(this,arguments)||this}return e(a,t),a.prototype.start=function(){t.prototype.start.call(this)},s(a,[{key:"state",get:function(){return this._state},set:function(t){switch(this._state=t,this._state){case i.idle:this.skeleton&&this.skeleton.setAnimation(0,"stand2",!0);break;case i.walk:this.skeleton&&this.skeleton.setAnimation(0,"run",!0);break;case i.sitdown:case i.sitdown_walk:}}}]),a}(r))||o);a._RF.pop()}}}));

System.register("chunks:///_virtual/Pool.ts",["cc","./DestroyUtils.ts"],(function(t){var s,i;return{setters:[function(t){s=t.cclegacy},function(t){i=t.DestroyUtils}],execute:function(){s._RF.push({},"ed13cb+DsJKEYSIjEHK1Gsw","Pool",void 0);t("Pool",function(){function t(t,s,i){void 0===s&&(s=100),void 0===i&&(i=!1),this.$clazz=void 0,this.$idles=void 0,this.$maxIdle=void 0,this.$hasStatus=void 0,this.isDestroy=!1,this.$idles=[],this.$clazz=t,this.$maxIdle=s,this.$hasStatus=i}var s=t.prototype;return s.create=function(){var t;return t=0==this.$idles.length?new this.$clazz:this.$idles.pop(),this.$hasStatus&&t.hasOwnProperty("activate")&&t.activate(),t},s.destroy=function(t){this.isDestroy=!0;for(var s=0;s<this.$idles.length;s++)i.destroy(this.$idles[s]);this.$idles=null},s.release=function(t){this.$idles.length>this.$maxIdle?i.destroy(t):(this.$hasStatus&&t.hasOwnProperty("passivate")&&t.passivate(),this.$idles.push(t))},s.clear=function(){this.$idles=[]},s.isFull=function(){return this.$idles.length>this.$maxIdle},s.getNumIdle=function(){return this.$idles.length},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/QuadTree.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AreaType.ts"],(function(t){var i,e,h,n,r;return{setters:[function(t){i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,h=t.math,n=t.Vec3},function(t){r=t.AreaType}],execute:function(){e._RF.push({},"1a75eI3kcNDoZkJPVAa2DrA","QuadTree",void 0);var s=t("AnchorPointType",function(t){return t[t.Center=0]="Center",t[t.LeftDown=1]="LeftDown",t}({})),c=t("QuadTreeRect",function(){function t(t,i,e,h){this.x=t,this.y=i,this.width=e,this.height=h}var i=t.prototype;return i.contains=function(t,i){void 0===i&&(i=s.Center);var e=!1;if(i==s.LeftDown){var h=this.x,n=this.x+this.width,r=this.y,c=this.y+this.height,o=t.x,d=t.x+t.width,a=t.y,u=t.y+t.height;return h<=o&&n>=d&&r<=a&&c>=u}return i==s.Center&&(e=Math.abs(t.x-this.x)+t.width/2<=this.width/2&&Math.abs(t.y-this.y)+t.height/2<=this.height/2),e},i.intersects=function(t,i){void 0===i&&(i=s.Center);var e=!1;if(i==s.Center)e=Math.abs(t.x-this.x)<=(this.width+t.width)/2&&Math.abs(t.y-this.y)<=(this.height+t.height)/2;else if(i==s.LeftDown){var h=t.x,n=t.x+t.width,r=t.y,c=t.y+t.height,o=this.x,d=this.x+this.width,a=this.y,u=this.y+this.height;e=n>o&&h<d&&(c>a&&r<u)}return e},i.getIsInRange=function(t,i,e){void 0===e&&(e=s.Center);var r=h.v3(t.x,t.y,0),c=h.v3(this.x,this.y);return n.distance(c,r)<i},t}());t("QuadTree",function(){function t(t,i,e,h){void 0===i&&(i=10),void 0===e&&(e=5),void 0===h&&(h=s.Center),this.children=[null,null,null,null],this.objects=[],this.divided=!1,this.depth=0,this.rect=void 0,this.MAX_COUNT=10,this.MAX_DEPTH=5,this.anchorPointType=void 0,this.rect=t,this.MAX_COUNT=i,this.MAX_DEPTH=e,this.anchorPointType=h}var e=t.prototype;return e.insert=function(t){if(!this.rect.contains(t.rect,this.anchorPointType)&&!this.rect.intersects(t.rect,this.anchorPointType))return!1;if(this.objects.length<this.MAX_COUNT)return this.objects.push(t),!0;if(this.depth>=this.MAX_DEPTH)return!1;this.divided||this.divide();for(var e,h=i(this.children);!(e=h()).done;){var n=e.value;if(null!=n&&n.insert(t))return!0}return!1},e.getTargetIndex=function(t){var i=this.rect.x,e=this.rect.y,h=this.rect.width/2,n=this.rect.height/2,s=t.rect.x-t.rect.width/2,c=t.rect.y-t.rect.height/2,o=t.rect.x+t.rect.width/2,d=t.rect.y+t.rect.height/2;if(s>i+h||o<i-h||c>e+n||d<e-n)return 0;var a=0,u=o>=i,l=c<=e,v=d>=e;return s<=i&&(v&&(a|=r.LT),l&&(a|=r.LB)),u&&(v&&(a|=r.RT),l&&(a|=r.RB)),a},e.divide=function(){var i=this.rect,e=i.x,h=i.y,n=i.width/2,r=i.height/2,o=n/2,d=r/2;this.anchorPointType==s.Center?(this.children[0]=new t(new c(e-o,h+d,n,r),this.MAX_COUNT,this.MAX_DEPTH),this.children[1]=new t(new c(e+o,h+d,n,r),this.MAX_COUNT,this.MAX_DEPTH),this.children[2]=new t(new c(e-o,h-d,n,r),this.MAX_COUNT,this.MAX_DEPTH),this.children[3]=new t(new c(e+o,h-d,n,r),this.MAX_COUNT,this.MAX_DEPTH)):this.anchorPointType==s.LeftDown&&(this.children[0]=new t(new c(e,h+r,n,r),this.MAX_COUNT,this.MAX_DEPTH,this.anchorPointType),this.children[1]=new t(new c(e+n,h+r,n,r),this.MAX_COUNT,this.MAX_DEPTH,this.anchorPointType),this.children[2]=new t(new c(e,h,n,r),this.MAX_COUNT,this.MAX_DEPTH,this.anchorPointType),this.children[3]=new t(new c(e+n,h,n,r),this.MAX_COUNT,this.MAX_DEPTH,this.anchorPointType)),this.divided=!0,this.depth++},e.query=function(t,e){if(void 0===e&&(e=[]),!this.rect.contains(t,this.anchorPointType)&&!this.rect.intersects(t,this.anchorPointType))return e;for(var h,n=i(this.objects);!(h=n()).done;){var r=h.value;t.intersects(r.rect,this.anchorPointType)&&e.push(r)}if(this.divided)for(var s,c=i(this.children);!(s=c()).done;){var o=s.value;o&&o.query(t,e)}return e},e.queryInRange=function(t,e,h){if(void 0===h&&(h=[]),!this.rect.contains(t,this.anchorPointType))return h;for(var n,r=i(this.objects);!(n=r()).done;){var s=n.value;t.getIsInRange(s.rect,e,this.anchorPointType)&&h.push(s)}if(this.divided)for(var c,o=i(this.children);!(c=o()).done;){var d=c.value;d&&d.queryInRange(t,e,h)}return h},e.getAllChildNodes=function(t){t.push(this);for(var i=0;i<this.children.length;++i){var e=this.children[i];e&&e.getAllChildNodes(t)}},e.clear=function(){this.objects.length=0;for(var t=0;t<this.children.length;t++)this.children[t]&&(this.children[t].clear(),this.children[t]=null);this.divided=!1,this.depth=0},e.remove=function(t){var i=!1;if(!this.rect.contains(t.rect,this.anchorPointType)&&!this.rect.intersects(t.rect,this.anchorPointType))return i;var e=this.objects.indexOf(t);e>-1&&(this.objects.splice(e,1),i=!0);for(var h=0;h<this.children.length;h++)this.children[h]&&this.children[h].remove(t);return i},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/QuadTreeTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuadTree.ts","./GameElement.ts"],(function(e){var t,i,s,r,n,h,a,o,l,c,u,p,d,g,f,m,v,y,w,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,h=e._decorator,a=e.Prefab,o=e.Graphics,l=e.view,c=e.input,u=e.Input,p=e.NodeEventType,d=e.Color,g=e.KeyCode,f=e.instantiate,m=e.math,v=e.Component},function(e){y=e.QuadTreeRect,w=e.QuadTree},function(e){L=e.GameElement}],execute:function(){var T,E,k,b,C,z,R,D,q;n._RF.push({},"8c2a26ybO9FPokS9uAmh6yv","QuadTreeTest",void 0);var P=h.ccclass,_=h.property;e("QuadTreeTest",(T=P("QuadTreeTest"),E=_(a),k=_(L),b=_(o),T((R=t((z=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),h=0;h<i;h++)n[h]=arguments[h];return t=e.call.apply(e,[this].concat(n))||this,s(t,"elementPrefab",R,r(t)),t.quadTree=null,t.size=void 0,t.eleList=new Array,t.IsShow=!0,t.qtList=void 0,t.clickList=void 0,t.idIndex=0,s(t,"myElement",D,r(t)),s(t,"graphics",q,r(t)),t.radius=200,t.count=20,t}i(t,e);var n=t.prototype;return n.onLoad=function(){this.size=l.getViewportRect();var e=new y(0,0,this.size.width,this.size.height);this.quadTree=new w(e),this.eleList=[],this.qtList=[],this.clickList=[],c.on(u.EventType.KEY_DOWN,this.onKeyDown,this),this.myElement=this.CreateElemnt(null,!0),this.node.on(p.MOUSE_DOWN,this.onMouseDown,this)},n.drawSize=function(){this.graphics.clear(),this.graphics.fillColor=d.RED,this.graphics.strokeColor=d.RED,this.graphics.lineWidth=10,this.graphics.rect(-this.size.width/2,-this.size.height/2,this.size.width,this.size.height),this.graphics.stroke()},n.onMouseDown=function(e){console.log("输出点击事件坐标",e.getLocationX(),e.getLocationY())},n.onKeyDown=function(e){switch(e.keyCode){case g.ARROW_LEFT:for(var t=0;t<5e3;t++)this.CreateElemnt();break;case g.ARROW_RIGHT:for(var i=0;i<50;i++)this.CreateElemnt();break;case g.ARROW_UP:this.myElement=this.CreateElemnt()}},n.start=function(){this.drawSize()},n.update=function(e){this.TreeUpdate()},n.TreeUpdate=function(){this.quadTree.clear(),this.qtList.length=0;for(var e=0;e<this.clickList.length;e++)this.clickList[e].Click(!1);this.clickList.length=0;for(var t=0;t<this.eleList.length;t++){var i=this.eleList[t];this.quadTree.insert(i)}if(this.myElement){this.clickList=this.quadTree.query(this.myElement.rect);for(var s=0;s<this.clickList.length;s++)this.clickList[s].Click(!0)}if(this.IsShow){var r=[];this.quadTree.getAllChildNodes(r);var n=r.map((function(e){return e.rect}),this);this.drawRect(n)}},n.drawRect=function(e){this.graphics.clear();for(var t=0;t<e.length;t++){var i=e[t];this.graphics.fillColor=d.RED,this.graphics.strokeColor=d.YELLOW,this.graphics.lineWidth=5;var s=i.x-i.width/2,r=i.y-i.height/2;this.graphics.circle(i.x,i.y,10),this.graphics.fill(),this.graphics.rect(s,r,i.width,i.height),this.graphics.stroke()}},n.CreateElemnt=function(e,t){void 0===t&&(t=!1);var i=f(this.elementPrefab),s=i.getComponent(L);return i.name="Ele "+this.idIndex++,s.Init(this.size,t),e||(e=m.v3(0,0,0)),i.setPosition(e),i.parent=this.node,t||this.eleList.push(s),s},t}(v)).prototype,"elementPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(z.prototype,"myElement",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(z.prototype,"graphics",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=z))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/RemoveOrUpLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./TowerConfig.ts","./TowerLauncher.ts"],(function(e){var t,i,o,n,l,r,a,s,u,h,d,p,c,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,a=e.SpriteFrame,s=e.NodeEventType,u=e.Sprite,h=e.Label,d=e.Component},function(e){p=e.default},function(e){c=e.TowerConfig},function(e){v=e.TowerLauncher}],execute:function(){var C,f,b,m,L;l._RF.push({},"6e98e6rQmFOiIasiiJtk+VC","RemoveOrUpLevel",void 0);var g=r.ccclass,I=r.property;e("RemoveOrUpLevel",(C=g("RemoveOrUpLevel"),f=I([a]),C((L=t((m=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return(t=e.call.apply(e,[this].concat(l))||this).upCostLabel=null,t.upCostSprite=null,t.removeBackLabel=null,o(t,"upStateSpriteFrames",L,n(t)),t.buildInfo=null,t.isMaxLevel=!1,t.handlerCall=void 0,t.handlerObj=void 0,t}i(t,e);var l=t.prototype;return l.onLoad=function(){var e=p.FindChildByName(this.node,"upCostLevel"),t=p.FindChildByName(this.node,"removeBackLabel"),i=p.FindChildByName(this.node,"up"),o=p.FindChildByName(this.node,"remove");i&&(i.on(s.TOUCH_START,this.onClickUpLevel,this),this.upCostSprite=i.getComponent(u)),o&&o.on(s.TOUCH_START,this.onClickRemoveTower,this),e&&(this.upCostLabel=e.getComponent(h)),t&&(this.removeBackLabel=t.getComponent(h))},l.start=function(){},l.onClickUpLevel=function(e){this.buildInfo&&this.buildInfo.tower&&(this.isMaxLevel||this.handlerCall&&this.handlerObj&&this.handlerCall.call(this.handlerObj,1,this.buildInfo))},l.onClickRemoveTower=function(e){this.buildInfo&&this.buildInfo.tower&&this.handlerCall&&this.handlerObj&&this.handlerCall.call(this.handlerObj,2,this.buildInfo)},l.updateInfo=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.buildInfo=e,this.handlerCall=t,this.handlerObj=i;var o=this.buildInfo.tower,n=0;if(this.buildInfo&&o){var l=o.level,r=c.instance.getTowerConfig(o.towerId,l+1);n=r?v.instance.value>=r.buildCost?0:1:2,this.upCostLabel.node.active=2!=n,this.isMaxLevel=2==n,this.upCostSprite&&(this.upCostSprite.spriteFrame=this.upStateSpriteFrames[n]),this.upCostLabel&&(this.upCostLabel.string=r?r.buildCost.toString():"0");var a=c.instance.getTowerConfig(o.towerId,l);this.removeBackLabel&&(this.removeBackLabel.string=a?a.removeBack.toString():"0"),this.buildInfo.removeBackCost=a?a.removeBack:0,this.buildInfo.upLevelCost=r?r.buildCost:0}},l.update=function(e){},t}(d)).prototype,"upStateSpriteFrames",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=m))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/Render.ts",["./rollupPluginModLoBabelHelpers.js","cc","./config.ts","./Block.ts"],(function(e){var t,r,i,n,o,a,c,l,s,u,m,h,p,d,f,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Prefab,l=e.SpriteFrame,s=e.Node,u=e.Sprite,m=e.UITransform,h=e.math,p=e.instantiate,d=e.Component},function(e){f=e.config},function(e){b=e.Block}],execute:function(){var y,g,k,v,S,A,z,F,C,I,w,G,P;o._RF.push({},"7f7ebjS2VtINIkslZ9v65Le","Render",void 0);var M=a.ccclass,H=a.property;e("Render",(y=M("Render"),g=H(c),k=H([l]),v=H(l),S=H(s),A=H(s),y((C=t((F=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"item",C,n(t)),i(t,"itemSpriteFrame",I,n(t)),i(t,"backGroundItemSpriteFrame",w,n(t)),i(t,"gamePanel",G,n(t)),i(t,"backgroundPanel",P,n(t)),t.itemArray=[],t.backGroundArray=[],t}r(t,e);var o=t.prototype;return o.onLoad=function(){},o.init=function(){this.itemArray=[],this.backGroundArray=[];for(var e=f.row*f.blockHeight,t=f.col*f.blockWidth,r=Math.max(1334-e,0),i=0;i<f.row;i++){this.itemArray[i]=[],this.backGroundArray[i]=[];for(var n=0;n<f.col;n++){var o=-t/2+f.blockWidth/2+n*f.blockWidth,a=e/2-f.blockHeight/2-i*f.blockHeight-r/2,c=this.backGroundArray[i][n];c||(c=this.createBackGroundItem(o,a)),c.getComponent(u).spriteFrame=this.backGroundItemSpriteFrame,this.backGroundArray[i][n]=c;var l=this.itemArray[i][n];l||(l=this.createItem(o,a)),this.itemArray[i][n]=l}}},o.createBackGroundItem=function(e,t){var r=new s,i=r.addComponent(u);return i.spriteFrame=this.backGroundItemSpriteFrame,i.sizeMode=u.SizeMode.CUSTOM,this.node.addChild(r),r.setPosition(e,t),r.addComponent(m).contentSize=h.size(f.blockWidth,f.blockHeight),r},o.createItem=function(e,t){var r=p(this.item);return this.gamePanel.addChild(r),r.getComponent(u).sizeMode=u.SizeMode.CUSTOM,r.getComponent(m).contentSize=h.size(f.blockWidth,f.blockHeight),r.setPosition(e,t),r},o.render=function(e){for(var t=0;t<f.row;t++)for(var r=0;r<f.col;r++){var i=e[t][r];this.itemArray[t][r].getComponent(u).spriteFrame=this.itemSpriteFrame[i-1]}},o.onDestroy=function(){for(var e=0;e<this.itemArray.length;e++)for(var t=this.itemArray[e],r=0;r<t.length;r++){var i=t[r];i&&i.destroy()}this.itemArray=[]},o.playEliminateEff=function(e){var t=this;return new Promise((function(r,i){for(var n=0,o=0;o<e.length;o++){var a=e[o],c=t.itemArray[a.x][a.y].getComponent(b);c&&c.playEff().then((function(t){t&&(n+=1)==e.length&&r(!0)}))}}))},t}(d)).prototype,"item",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),I=t(F.prototype,"itemSpriteFrame",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(F.prototype,"backGroundItemSpriteFrame",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),G=t(F.prototype,"gamePanel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),P=t(F.prototype,"backgroundPanel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),z=F))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/RoadNode.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"a55e93n9ZJI4pyKrRPBGwfB","RoadNode",void 0);t("default",function(){function t(){this._px=void 0,this._py=void 0,this._cx=void 0,this._cy=void 0,this._dx=void 0,this._dy=void 0,this._value=void 0,this._f=void 0,this._g=void 0,this._h=void 0,this._parent=void 0,this._treeParent=null,this._left=null,this._right=null,this._openTag=0,this._closeTag=0}return t.prototype.resetTree=function(){this._treeParent=null,this._left=null,this._right=null},e(t,[{key:"px",get:function(){return this._px},set:function(t){this._px=t}},{key:"py",get:function(){return this._py},set:function(t){this._py=t}},{key:"cx",get:function(){return this._cx},set:function(t){this._cx=t}},{key:"cy",get:function(){return this._cy},set:function(t){this._cy=t}},{key:"dx",get:function(){return this._dx},set:function(t){this._dx=t}},{key:"dy",get:function(){return this._dy},set:function(t){this._dy=t}},{key:"value",get:function(){return this._value},set:function(t){this._value=t}},{key:"f",get:function(){return this._f},set:function(t){this._f=t}},{key:"g",get:function(){return this._g},set:function(t){this._g=t}},{key:"h",get:function(){return this._h},set:function(t){this._h=t}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t}},{key:"treeParent",get:function(){return this._treeParent},set:function(t){this._treeParent=t}},{key:"left",get:function(){return this._left},set:function(t){this._left=t}},{key:"right",get:function(){return this._right},set:function(t){this._right=t}},{key:"openTag",get:function(){return this._openTag},set:function(t){this._openTag=t}},{key:"closeTag",get:function(){return this._closeTag},set:function(t){this._closeTag=t}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RoleEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./RPGConfig.ts","./Enum3.ts"],(function(t){var o,e,i,n,r,s,a,c,d,u,p;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,n=t.dragonBones,r=t.Sprite,s=t.math,a=t.ProgressBar,c=t.Component},function(t){d=t.default},function(t){u=t.RPGConfig},function(t){p=t.RPGModelDirection}],execute:function(){var l;e._RF.push({},"9dd40M7uuZB+r5LdWJ10Id2","RoleEntity",void 0);var h=i.ccclass;i.property,t("RoleEntity",h("RoleEntity")(l=function(t){function e(){for(var o,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(o=t.call.apply(t,[this].concat(i))||this).spNode=void 0,o.progressNode=void 0,o.modelData=void 0,o.diretion=void 0,o.currentDiretion=void 0,o}o(e,t);var i=e.prototype;return i.onLoad=function(){this.spNode=d.FindChildByName(this.node,"player"),this.progressNode=d.FindChildByName(this.node,"ProgressBar")},i.start=function(){},i.update=function(t){},i.playAnimation=function(t,o){var e=this;return void 0===o&&(o=1),new Promise((function(i,r){if(e.spNode){var s=e.spNode.getComponent(n.ArmatureDisplay);s?0!=o?(s.addEventListener(n.EventObject.COMPLETE,(function(){i(!0)}),e),s.playAnimation(t,o)):(s.playAnimation(t,o),i(!0)):r(!1)}else r(!1)}))},i.setModeData=function(t){this.modelData=t,this.diretion=0==t.camp?p.Left:p.Right,this.currentDiretion=this.diretion,1==t.camp&&this.node.setScale(-1,1),this.setHp(t.hp/100)},i.rotationDiretion=function(){var t=null;this.currentDiretion==p.Left?t=p.Right:this.currentDiretion==p.Right&&(t=p.Left);var o=1;return t===p.Right&&(o=-1),this.node.setScale(o,1),this.currentDiretion=t,!0},i.setColor=function(t){if(this.spNode){var o=u.ins.colors[t];this.spNode.getComponent(r).color=s.color(o)}},i.setHp=function(t){if(this.progressNode){var o=this.progressNode.getComponent(a);o&&(o.progress=t)}},e}(c))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/RoleEntity2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConst.ts","./GameEntity.ts"],(function(t){var e,n,i,s,r,o;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){s=t.cclegacy},function(t){r=t.GameConst},function(t){o=t.GameEntity}],execute:function(){s._RF.push({},"ba1ccbSf4NP4K6oGNzcY9AN","RoleEntity",void 0);t("RoleEntity",function(t){function s(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).data=void 0,e.scaleSize=.4,e.status=0,e}e(s,t);var o=s.prototype;return o.init=function(){t.prototype.init.call(this)},o.setData=function(){var t=n(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.data=e,this.setId(e.getEntityId()),this.setLayer(r.ROLE_LAYER),this.setScale(this.scaleSize,this.scaleSize),this.setSpeed(e.heroConfig.speed);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s}(o));s._RF.pop()}}}));

System.register("chunks:///_virtual/RPGConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,a,n;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy,n=t.math}],execute:function(){a._RF.push({},"0fdecYzFzNBC6Oqjv7GU04j","RPGConfig",void 0);t("RPGStateType",function(t){return t[t.Death=0]="Death",t[t.Await=1]="Await",t[t.Move=2]="Move",t[t.Attack=3]="Attack",t}({}));t("RPGConfig",function(){function t(){this.leftDatas=void 0,this.rightDatas=void 0,this.colors=[],this.initData()}return t.prototype.initData=function(){this.colors=["#F7AEAE","#9FADE4","#E9E58A","#B6D38B","#8BD3BF","#EC4727","#D1B628","#548B21","#2EB19C","#2E4DB1"],this.leftDatas=[{index:0,attack:30,def:5,speed:15,hp:100,camp:0,long:!1,pos:n.v2(-104.869,232)},{index:1,attack:35,def:10,speed:20,hp:100,camp:0,long:!1,pos:n.v2(-104.869,-37.535)},{index:2,attack:40,def:15,speed:35,hp:100,camp:0,long:!1,pos:n.v2(-250,389.228)},{index:3,attack:55,def:10,speed:40,hp:100,camp:0,long:!1,pos:n.v2(-250,161.407)},{index:4,attack:40,def:5,speed:50,hp:100,camp:0,long:!1,pos:n.v2(-250,-98.502)}],this.rightDatas=[{index:5,attack:20,def:5,speed:15,hp:100,camp:1,long:!1,pos:n.v2(119.743,232)},{index:6,attack:35,def:10,speed:20,hp:100,camp:1,long:!1,pos:n.v2(119.743,-37.535)},{index:7,attack:40,def:15,speed:35,hp:100,camp:1,long:!1,pos:n.v2(250,389.228)},{index:8,attack:45,def:10,speed:40,hp:100,camp:1,long:!1,pos:n.v2(250,161.407)},{index:9,attack:50,def:5,speed:50,hp:100,camp:1,long:!1,pos:n.v2(250,-98.502)}]},e(t,null,[{key:"ins",get:function(){return this._inst||(this._inst=new t),this._inst}}]),t}())._inst=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/RPGLauncher.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,o,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,r=n.Component}],execute:function(){var i,s;e._RF.push({},"f3556t0IwZKtIdYcW+oqHWW","RPGLauncher",void 0);var a=o.ccclass;o.property,n("RPGLauncher",a("RPGLauncher")(((s=function(n){function e(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=n.call.apply(n,[this].concat(o))||this).seed=5,t.initSeed=5,t.logRandomArray=[],t}t(e,n);var o=e.prototype;return o.onLoad=function(){e.ins?this.destroy():e.ins=this},o.start=function(){},o.update=function(n){},o.setRandomSeed=function(n){this.initSeed=n,console.error("收到随机数",this.initSeed)},o.seedRandom=function(){return this.logRandomArray.length<30&&this.logRandomArray.push(this.seed),this.seed=(9301*this.seed+49297)%233280,this.seed/233280},o.randomInt=function(n,t,e){if(void 0===t&&(t=0),void 0===e&&(e=1),n>t){var o=n;n=t,t=o}var r=t-n+1*e,i=this.seedRandom()*r;return i+=n,Math.floor(i/e)*e},e}(r)).ins=void 0,i=s))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/RPGPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./ViewRegisterMgr.ts","./PanelEnum.ts","./LayerManager.ts","./RPGConfig.ts","./ViewConst.ts","./AssetMgr.ts","./RPGLauncher.ts","./Enum3.ts","./RoleEntity.ts"],(function(t){var e,r,n,a,i,o,s,c,d,l,h,u,f,p,g,v,x,y;return{setters:[function(t){e=t.inheritsLoose,r=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t._decorator,o=t.tween,s=t.math},function(t){c=t.default},function(t){d=t.registerView},function(t){l=t.PanelType},function(t){h=t.LayerType},function(t){u=t.RPGConfig,f=t.RPGStateType},function(t){p=t.default},function(t){g=t.default},function(t){v=t.RPGLauncher},function(t){x=t.RPGModelAnimName},function(t){y=t.RoleEntity}],execute:function(){var m;a._RF.push({},"922c3KvSMVMU7rKEhPU3H4J","RPGPanel",void 0);var A=i.ccclass,M=(i.property,t("RPGPanel",A("RPGPanel")(m=function(t){function a(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).orderIndex=void 0,e.orderArrary=void 0,e.leftFightModels=void 0,e.rightFightModels=void 0,e.targetIndex=void 0,e}e(a,t);var i=a.prototype;return i.onOpen=function(){var t=r(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initModelData(),t.next=3,this.initModel();case 3:this.orderIndex=0,this.nextAttack();case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.initModelData=function(){this.orderArrary=[];for(var t=0;t<u.ins.leftDatas.length;t++){var e=u.ins.leftDatas[t],r=u.ins.rightDatas[t],n={index:e.index,attack:e.attack,def:e.def,camp:e.camp,hp:e.hp,speed:e.speed,pos:e.pos,long:e.long,state:f.Await},a={index:r.index,attack:r.attack,def:r.def,camp:r.camp,hp:r.hp,speed:r.speed,pos:r.pos,long:r.long,state:f.Await};this.orderArrary[t]=n,this.orderArrary[t+5]=a}},i.initModel=function(){var t=r(n().mark((function t(){var e,r,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.leftFightModels=[],this.rightFightModels=[],e=0;case 3:if(!(e<this.orderArrary.length)){t.next=12;break}return r=this.orderArrary[e],t.next=7,this.createMode(r);case 7:a=t.sent,0===r.camp?this.leftFightModels[r.index]=a:1===r.camp&&(this.rightFightModels[r.index]=a);case 9:e++,t.next=3;break;case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.createMode=function(){var t=r(n().mark((function t(e){var r,a,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p.defaultPrefabPathPrefix+"RPGRoleEntity",t.next=3,g.instance.createPrefab(r);case 3:if(a=t.sent){t.next=6;break}return t.abrupt("return");case 6:return a.setPosition(e.pos.x,e.pos.y),a.parent=this.node,(i=a.getComponent(y))&&i.setModeData(e),i.playAnimation(x.Idel),t.abrupt("return",a);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.start=function(){},i.update=function(t){},i.getOrderArraryByCamp=function(t){for(var e=[],r=0;r<this.orderArrary.length;r++){var n=this.orderArrary[r];n.camp===t&&n.state!=f.Death&&e.push(n)}return e},i.getOrderDataByIndex=function(t){for(var e=0;e<this.orderArrary.length;e++){var r=this.orderArrary[e];if(r.index===t&&r.state!=f.Death)return r}return null},i.setModelState=function(t,e){var r=this;if(e==f.Move){var n=0;0==t.camp&&(n=1);var a=this.getOrderArraryByCamp(n),i=v.ins.randomInt(0,a.length-1);console.log("随机出来的下标",i);var o=a[i];this.targetIndex=null,o?(this.targetIndex=o.index,this.move(t,o).then((function(e){r.setModelState(t,f.Attack)})).catch((function(t){console.error(t)}))):1==n?console.error("你赢了"):console.error("你输了")}else if(e==f.Attack){if(null!=this.targetIndex){t.camp;var s=this.getOrderDataByIndex(this.targetIndex);this.attack(t,s).then((function(e){console.error("执行到攻击返回步骤了"),r.move(t,t,!0).then((function(t){e<=0&&r.setModelState(s,f.Death),r.orderIndex+=1,r.nextAttack()})).catch((function(t){console.error(t)}))})).catch((function(t){console.error(t)}))}}else if(e==f.Death&&t){for(var c=0;c<this.orderArrary.length;c++){var d=this.orderArrary[c];if(d.index==t.index){d.state=f.Death;break}}var l=this.getTargetModel(t);l&&(console.error(t.index+"被打死了!!!!"),l.removeFromParent())}},i.getTargetModel=function(t){var e=null;return 0==t.camp?e=this.leftFightModels[t.index]:1==t.camp&&(e=this.rightFightModels[t.index]),e},i.attack=function(t,e){var r=this;return new Promise((function(n,a){if(t&&e)if(r.orderArrary[e.index]){var i=e.hp+e.def-t.attack;e.hp=i;var o=r.getTargetModel(e);if(o){var s=o.getComponent(y);if(s){var c=r.getTargetModel(t);if(c){var d=c.getComponent(y);d&&d.playAnimation(x.Attack).then((function(r){console.error(t.index+" 攻击了"+e.index+",造成了"+t.attack+"伤害,防御了"+e.def+",还剩"+e.hp),s.setHp(i/100),n(i)})).catch((function(t){console.error(t)}))}}else a("模型没有绑定管理脚本")}else a("目标模型没找到")}else a("攻击对象没找到");else a("攻击数据为空")}))},i.move=function(t,e,r){var n=this;return void 0===r&&(r=!1),new Promise((function(a,i){if(t&&e){var c=n.getTargetModel(t);if(c){var d=c.getComponent(y);d&&(r&&d.rotationDiretion(),d.playAnimation(x.Walk)),o(c).to(1,{position:s.v3(e.pos.x,e.pos.y,0)}).call((function(t,e){d&&(r&&d.rotationDiretion(),d.playAnimation(x.Idel,0)),a(!0)}),n).start()}else i("模型为空")}else i("数据为空")}))},i.nextAttack=function(){this.orderIndex>9&&(this.orderIndex=0);var t=this.orderArrary[this.orderIndex];t.state===f.Await?this.setModelState(t,f.Move):(this.orderIndex+=1,this.nextAttack())},a}(c))||m));d({viewCls:M,id:l.RPGPanel,layer:h.view}),a._RF.pop()}}}));

System.register("chunks:///_virtual/ScenceMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum3.ts","./SpawnPoint.ts","./GameManager.ts","./TransferDoor.ts","./Monster.ts","./Npc.ts","./SceneBase.ts"],(function(t){var n,i,e,a,o,s,r,p,c,h,l,u,f;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,a=t.Node,o=t.Vec3},function(t){s=t.MapLoadModel,r=t.MapItemType},function(t){p=t.default},function(t){c=t.GameManager},function(t){h=t.default},function(t){l=t.Monster},function(t){u=t.Npc},function(t){f=t.SceneBase}],execute:function(){var d;i._RF.push({},"d1b96xOPgFGeahphQzjz3qP","ScenceMap",void 0);var y=e.ccclass;e.property,t("ScenceMap",y("ScenceMap")(d=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this).spawnPointList=[],n.transferDoorList=[],n.npcList=[],n.monsterList=[],n.player=null,n}n(i,t);var e=i.prototype;return e.start=function(){t.prototype.start.call(this),this.node.on(a.EventType.TOUCH_START,this.onMapTouch,this),this.setMapId(1,s.single)},e.getMapPath=function(t){return"Map/map"+t+"/map"+t},e.initMapData=function(t){this.initMapElement(),this.afterInitMapElement(),this.initPlayer(),this.setViewToPlayer()},e.initMapElement=function(){var t=this.mapData.mapItems;if(t)for(var n=0;n<t.length;n++){var i=t[n],e=i.type;e==r.Npc?this.initNpc(i):e==r.Monster?this.initMonster(i):e==r.Transfer?this.initTransferDoor(i):e==r.SpawnPoint&&this.initSpawnPoint(i)}},e.initNpc=function(t){var n=c.instance.getNPC();n.node.parent=this.entityLayer.node,n.initEditData(t),n.init()},e.initMonster=function(t){var n=c.instance.getMonster();n.node.parent=this.entityLayer.node,n.initEditData(t),n.init()},e.initTransferDoor=function(t){var n=c.instance.getTransferDoor(t.transferType);n.node.parent=this.entityLayer.node,n.initEditData(t),n.init()},e.initSpawnPoint=function(t){var n=c.instance.getSpawnPoint();n.node.parent=this.entityLayer.node,n.initEditData(t),n.init()},e.initPlayer=function(){var t=this.getSpawnPoint(0);this.player=c.instance.getPlayer(),this.player.node.parent=this.entityLayer.node,this.player.node.position=null!=t?t.node.position:new o(1e3,1e3,0)},e.getSpawnPoint=function(t){void 0===t&&(t=0);for(var n=0;n<this.spawnPointList.length;n++)if(this.spawnPointList[n].spawnId==t)return this.spawnPointList[n];if(0==t)for(n=0;n<this.spawnPointList.length;n++)if(this.spawnPointList[n].defaultSpawn)return this.spawnPointList[n];return console.error("地图"+this.mapData.name+"不存在这个出生点 spawnId = "+t),null},e.afterInitMapElement=function(){this.spawnPointList=this.getComponentsInChildren(p),this.transferDoorList=this.getComponentsInChildren(h),this.npcList=this.getComponentsInChildren(u),this.monsterList=this.getComponentsInChildren(l)},e.setViewToPlayer=function(){this.setViewToPoint(this.player.node.position.x,this.player.node.position.y)},e.onMapTouch=function(t){var n=new o(t.getUILocation().x,t.getUILocation().y),i=new o;o.add(i,this.camera.node.position,n),console.log("点击的像素坐标",i.x,i.y),this.player.navTo(i.x,i.y)},e.update=function(t){this.isInit&&this.player&&this.followTarget(this.player.node,t)},i}(f))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/Scene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HashMap.ts","./Containers.ts","./GameConst.ts"],(function(t){var e,i,n,r,a,s;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},function(t){r=t.HashMap},function(t){a=t.Containers},function(t){s=t.GameConst}],execute:function(){n._RF.push({},"42c54g36UtKNJvCUTUBhfp8","Scene",void 0);t("Scene",function(t){function n(){var e;return(e=t.call(this)||this).id=void 0,e.type=void 0,e.unitMap=void 0,e.unitNameMap=void 0,e.entityTypeMap=void 0,e.depthHelper=void 0,e.layers=[],e._status=void 0,e.queue=[],e.unitMap=new r,e.unitNameMap=new r,e.entityTypeMap=new r,e.queue=[],e.depthHelper=[],e}e(n,t);var a=n.prototype;return a.init=function(){this.removeDepth(),this.layers=[s.BG_LAYER,s.MAP_Bottom_Role_LAYER,s.MAP_LAYER,s.DECORATE_LAYER,s.MAP_SHADOW_LAYER,s.MAP_MAGIC_LAYER,s.MAP_EFFECT_LAYER,s.MAP_DROP_LAYER,s.EFFECT_Bottom_LAYER,s.EFFECT_TOP_LAYER,s.ROLE_LAYER,s.ROLE_NAME_LAYER,s.EFFECT_LAYER,s.HIT_EFFECT_LAYER,s.CENTER_LAYER,s.TOP_LAYER,s.HURT_EFFECT_LAYER],this.setContainers(this.layers);for(var t=0;t<this.layers.length;t++)this.layers[t];this.initDepthLayer(),this.onInit()},a.setSort=function(t){if(this.depthHelper)if(t)for(var e,n=i(this.depthHelper);!(e=n()).done;){e.value.start(200)}else for(var r,a=i(this.depthHelper);!(r=a()).done;){r.value.stop()}},a.setDepths=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=null;r.layerName=n,r.setTarget(this.getChildContainer(n)),this.depthHelper.push(r)}this.setSort(!0)},a.initDepthLayer=function(){},a.enter=function(){},a.onEnter=function(){},a.leave=function(){},a.onLeave=function(){},a.onInit=function(){},a.clear=function(){this.entityTypeMap.clear()},a.setStatus=function(t){this._status=t},a.getStatus=function(){return this._status},a.resetUnitId=function(t,e){if(this.unitMap.hasKey(t)){var i=this.unitMap.remove(t);this.unitMap.put(e,i)}},a.getId=function(){return this.id},a.getName=function(){return this.name},a.setLocation=function(t,e){this.setPosition(t,e)},a.getLocation=function(){return this.position.clone()},a.getLocationScale=function(){return this.scale.clone()},a.removeDepth=function(){if(this.depthHelper){for(var t=0;t<this.depthHelper.length;t++)this.depthHelper[t].destory();this.depthHelper=[]}},a.destroy=function(){this.unitMap.getContainer();return this.unitMap.clear(),this.unitNameMap.clear(),t.prototype.destroy.call(this)},a.updateScene=function(){},a.addUnit=function(t){var e=!1;this.unitMap.hasKey(t.getId())&&(e=!0),this.addUnitToTypeMap(t),this.unitMap.put(t.getId(),t),this.unitNameMap.put(t.getName(),t),t.setScene(this),e||(this.queue.push(t),this.queueAddChild())},a.addUnitToTypeMap=function(t){var e=this.entityTypeMap.get(t.type);e||(e=[],this.entityTypeMap.put(t.type,e)),this.unitMap.hasKey(t.getId())||e.push(t)},a.reomveUnitToTypeMap=function(t){var e=this.entityTypeMap.get(t.type);if(e)for(var i=0;i<e.length;i++){if(e[i].getId()==t.getId()){e.splice(i,1);break}}},a.getUnitsByTypes=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],r=this.entityTypeMap.get(n);r&&(e=e.concat(r))}return e},a.removeUnitById=function(t,e){void 0===e&&(e=!1);var i=this.unitMap.remove(t);return null!=i&&(this.unitNameMap.remove(i.getName()),this.removeUnit(i,e)),i},a.getUnits=function(t){if(void 0===t&&(t=0),0==t)return this.unitMap.values();for(var e=[],i=this.unitMap.values(),n=null,r=0;r<i.length;r++)(n=i[r]).getType()==t&&e.push(n);return e},a.removeUnitByName=function(t,e){void 0===e&&(e=!1);var i=this.getUnitByName(t);return null!=i?this.removeUnitById(i.getId(),e):null},a.getUnitById=function(t){return this.unitMap.get(t)},a.getUnitByName=function(t){return this.unitNameMap.get(t)},a.removeUnit=function(t,e){void 0===e&&(e=!1),this.reomveUnitToTypeMap(t);var i=this.queue.indexOf(t);-1!=i&&this.queue.splice(i,1);for(var n=0;n<this.depthHelper.length;n++){var r=this.depthHelper[n];r.layerName==t.getLayer()&&r.removeChild(t.getDisplay())}t.getDisplay().parent==this.getChildContainer(t.getLayer())&&this.getChildContainer(t.getLayer()).removeChild(t.getDisplay()),t.onRemove(),e&&t.destroy()},a.queueAddChild=function(){if(this.queue.length>0){var t=this.queue.shift();this.getChildContainer(t.getLayer()).addChild(t.getDisplay()),t.onAdd();for(var e=0;e<this.depthHelper.length;e++)this.depthHelper[e].layerName==t.getLayer()&&null!=this.depthHelper&&this.depthHelper[e].addChild(t.getDisplay())}},n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/SceneBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapLayer.ts","./EntityLayer.ts","./MapParams.ts","./Enum3.ts","./PathFindingAgent.ts","./TowerLauncher.ts"],(function(t){var i,e,a,s,n,h,r,o,p,g,l,m,c,u,d,w,P,f,y,z,S,_,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,s=t.assertThisInitialized,n=t.createClass},function(t){h=t.cclegacy,r=t._decorator,o=t.Camera,p=t.Vec3,g=t.Size,l=t.view,m=t.math,c=t.resources,u=t.JsonAsset,d=t.Texture2D,w=t.UITransform,P=t.Component},function(t){f=t.default},function(t){y=t.default},function(t){z=t.default},function(t){S=t.MapLoadModel},function(t){_=t.default},function(t){v=t.TowerLauncher}],execute:function(){var M,b,L,H,x,W,I,D,T;h._RF.push({},"e53e83AZzlJArZ30yyMJRSr","SceneBase",void 0);var A=r.ccclass,B=r.property;t("SceneBase",(M=A("SceneBase"),b=B(f),L=B(y),H=B(o),M((I=i((W=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),h=0;h<e;h++)n[h]=arguments[h];return i=t.call.apply(t,[this].concat(n))||this,a(i,"mapLayer",I,s(i)),a(i,"entityLayer",D,s(i)),a(i,"camera",T,s(i)),i._mapData=void 0,i._mapId=void 0,i.targetPos=new p(0,0,0),i.winSize=new g,i._mapParams=null,i.isInit=!1,i}e(i,t);var h=i.prototype;return h.start=function(){this.winSize=l.getVisibleSize(),this.node.setPosition(m.v3(-this.winSize.width/2,-this.winSize.height/2)),this.setMapId(1)},h.setMapId=function(t,i){void 0===i&&(i=S.single),this._mapId=t,v.instance.mapId=t,this.loadMap(t)},h.loadMap=function(t,i){void 0===i&&(i=S.single),i==S.single&&this.loadSingleMap(t)},h.getMapPath=function(t){return""},h.loadSingleMap=function(t){var i=this,e=this.getMapPath(t);c.load(e,u,(function(t,a){if(null==t){var s=a.json,n=e+"/texture";c.load(n,d,(function(t,e){null==t?(console.log(s,e),i.init(s,e)):console.log("加载地图背景失败 path = ",n,"error",t)}))}else console.log("加载地图数据失败 path = ",e,"error",t)}))},h.init=function(t,i){this._mapData=t,this._mapParams=this.getMapParams(t,i,S.single),this.mapLayer.init(this._mapParams),_.instance.init(t);var e=this.node.getComponent(w);e&&(e.width=this.mapLayer.width,e.height=this.mapLayer.height),this.initMapData(t),this.isInit=!0},h.initMapData=function(t){},h.getMapParams=function(t,i,e){void 0===e&&(e=1);var a=new z;return a.name=t.name,a.bgName=t.bgName,a.mapType=t.type,a.mapWidth=t.mapWidth,a.mapHeight=t.mapHeight,a.ceilWidth=t.nodeWidth,a.ceilHeight=t.nodeHeight,a.viewWidth=t.mapWidth>this.winSize.width?this.winSize.width:t.mapWidth,a.viewHeight=t.mapHeight>this.winSize.height?this.winSize.height:t.mapHeight,a.sliceWidth=256,a.sliceHeight=256,a.bgTex=i,a.mapLoadModel=e,a},h.setViewToPoint=function(t,i){this.targetPos=new p(t,i).subtract(new p(this.winSize.width/2,this.winSize.height/2)),this.targetPos.x>this._mapParams.mapWidth-this.winSize.width?this.targetPos.x=this._mapParams.mapWidth-this.winSize.width:this.targetPos.x<0&&(this.targetPos.x=0),this.targetPos.y>this._mapParams.mapHeight-this.winSize.height?this.targetPos.y=this._mapParams.mapHeight-this.winSize.height:this.targetPos.y<0&&(this.targetPos.y=0),this.targetPos.z=this.camera.node.position.z,this.camera.node.position=this.targetPos},h.followTarget=function(t,i){null!=t&&(this.targetPos=t.position.clone().subtract(new p(this.winSize.width/2,this.winSize.height/2)),this.targetPos.x>this._mapParams.mapWidth-this.winSize.width?this.targetPos.x=this._mapParams.mapWidth-this.winSize.width:this.targetPos.x<0&&(this.targetPos.x=0),this.targetPos.y>this._mapParams.mapHeight-this.winSize.height?this.targetPos.y=this._mapParams.mapHeight-this.winSize.height:this.targetPos.y<0&&(this.targetPos.y=0),this.targetPos.z=this.camera.node.position.z,this.targetPos=this.camera.node.position.clone().lerp(this.targetPos,2*i),this.camera.node.setPosition(this.targetPos))},n(i,[{key:"mapData",get:function(){return this._mapData}},{key:"mapId",get:function(){return this._mapId}}]),i}(P)).prototype,"mapLayer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(W.prototype,"entityLayer",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(W.prototype,"camera",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=W))||x));h._RF.pop()}}}));

System.register("chunks:///_virtual/SelectTowerBuild.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TowerConfig.ts","./TowerLauncher.ts","./TowerGameUIManager.ts"],(function(e){var t,o,r,i,n,l,a,c,s,u,d,h;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,i=e.NodeEventType,n=e.resources,l=e.Texture2D,a=e.Sprite,c=e.SpriteFrame,s=e.Component},function(e){u=e.TowerConfig},function(e){d=e.TowerLauncher},function(e){h=e.TowerGameUIManager}],execute:function(){var w;o._RF.push({},"d36e5yXmYBLAbSfwD/EaKem","SelectTowerBuild",void 0);var f=r.ccclass;r.property,e("SelectTowerBuild",f("SelectTowerBuild")(w=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).callBack=void 0,t.callObj=void 0,t.towerId=void 0,t.level=void 0,t.buildInfo=void 0,t.towerData=null,t}t(o,e);var r=o.prototype;return r.start=function(){this.node.on(i.TOUCH_START,this.onTouchNode,this)},r.onTouchNode=function(e){this.towerData?d.instance.value>=this.towerData.buildCost&&this.callBack&&this.callObj&&(this.buildInfo.selectedTowerId=this.towerId,this.callBack.call(this.callObj,this.buildInfo),h.instance.showSelectTower(!1)):console.error("当前选中塔的配置不存在")},r.setTowerId=function(e,t){var o=this;void 0===t&&(t=1),this.towerId=e,this.level=t;var r=u.instance.getTowerConfig(this.towerId,this.level);if(r){this.towerData=r;var i=d.instance.value>=r.buildCost,s="tower/res/NormalMordel/Game/Tower/"+this.towerId+"/CanClick"+(i?1:0)+"/texture";n.load(s,l,(function(e,t){if(e)console.error(e.stack);else{var r=o.node.getComponent(a),i=new c;i.texture=t,r.spriteFrame=i}}))}},r.setBuildInfo=function(e){this.buildInfo=e},r.setClickCall=function(e,t){this.callBack=e,this.callObj=t},r.update=function(e){},o}(s))||w);o._RF.pop()}}}));

System.register("chunks:///_virtual/SkillConfigVo.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"80a24vn2JxCCZo1Wy0j2NqX","SkillConfigVo",void 0);i("SkillConfigVo",(function(){this.skillId=void 0,this.firstCd=void 0,this.cd=void 0,this.type=void 0,this.target=void 0,this.skillType=void 0,this.targetTypes=void 0,this.distance=void 0,this.hurt=void 0,this.recoveyAnger=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SpawnPoint.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,a,r,o,c,p,u,l;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,c=t.CCInteger,p=t.CCBoolean,u=t.Vec3,l=t.Component}],execute:function(){var s,f,d,w,h,y,S;r._RF.push({},"7bac4jmsgdBK4STLC9vrcL4","SpawnPoint",void 0);var b=o.ccclass,g=o.property;t("default",(s=b("SpawnPoint"),f=g(c),d=g(p),s((y=n((h=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n=t.call.apply(t,[this].concat(r))||this,i(n,"spawnId",y,a(n)),i(n,"defaultSpawn",S,a(n)),n.editData=null,n}e(n,t);var r=n.prototype;return r.start=function(){},r.init=function(){},r.initEditData=function(t){this.editData=t,this.node.position=new u(t.x,t.y),this.spawnId=t.spawnId,this.defaultSpawn=t.defaultSpawn},n}(l)).prototype,"spawnId",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=n(h.prototype,"defaultSpawn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=h))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/SpineSkeleton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConst.ts","./ActionInfo.ts"],(function(e){var n,t,i,o,s,r,a,u,l;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){i=e.cclegacy,o=e._decorator,s=e.sp,r=e.resources,a=e.Component},function(e){u=e.GameConst},function(e){l=e.ActionInfo}],execute:function(){var m;i._RF.push({},"16367xy4HNNnbe2kwjBErJJ","SpineSkeleton",void 0);var c=o.ccclass;o.property,e("SpineSkeleton",c("SpineSkeleton")(m=function(e){function i(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).skeleton=null,n.playTimes=-1,n._currentTimes=0,n._currentAnimationName=void 0,n._endAnimationName=void 0,n.keyFrameHandler=void 0,n.runing=!1,n.animationQueue=void 0,n.currentInfo=void 0,n._rosolve=void 0,n}n(i,e);var o=i.prototype;return o.onLoad=function(){this.skeleton=this.node.getComponent(s.Skeleton),this.skeleton||(this.skeleton=this.node.addComponent(s.Skeleton)),this.animationQueue=[]},o.start=function(){},o.setSpineId=function(e,n){var t=this;return void 0===n&&(n=u.Idle),new Promise((function(i,o){var a="spine/body/afk/hero/sanim_"+e;r.load(a,s.SkeletonData,(function(e,s){if(e)o(e);else{t.skeleton.skeletonData=s,t.skeleton.setCompleteListener(t.onAimationComplete);var r=new l(n);t.setAnimation(r),i()}}))}))},o._onPlay=function(e){var n=this;e&&this.skeleton&&e.name!=this._currentAnimationName&&(this._currentTimes=0,this._endAnimationName=e.endActionName,this._currentAnimationName=e.name,this.playTimes=e.times,this.skeleton.loop=!0,-1!=this.playTimes?this.skeleton.setCompleteListener((function(e){-1!=n.playTimes&&(n._currentTimes++,n._currentTimes>=n.playTimes&&(n.clear(),n.next()))})):this.skeleton.setCompleteListener(null),this.skeleton.setEventListener((function(e,t){n.keyFrameHandler&&n.keyFrameHandler.execute(e,t)})),this.skeleton.animation=e.name)},o.setAnimation=function(e){var n=this;return new Promise((function(t,i){e?n.skeleton&&e.name!=n._currentAnimationName?(n._currentTimes=0,n._endAnimationName=e.endActionName,n._currentAnimationName=e.name,n.playTimes=e.times,n.skeleton.loop=!0,-1!=n.playTimes?n.skeleton.setCompleteListener((function(e){-1!=n.playTimes&&(n._currentTimes++,n._currentTimes>=n.playTimes&&(n.clear(),t()))})):n.skeleton.setCompleteListener(null),n.skeleton.setEventListener((function(e,t){n.keyFrameHandler&&n.keyFrameHandler.execute(e,t)})),n.skeleton.animation=e.name,-1==e.times&&t()):t():i("信息有误")}))},o.killAll=function(){this.runCurrent(),this.animationQueue=[],this.runing=!1},o.runCurrent=function(){this.currentInfo&&this.currentInfo.handler&&this.currentInfo.handler.execute()},o.nextRun=function(){this.runCurrent(),this.currentInfo=this.animationQueue.shift(),this._onPlay(this.currentInfo)},o.next=function(){this.animationQueue.length<=0?(this.runing=!1,this.currentInfo&&this.currentInfo.handler&&this.currentInfo.handler.execute()):this.nextRun()},o.playEndAnimation=function(e){var n=e||u.Idle,t=new l(n);this.setAnimation(t)},o.clear=function(){this.playTimes=-1,this._currentTimes=0},o.onAimationComplete=function(e){-1!=this.playTimes&&(this._currentTimes++,this._currentTimes>=this.playTimes&&this.clear())},o.update=function(e){},t(i,[{key:"currentAnimation",get:function(){return this._currentAnimationName}}]),i}(a))||m);i._RF.pop()}}}));

System.register("chunks:///_virtual/SpineTest.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,s,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,r=e.sp,s=e.resources,i=e.Component}],execute:function(){var c;n._RF.push({},"b8acb/5pnZI8oLkiBHchNQC","SpineTest",void 0);var p=o.ccclass;o.property,e("SpineTest",p("SpineTest")(c=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.start=function(){var e=this.getComponent(r.Skeleton);s.loadDir("spine/54154/",(function(t,n){console.log(n);n[3];var o=n[2];e.skeletonData=o}))},o.update=function(e){},n}(i))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtils.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ff123rNIqNHT52+G7NGRrI2","StringUtils",void 0);t("default",function(){function t(){}return t.empty=function(t){return null==t||""==t||t.length<=0},t.generateRichText=function(t,e,n){var r="";return r=this.colorRichText(t,e),r=this.sizeRichText(r,n)},t.colorRichText=function(t,e){return null===e?t:("<color="+e+">%d</color>").replace("%d",t)},t.sizeRichText=function(t,e){return null===e?t:("<size="+e+">%d</size>").replace("%d",t)},t.boldRichText=function(t){return"<b>%d</b>".replace("%d",t)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Test.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r,i,a,s,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,s=t.Node,c=t.Component}],execute:function(){var l,p,u,d,h;i._RF.push({},"9ead4JPW05I/rCLq5Lz5uJg","Test",void 0);var f=a.ccclass,y=a.property;t("Test",(l=f("Test"),p=y(s),l((h=e((d=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"targetNode",h,r(e)),e.speed=200,e}n(e,t);var i=e.prototype;return i.start=function(){},i.update=function(t){var e=this.node.position.clone(),n=this.targetNode.position.clone(),o=Math.atan2(n.y-e.y,n.x-e.x),r=n.subtract(e).normalize(),i=o/Math.PI*180;this.node.angle=i-90;var a=r.multiplyScalar(this.speed*t);this.node.position=this.node.position.clone().add(a)},e}(c)).prototype,"targetNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=d))||u));i._RF.pop()}}}));

System.register("chunks:///_virtual/Tile.ts",["cc"],(function(i){var t,o,s;return{setters:[function(i){t=i.cclegacy,o=i._decorator,s=i.Vec2}],execute:function(){t._RF.push({},"3f1f85sfylNpbAWlo4ssk/l","Tile",void 0);o.ccclass,o.property,i("Tile",function(){function i(){this.positionX=void 0,this.positionY=void 0,this.value=void 0,this.megreFrom=null,this.previousPosition=new s(0,0)}var t=i.prototype;return t.setup=function(i,t){this.positionX=i.x,this.positionY=i.y,this.value=t||2,this.megreFrom=null,this.previousPosition=new s(0,0)},t.savePosition=function(){this.previousPosition.set(this.positionX,this.positionY)},t.updatePosition=function(i){this.positionX=i.x,this.positionY=i.y},t.serialize=function(){return{position:{x:this.positionX,y:this.positionY},value:this.value}},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/TimeUtils.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d28fa+G49BMypt6Smeva8UQ","TimeUtils",void 0);t("default",function(){function t(){}return t.formatSecond=function(t,e){void 0===e&&(e="hh:mm:ss");var n,r=0,c=0;t>=3600&&(t-=3600*(r=Math.floor(t/3600))),t>=60&&(t-=60*(c=Math.floor(t/60))),n=t;var u=e.split(":");switch(u.length){case 1:return(n<10&&u[0].length>=2?"0":"")+n;case 2:return(c<10&&u[1].length>=2?"0":"")+c+":"+(n<10&&u[0].length>=2?"0":"")+n;case 3:return(r<10&&u[2].length>=2?"0":"")+r+":"+(c<10&&u[1].length>=2?"0":"")+c+":"+(n<10&&u[0].length>=2?"0":"")+n}return""},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Touch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts"],(function(t){var n,e,o,i,r,c,s;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Node,r=t.misc,c=t.Component},function(t){s=t.TouchEvent}],execute:function(){var u;e._RF.push({},"81bb0/FB2RIr4GT21W+y8dV","Touch",void 0);var a=o.ccclass;o.property,t("Touch",a("Touch")(u=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){},o.onLoad=function(){this.registerEvent()},o.registerEvent=function(){var t=this;this.node.on(i.EventType.TOUCH_END,(function(n){var e=n.getStartLocation(),o=n.getLocation().subtract(e),i=Math.atan2(o.y,o.x),c=r.radiansToDegrees(i),s=Math.floor(c/45);t.emitEventByIndex(s)}),this)},o.emitEventByIndex=function(t){0===t||-1===t?this.node.emit(s.RIGHT):1===t||2===t?this.node.emit(s.UP):-2===t||-3===t?this.node.emit(s.DOWN):-4===t||3===t||4===t?this.node.emit(s.LEFT):console.error("无此方向")},o.update=function(t){},e}(c))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/TouchMove.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,i,e,s,r;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,e=t.Node,s=t.Vec2,r=t.Component}],execute:function(){var c;n._RF.push({},"06965eGdi5HrrZ1LrLSfO4l","TouchMove",void 0);var h=i.ccclass;i.property,t("TouchMove",h("TouchMove")(c=function(t){function n(){for(var o,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];return(o=t.call.apply(t,[this].concat(i))||this).isDragging=!1,o.dragOffset=new s,o}o(n,t);var i=n.prototype;return i.start=function(){this.node.on(e.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(e.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(e.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(e.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},i.onTouchStart=function(t){this.isDragging=!0;var o=t.getLocation();this.dragOffset.set(o.x-this.node.position.x,o.y-this.node.position.y)},i.onTouchMove=function(t){if(this.isDragging){var o=t.getLocation();this.node.setPosition(o.x-this.dragOffset.x,o.y-this.dragOffset.y)}},i.onTouchEnd=function(t){this.isDragging=!1},i.update=function(t){},n}(r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/TowerBuildInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var e,t,r,n,i;return{setters:[function(o){e=o.inheritsLoose,t=o.createClass},function(o){r=o.cclegacy,n=o._decorator,i=o.Component}],execute:function(){var c;r._RF.push({},"ea529TTVC1LXLXfnGNnpTip","TowerBuildInfo",void 0);var u=n.ccclass;n.property,o("TowerBuildInfo",u("TowerBuildInfo")(c=function(o){function r(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))||this).road=void 0,e.selectedTowerId=void 0,e.removeBackCost=void 0,e.upLevelCost=void 0,e.tower=void 0,e}e(r,o);var n=r.prototype;return n.start=function(){},n.update=function(o){},t(r,[{key:"id",get:function(){return this.road?this.road.cx+"_"+this.road.cy:null}}]),r}(i))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/TowerCharacter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enemy.ts","./TowerLauncher.ts","./Character.ts","./BulletManager.ts","./TowerDataDTO.ts","./TowerConfig.ts"],(function(t){var e,i,n,r,a,o,s,l,c,h,u,f,p,g,m,w,y,d,T,b,v,L,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,s=t._decorator,l=t.Node,c=t.Prefab,h=t.Graphics,u=t.CCInteger,f=t.CCBoolean,p=t.SpriteFrame,g=t.Animation,m=t.Color,w=t.Sprite,y=t.UITransform},function(t){d=t.Enemy},function(t){T=t.TowerLauncher},function(t){b=t.default},function(t){v=t.BulletManager},function(t){L=t.TowerDataDTO},function(t){C=t.TowerConfig}],execute:function(){var D,k,_,F,I,R,S,M,z,B,A,O,P,x,E,N,q;o._RF.push({},"c685bNc3pFOWJmYrl+ckRxI","TowerCharacter",void 0);var j=s.ccclass,H=s.property;t("TowerCharacter",(D=j("TowerCharacter"),k=H(l),_=H(c),F=H(h),I=H(u),R=H({tooltip:"控制炮塔是否需要旋转",type:f}),S=H({tooltip:"炮塔等级外观资源",type:[p]}),M=H(f),D((A=e((B=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).lockTarget=null,n(e,"tempLockTarget",A,r(e)),n(e,"bulletPrefab",O,r(e)),n(e,"graphics",P,r(e)),n(e,"range",x,r(e)),n(e,"fortIsRotate",E,r(e)),n(e,"TowerSpriteFrame",N,r(e)),n(e,"isTest",q,r(e)),e.fireRate=.3,e.timeSinceLastFire=0,e.fort=null,e.enemyList=void 0,e.animation=null,e._level=1,e._towerData=null,e.towerId=0,e}i(e,t);var o=e.prototype;return o.onLoad=function(){t.prototype.onLoad.call(this),this.fort=this.node.getChildByName("fort"),this.fort&&(this.animation=this.fort.getComponent(g)),this.enemyList={}},o.onClickNode=function(t){this.createBullet()},o.start=function(){T.instance&&T.instance.isDebug&&this.drawRange()},o.drawRange=function(){this.graphics.clear(),this.graphics.strokeColor=m.RED,this.graphics.lineWidth=5,this.graphics.circle(0,0,this.range),this.graphics.stroke()},o.getTarget=function(){if(!this.enemyList)return null;var t=Object.keys(this.enemyList);if(t.length<=0)return null;for(var e=-1,i=Number.MAX_VALUE,n=0;n<t.length;n++){var r=this.enemyList[t[n]];r.hp<i&&(i=r.hp,e=n)}return-1!=e?this.enemyList[t[e]]:this.enemyList[t[0]]},o.update=function(t){if(this.isTest||!T.instance||!T.instance.gameOver&&!T.instance.pause){this.timeSinceLastFire+=t,this.enemyList={};var e=[];if(T.instance&&T.instance.quadTree&&(e=T.instance.quadTree.queryInRange(this.rect,this.range)),e.length>0)for(var i=0;i<e.length;i++){var n=e[i];n instanceof d&&(this.enemyList[n.uuid]=n)}var r=this.getTarget();if(this.lockTarget=r?r.node:this.tempLockTarget,this.lockTarget&&this.fortIsRotate){var a=this.node.position.clone(),o=this.lockTarget.position.clone(),s=Math.atan2(o.y-a.y,o.x-a.x)/Math.PI*180;this.fort.angle=s}this.lockTarget&&this.timeSinceLastFire>this.fireRate&&(this.timeSinceLastFire=0,console.log("创建子弹了"),this.playFireAnimation())}},o.playFireAnimation=function(){if(this.animation){var t=this.animation.clips.map((function(t){return t.name}),this);this.animation.on(g.EventType.FINISHED,this.onAnimationFinished,this),this.animation.play(t[Math.max(0,this.level-1)])}},o.updateTowerOutward=function(){if(this.fort){var t=this.fort.getComponent(w);t&&(t.spriteFrame=this.TowerSpriteFrame[Math.max(0,this.level-1)])}},o.updateLevel=function(t){this._level=t,this.updateTowerOutward(),this._towerData=C.instance.getTowerConfig(this.towerId,this.level)},o.onAnimationFinished=function(){this.createBullet()},o.createBullet=function(){if(this.lockTarget&&(!T.instance||!T.instance.gameOver&&!T.instance.pause)){var t=v.instance.create(this.bulletPrefab),e=t.node,i=this.node.position.clone(),n=this.fort.getComponent(y).width/2,r=this.fort.angle,a=i.x+n*Math.cos(r),o=i.y+n*Math.sin(r);e.setPosition(a,o),e.parent=this.node.parent;var s=this.lockTarget.position.clone().subtract(this.node.position.clone());t.short(s,this)}},a(e,[{key:"towerData",get:function(){return this._towerData||(this._towerData=new L,this._towerData.buildCost=100,this._towerData.harm=10,this._towerData.speed=300,this._towerData.removeBack=90),this._towerData},set:function(t){this._towerData=t}},{key:"level",get:function(){return this._level}}]),e}(b)).prototype,"tempLockTarget",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(B.prototype,"bulletPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(B.prototype,"graphics",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(B.prototype,"range",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),E=e(B.prototype,"fortIsRotate",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=e(B.prototype,"TowerSpriteFrame",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=e(B.prototype,"isTest",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=B))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/TowerConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TowerLauncher.ts","./TowerDataDTO.ts","./TowerMapDTO.ts"],(function(t){var n,e,a,i,r,o,s;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,a=t._decorator,i=t.resources},function(t){r=t.TowerLauncher},function(t){o=t.TowerDataDTO},function(t){s=t.TowerMapDTO}],execute:function(){e._RF.push({},"024e1/UrblCvpLKieiVb4pK","TowerConfig",void 0);a.ccclass,a.property;t("TowerConfig",function(){function t(){this._config=null,this._towerData=void 0,this._mapData=void 0,this.init()}var e=t.prototype;return e.init=function(){},e.loadConfig=function(){return new Promise((function(t,n){i.load("tower/config",(function(e,a){e?n(e):t(a)}))}))},e.initConfig=function(t){this._config=t.json,this._towerData={},this._mapData={};var n=this._config.towers;if(n)for(var e in n){var a=Number(e),i=n[e],u=this._towerData[a];for(var c in u||(u={}),i)if(Object.prototype.hasOwnProperty.call(i,c)){var f=i[c],l=new o;l.buildCost=f.buildCost,l.removeBack=f.removeBack,l.harm=f.harm,l.speed=f.speed,u[c]=l}this._towerData[a]=u}var h=this._config.theme;for(var v in h){var p=Number(v),_=this._mapData[p];_||(_={});var w=h[v];if(w){for(var g in w){var m=w[g],D=new s;D.canBuildTowerIds=m.towers,D.startValue=m.startValue,D.enemyCount=m.enemyCount,_[g]=D}this._mapData[p]=_}}var d=this.getMapData();d&&(r.instance.value=d.startValue)},e.getConfig=function(t){return this._config?this._config[t]:null},e.getMapData=function(t,n){if(void 0===t&&(t=r.instance.theme),void 0===n&&(n=r.instance.mapId),!this._mapData)return null;var e=this._mapData[t];return e?e["map"+n]:null},e.getTowerConfig=function(t,n){if(void 0===n&&(n=1),!this._towerData)return null;var e=this._towerData[t];return e?e["level"+n]:null},n(t,null,[{key:"instance",get:function(){return t._instance||(t._instance=new t),t._instance}}]),t}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerConst.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"b96a1/UGG1GsIYdJzPH2+aj","TowerConst",void 0),n("TowerConst",function(){function n(){this.ColliderTag_Boss=1,this.ColliderTag_Enemy=2,this.ColliderTag_Bullet=3}return t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerDataDTO.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"c1445wiXudFgIm5Jtc1mcnx","TowerDataDTO",void 0);t("TowerDataDTO",(function(){this.buildCost=void 0,this.removeBack=void 0,this.harm=void 0,this.speed=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerGameScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./ViewRegisterMgr.ts","./PanelEnum.ts","./LayerManager.ts","./ViewConst.ts"],(function(e){var t,n,r,a,i,o,c,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator},function(e){a=e.default},function(e){i=e.registerView},function(e){o=e.PanelType},function(e){c=e.LayerType},function(e){u=e.default}],execute:function(){var s;n._RF.push({},"0a80eWIP15IiJC23Tc8ca/3","TowerGameScene",void 0);var f=r.ccclass,l=(r.property,e("TowerGameScene",f("TowerGameScene")(s=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r.start=function(){},r.update=function(e){},n}(a))||s));i({viewCls:l,id:o.TowerGameScene,layer:c.view,prefabPathPrefix:u.defaultPrefabPathPrefix+"tower/"}),n._RF.pop()}}}));

System.register("chunks:///_virtual/TowerGameUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TowerConfig.ts","./SelectTowerBuild.ts","./RemoveOrUpLevel.ts"],(function(e){var t,o,n,r,i,a,s,l,d,c,u,p,h,v,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createClass},function(e){a=e.cclegacy,s=e._decorator,l=e.Label,d=e.Node,c=e.NodePool,u=e.Sprite,p=e.Component},function(e){h=e.TowerConfig},function(e){v=e.SelectTowerBuild},function(e){f=e.RemoveOrUpLevel}],execute:function(){var m,w,g,T,U,b,y,N,_,C;a._RF.push({},"e41482n/ApICY3mWFeB+JSK","TowerGameUIManager",void 0);var O=s.ccclass,P=s.property;e("TowerGameUIManager",(m=O("GameUIManager"),w=P(l),g=P(d),T=P(d),m(((C=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"turnipLabel",y,r(t)),n(t,"selectedTowerNode",N,r(t)),n(t,"removeOrUpdate",_,r(t)),t._nodePool=null,t}o(t,e);var a=t.prototype;return a.onLoad=function(){t._instance?this.destroy():t._instance=this},a.start=function(){this._nodePool=new c},a.update=function(e){},a.updateValue=function(e){this.turnipLabel&&(this.turnipLabel.string=e.toString())},a.showRemoveOrUpdate=function(e,t,o,n){if(void 0===o&&(o=null),void 0===n&&(n=null),this.removeOrUpdate&&(this.reomoveUpdateState=e,e&&t)){this.removeOrUpdate.setPosition(t.node.position.clone());var r=this.removeOrUpdate.getComponent(f);r&&r.updateInfo(t,o,n)}},a.showSelectTower=function(e,t,o,n){if(void 0===o&&(o=null),void 0===n&&(n=null),!this.selectedTowerNode)return!1;this.selectedTowerState=e;for(var r=this.selectedTowerNode.children.length-1;r>=0;r--){var i=this.selectedTowerNode.children[r];i.removeFromParent(),this._nodePool.put(i)}if(e){this.selectedTowerNode.setPosition(t.node.position.clone());var a=h.instance.getMapData();if(a)for(var s=a.canBuildTowerIds,l=0;l<s.length;l++){var d=s[l],c=this.getNode();this.selectedTowerNode.addChild(c.node),c.setTowerId(d),c.setBuildInfo(t),c.setClickCall(o,n)}}},a.getNode=function(){if(this._nodePool.size()>0){var e=this._nodePool.get(),t=e.getComponent(v);return t||(t=e.addComponent(v)),e.addComponent(u),t}var o=new d;return o.addComponent(u),o.addComponent(v)},i(t,[{key:"reomoveUpdateState",get:function(){return!!this.removeOrUpdate&&this.removeOrUpdate.active},set:function(e){this.removeOrUpdate&&(this.removeOrUpdate.active=e)}},{key:"selectedTowerState",get:function(){return!!this.selectedTowerNode&&this.selectedTowerNode.active},set:function(e){this.selectedTowerNode&&(this.selectedTowerNode.active=e)}}],[{key:"instance",get:function(){return t._instance||(t._instance=new t),t._instance}}]),t}(p))._instance=void 0,y=t((b=C).prototype,"turnipLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(b.prototype,"selectedTowerNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(b.prototype,"removeOrUpdate",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=b))||U));a._RF.pop()}}}));

System.register("chunks:///_virtual/TowerLauncher.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enemy.ts","./QuadTree.ts","./BulletManager.ts","./TowerGameUIManager.ts","./ViewManager.ts","./PanelEnum.ts","./TowerConfig.ts"],(function(e){var t,i,n,r,s,a,o,h,u,c,l,d,f,p,m,v,g,y,_,L,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){h=e.cclegacy,u=e._decorator,c=e.Graphics,l=e.Color,d=e.Component},function(e){f=e.Enemy},function(e){p=e.QuadTree,m=e.AnchorPointType,v=e.QuadTreeRect},function(e){g=e.BulletManager},function(e){y=e.TowerGameUIManager},function(e){_=e.viewManager},function(e){L=e.PanelType},function(e){w=e.TowerConfig}],execute:function(){var T,b,C,P,I,O;h._RF.push({},"d1c78JbMBZGZZoWCxl3zSdU","TowerLauncher",void 0);var q=u.ccclass,E=u.property,k=e("TowerLauncher",(T=q("TowerLauncher"),b=E(c),T(((O=function(e){function t(){var t;return t=e.call(this)||this,n(t,"graphics",I,r(t)),t.isInit=!1,t.speed=1,t.pause=!1,t.theme=1,t.gameOver=!1,t.mapId=1,t.popEnemyCount=0,t._value=0,t._entityLayer=void 0,t._mapLayer=void 0,t._enemyList=void 0,t._towerList=void 0,t._boss=void 0,t._buildInfos=void 0,t._mapPathCache=void 0,t.quadTree=null,t.isDebug=!0,t}i(t,e);var h=t.prototype;return h.onLoad=function(){t._instance?this.destroy():t._instance=this},h.init=function(e,t){this._entityLayer=e,this._mapLayer=t,this._enemyList={},this._towerList={},this._buildInfos={},this._mapPathCache={}},h.getWorldPath=function(){var e=a(o().mark((function e(){var t,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.theme+"_"+this.mapId,!((i=this._mapPathCache[t])&&i.length>0)){e.next=4;break}return e.abrupt("return",i);case 4:if(!this._mapLayer){e.next=10;break}return e.next=7,this._mapLayer.animationPath.getWorldPathByMapId(this.mapId,this.theme);case 7:return i=e.sent,this._mapPathCache[t]=i,e.abrupt("return",i);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),h.addEnemy=function(e){e&&e.node&&(this._enemyList[e.uuid]=e)},h.removeEnemy=function(e){e&&e.node&&delete this._enemyList[e.uuid]},h.addBuildInfo=function(e){this._buildInfos[e.id]=e},h.getBuildInfo=function(e){return this._buildInfos[e]},h.getEnemySize=function(){return this._enemyList?Object.keys(this._enemyList).length:0},h.addBoss=function(e){this._boss=e},h.addTower=function(e){e&&e.node&&(this._towerList[e.uuid]=e)},h.removeTower=function(e){e&&e.node&&delete this._towerList[e.uuid]},h.onGameStar=function(e){},h.start=function(){},h.initQuadTree=function(e,t){var i=new v(0,0,e,t);this.quadTree=new p(i,10,5,m.LeftDown)},h.update=function(e){if(this.isInit&&!this.gameOver&&!this.pause){this.quadTree.clear();var t=g.instance.bulletList;if(t.length>0)for(var i=0;i<t.length;i++){var n=t[i];this.quadTree.insert(n)}for(var r in this._towerList)this.quadTree.insert(this._towerList[r]);for(var s in this._enemyList)this.quadTree.insert(this._enemyList[s]);if(this.quadTree.insert(this._boss),t.length>0)for(var a=0;a<t.length;a++){var o=t[a],h=[];if(this.quadTree.query(o.rect,h),h.length>0)for(var u=0;u<h.length;u++){var c=h[u];c instanceof f&&(console.log("子弹",o,"打中了",c),c.damage(o.harm),o.node.removeFromParent(),g.instance.release(o),a--)}}if(this._boss){var l=[];if(this.quadTree.query(this._boss.rect,l),l.length>0)for(var d=0;d<l.length;d++){var p=l[d];p instanceof f&&(console.log("敌人",p,"跟boss碰撞了"),this._boss.bleeding(),p.die())}}var m=w.instance.getMapData();if(m){var v=m.enemyCount;this.popEnemyCount>=v&&(this.gameOver=!0,this.doGameOver(!0))}if(this.isDebug){var y=[];this.quadTree.getAllChildNodes(y);var _=y.map((function(e){return e.rect}),this);this.drawRect(_)}}},h.drawRect=function(e){this.graphics.clear();for(var t=0;t<e.length;t++){var i=e[t];this.graphics.fillColor=l.RED,this.graphics.strokeColor=l.YELLOW,this.graphics.lineWidth=5;var n=i.x,r=i.y;this.graphics.circle(i.x,i.y,10),this.graphics.fill(),this.graphics.rect(n,r,i.width,i.height),this.graphics.stroke()}},h.drawPoint=function(e,t){void 0===t&&(t=10),this.graphics.lineWidth=5,this.graphics.fillColor=l.RED,this.graphics.circle(e.x,e.y,t),this.graphics.fill()},h.doGameOver=function(e){if(void 0===e&&(e=!1),Object.keys(this._enemyList).length>0){for(var t in this._enemyList)if(Object.prototype.hasOwnProperty.call(this._enemyList,t)){var i=this._enemyList[t];i.node.removeFromParent(),this.removeEnemy(i)}this._enemyList={}}g.instance.releaseAll(),_.open(L.GameOverOrWin,e)},h.restart=function(){this.gameOver=!1,this.pause=!1},s(t,[{key:"value",get:function(){return this._value},set:function(e){this._value=e,y.instance.updateValue(e)}}],[{key:"instance",get:function(){return this._instance}}]),t}(d))._instance=void 0,I=t((P=O).prototype,"graphics",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=P))||C));window.TowerLauncher=k,h._RF.pop()}}}));

System.register("chunks:///_virtual/TowerMapDTO.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"79e45LBSTFIbJndn2KyjUXD","TowerMapDTO",void 0);e("TowerMapDTO",(function(){this.canBuildTowerIds=void 0,this.startValue=void 0,this.enemyCount=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/TowerMapLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapLayer.ts","./TowerLauncher.ts","./AnimationPath.ts"],(function(e){var t,n,a,i,r,o,s,h,l,u,c,p,m,g,d,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,s=e._decorator,h=e.Sprite,l=e.Node,u=e.UITransform,c=e.resources,p=e.Texture2D,m=e.SpriteFrame},function(e){g=e.default},function(e){d=e.TowerLauncher},function(e){f=e.AnimationPath}],execute:function(){var b,y,w,v,I,C,P,L,M;o._RF.push({},"b4312URXw1D4KM7vEOKPHD6","TowerMapLayer",void 0);var T=s.ccclass,z=s.property;e("TowerMapLayer",(b=T("TowerMapLayer"),y=z(h),w=z(f),v=z(l),b((P=t((C=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"baseImage",P,i(t)),a(t,"animationPath",L,i(t)),a(t,"roadNode",M,i(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){this.animationPath||(this.animationPath=this.node.getComponentInChildren(f))},o.init=function(t){if(e.prototype.init.call(this,t),!this.baseImage){var n=new l;this.node.addChild(n),n.layer=this.node.layer,this.baseImage=n.addComponent(h),this.baseImage.sizeMode=h.SizeMode.RAW,n.getComponent(u).anchorX=0,n.getComponent(u).anchorY=0}this.loadBg()},o.loadBg=function(){var e=this,t=d.instance.theme,n="tower/map/theme"+t+"/BG"+t+"/texture";c.load(n,p,(function(t,a){if(null==t){var i=new m;i.texture=a,e.baseImage.spriteFrame=i,e.getComponent(u).width=e.width,e.getComponent(u).height=e.height}else console.log("加载地图背景失败 path = ",n,"error",t)}))},r(t,[{key:"width",get:function(){return this.baseImage?this.baseImage.getComponent(u).width:this._mapParams.viewWidth}},{key:"height",get:function(){return this.baseImage?this.baseImage.getComponent(u).height:this._mapParams.viewHeight}}]),t}(g)).prototype,"baseImage",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(C.prototype,"animationPath",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(C.prototype,"roadNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=C))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/TowerSceneMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneBase.ts","./Enum3.ts","./PathFindingAgent.ts","./Boss.ts","./Enemy.ts","./TowerCharacter.ts","./TowerLauncher.ts","./TowerBuildInfo.ts","./TowerMapLayer.ts","./TowerConfig.ts","./TowerGameUIManager.ts","./EffectManager.ts"],(function(e){var t,n,a,o,r,i,s,c,u,l,d,p,f,h,m,w,v,y,g,T,b,P,C,S,L,M,I,E,D,_,R,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass,i=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,l=e.Prefab,d=e.Node,p=e.instantiate,f=e.UITransform,h=e.math,m=e.resources,w=e.Sprite,v=e.SpriteFrame,y=e.NodeEventType},function(e){g=e.SceneBase},function(e){T=e.MapItemType,b=e.PathOptimize,P=e.PathQuadSeek},function(e){C=e.default},function(e){S=e.Boss},function(e){L=e.Enemy},function(e){M=e.TowerCharacter},function(e){I=e.TowerLauncher},function(e){E=e.TowerBuildInfo},function(e){D=e.TowerMapLayer},function(e){_=e.TowerConfig},function(e){R=e.TowerGameUIManager},function(e){k=e.EffectManager}],execute:function(){var x,B,z,U,A,O,N,G,F,H,J,Q,j,q;c._RF.push({},"dba7ck8uaxPArkxJ561JqIv","TowerSceneMap",void 0);var W=u.ccclass,X=u.property;e("TowerSceneMap",(x=W("TowerSceneMap"),B=X(l),z=X(D),U=X(l),A=X([l]),O=X(d),x(((q=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,a(t,"bossPrefab",F,o(t)),a(t,"mapLayer",H,o(t)),a(t,"enemyPrefab",J,o(t)),a(t,"towerPrefab",Q,o(t)),a(t,"effectLayer",j,o(t)),t.spawnPointDatas=[],t.maxEnemy=10,t.boss=null,t.createEnemyDelay=2,t._time=0,t}n(t,e);var c=t.prototype;return c.onLoad=function(){t._instance=this},c.start=function(){e.prototype.start.call(this)},c.getMapPath=function(e){var t=I.instance.theme;return"tower/map/theme"+t+"/level"+e+"/level_"+t+"_"+e},c.initMapElement=function(){var e=this.mapData.mapItems;if(e){I.instance.init(this.entityLayer,this.mapLayer);for(var t=0;t<e.length;t++){var n=e[t],a=n.type;a==T.Npc?this.initBoss(n):a==T.Monster||a==T.Transfer||a==T.SpawnPoint&&this.initSpawnPoint(n)}}},c.initSpawnPoint=function(e){this.spawnPointDatas.push(e)},c.initBoss=function(e){var t=p(this.bossPrefab),n=t.getComponent(S);this.boss=n,t.active=!0,t.parent=this.entityLayer.node,n.initEditData(e),n.init(),I.instance.addBoss(n)},c.initMapData=function(e){this.isInit=!1;for(var t=e.roadDataArr.length,n=e.roadDataArr[0].length,a=0,o=0,r=0;r<t;r++)for(var i=0;i<n;i++){e.roadDataArr[r][i],a=i,o=r;var s=C.instance.getRoadNode(a,o);this.createRoad(s)}var c=this.node.getComponent(f),u=c?c.width:0,l=c?c.height:0;this.node.setPosition(h.v3(-u/2,-l/2)),I.instance.initQuadTree(u,l),this.spawnPointDatas=[],this.entityLayer.node.removeAllChildren(),this.mapLayer.roadNode.removeAllChildren(),C.instance.setRoadSeekerPassCondition(this.onRoadSeekerPassCondition.bind(this)),k.instance.initEffectLayer(this.effectLayer),this.initMapElement(),_.instance.loadConfig().then((function(e){_.instance.initConfig(e),I.instance.isInit=!0})).catch((function(e){console.error(e)}))},c.createRoad=function(e){var t=this;if(e&&1!=e.value&&0!=e.value){var n="tower/res/NormalMordel/Game/Grid/texture";3==e.value&&(n="tower/res/NormalMordel/Game/Grid/texture"),m.load(n,(function(n,a){var o=new d;t.node.addChild(o),o.layer=t.node.layer;var r=o.addComponent(w);r.sizeMode=w.SizeMode.CUSTOM,o.getComponent(f).width=t.mapData.nodeWidth,o.getComponent(f).height=t.mapData.nodeHeight,o.getComponent(f).anchorX=.5,o.getComponent(f).anchorY=.5;var i=new v;i.texture=a,r.spriteFrame=i,o.setPosition(e.px,e.py),o.parent=t.mapLayer.roadNode;var s=o.addComponent(E);s.road=e,o.on(y.TOUCH_START,t.onClickTowerRoad,t),I.instance.addBuildInfo(s)}))}},c.onClickTowerRoad=function(e){if(!I.instance.gameOver&&!I.instance.pause&&I.instance.isInit){var t=e.target.getComponent(E);t&&(t.tower?R.instance.reomoveUpdateState?R.instance.reomoveUpdateState=!1:R.instance.showRemoveOrUpdate(!0,t,this.reomveOrUpdateTower,this):R.instance.selectedTowerState?R.instance.selectedTowerState=!1:R.instance.showSelectTower(!0,t,this.createTower,this))}},c.reomveOrUpdateTower=function(e,t){1==e?t&&t.tower&&t.tower.updateLevel(t.tower.level+1):2==e&&this.removeTower(t),R.instance.showRemoveOrUpdate(!1)},c.createEnemy=function(){var e=i(s().mark((function e(){var t,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=p(this.enemyPrefab)).active=!0,n=t.getComponent(L),a=this.spawnPointDatas[0],t.setPosition(a.x,a.y),t.parent=this.entityLayer.node,C.instance.updateRoadSeekerInfo(b.none,P.path_dire_4),n.navTo(this.boss.x,this.boss.y),I.instance.addEnemy(n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.createTower=function(e){console.log("选择建造",e.selectedTowerId);var t=p(this.towerPrefab[Math.max(0,e.selectedTowerId-1)]);t.active=!0;var n=t.getComponent(M);n.towerId=e.selectedTowerId,n.updateLevel(1),t.parent=this.entityLayer.node,t.setPosition(e.node.position.x,e.node.position.y),e.tower=n,I.instance.addTower(n)},c.removeTower=function(e){e.tower&&(e.tower.node.removeFromParent(),I.instance.removeTower(e.tower),e.tower=null,0!=e.removeBackCost&&(I.instance.value+=e.removeBackCost))},c.onRoadSeekerPassCondition=function(e){return!(!e||1==e.value||3==e.value)},c.update=function(e){I.instance.gameOver||I.instance.pause||!I.instance.isInit||(this._time+=e,this._time>=this.createEnemyDelay&&(I.instance.getEnemySize()<this.maxEnemy&&(console.log("创建一个敌人"),this.createEnemy()),this._time=0))},r(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(g))._instance=null,F=t((G=q).prototype,"bossPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(G.prototype,"mapLayer",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(G.prototype,"enemyPrefab",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(G.prototype,"towerPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=t(G.prototype,"effectLayer",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=G))||N));c._RF.pop()}}}));

System.register("chunks:///_virtual/TransferDoor.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,a,r,i,o,s,l,u,p,c,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createClass},function(t){o=t.cclegacy,s=t._decorator,l=t.CCString,u=t.CCInteger,p=t.Label,c=t.Vec3,g=t.Component}],execute:function(){var f,d,h,m,b,I,y,M,T;o._RF.push({},"81275RZmxBNOIMFeons0oZc","TransferDoor",void 0);var w=s.ccclass,x=s.property;t("default",(f=w("TransferDoor"),d=x(l),h=x(u),m=x(p),f((y=e((I=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,a(e,"targetMapId",y,r(e)),a(e,"targetMapSpawnId",M,r(e)),a(e,"nameTxt",T,r(e)),e._objName="",e.editData=null,e}n(e,t);var o=e.prototype;return o.start=function(){},o.init=function(){},o.initEditData=function(t){this.editData=t,this.objName=t.objName,this.node.position=new c(t.x,t.y),this.targetMapId=t.targetMapId,this.targetMapSpawnId=t.targetMapSpawnId},o.toString=function(){return this.targetMapId+","+this.targetMapSpawnId},o.onTriggerEnter=function(t){null!=t&&console.log("跳转到地图",this.targetMapId,this.targetMapSpawnId)},o.onTriggerExit=function(t){},i(e,[{key:"objName",get:function(){return this._objName},set:function(t){var e;(this._objName=t,null==this.nameTxt)&&(this.nameTxt=null==(e=this.node.getChildByName("NameTxt"))?void 0:e.getComponent(p));this.nameTxt&&(this.nameTxt.string=this._objName)}}]),e}(g)).prototype,"targetMapId",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=e(I.prototype,"targetMapSpawnId",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=e(I.prototype,"nameTxt",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=I))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/Transform.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r,o,a,i,p;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){r=t.cclegacy,o=t._decorator,a=t.Vec3,i=t.Quat,p=t.Node}],execute:function(){var s;r._RF.push({},"a3d30//Iw9F147gC+EuFDcZ","Transform",void 0);var c=o.ccclass,u=(o.property,t("Transform",c("Transform")(s=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var o=r.prototype;return o.lookAtZ=function(t,n){var e=new a;a.subtract(e,t,this.worldPosition),e.normalize();var r=new i;i.fromViewUp(r,e.normalize(),n),this.rotation=r},o.find=function(t){return this.getChildByPath(t)},o.getComponentInParent=function(t){var n=t,e=this.getComponent(n);return e||(e=this.searchParentComponent(this,n)),e},o.searchParentComponent=function(t,n){var e=n,r=null;if(t.parent){if(r=t.parent.getComponent(e))return r;if(r=this.searchParentComponent(t.parent,n))return r}return r},e(r,[{key:"transform",get:function(){return this}},{key:"gameObject",get:function(){return this}}]),r}(p))||s));p.prototype.lookAtZ=u.prototype.lookAtZ,p.prototype.find=u.prototype.find,p.prototype.getComponentInParent=u.prototype.getComponentInParent,p.prototype.searchParentComponent=u.prototype.searchParentComponent,r._RF.pop()}}}));

System.register("chunks:///_virtual/UIExample.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerManager.ts","./ViewManager.ts","./MainPanel.ts"],(function(n){var t,e,a,r,i,o,c;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,a=n._decorator,r=n.Component},function(n){i=n.default},function(n){o=n.viewManager},function(n){c=n.MainPanel}],execute:function(){var u;e._RF.push({},"15926Uri99IQaMlEWjEH2gQ","UIExample",void 0);var s=a.ccclass;a.property,n("UIExample",s("UIExample")(u=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var a=e.prototype;return a.start=function(){i.init(this.node),o.open(c,"测试测试")},a.update=function(n){},e}(r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Unit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Containers.ts"],(function(t){var n,e,i,o,s,c,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.Vec2,s=t.UITransform,c=t.Vec3},function(t){r=t.Containers}],execute:function(){var u;e._RF.push({},"b5577I2andP3KxBIsjzv79g","Unit",void 0);var a=i.ccclass;i.property,t("Unit",a("Unit")(u=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).type=0,n.mId=void 0,n.mType=void 0,n.mLayer=void 0,n.mScene=void 0,n.isDestroy=!1,n.mLocation=void 0,n._scaleX=void 0,n._scaleY=void 0,n._cibs=void 0,n}n(e,t);var i=e.prototype;return i.onLoad=function(){this.mLocation=new o},i.start=function(){},i.update=function(t){},i.setId=function(t){this.mId=t},i.getId=function(){return this.mId},i.setName=function(t){this.name=t},i.getName=function(){return this.name},i.setScene=function(t){this.mScene=t},i.getScene=function(){return this.mScene},i.setType=function(t){this.mType=t},i.getType=function(){return this.mType},i.setLayer=function(t){this.mLayer=t},i.getLayer=function(){return this.mLayer},i.remove=function(n){this.scene?this.mScene.remove:t.prototype.remove.call(this)},i.destroy=function(){return this.mId=null,this.mLayer=null,this.mScene=null,this.isDestroy=null,this.onDestroy(),t.prototype.destroy.call(this)},i.onDestroy=function(){},i.setLocation=function(t,n){this.setPosition(t,n)},i.getLocation=function(){return this.position.clone()},i.setLocationScale=function(t,n){this._scaleX=t,this._scaleY=n,this.setScale(t,n)},i.getDisplay=function(){return this},i.onAdd=function(){},i.onRemove=function(){},i.getBounds=function(){var t=this.getComponent(s),n=t?t.width:0,e=t?t.height:0,i=new c;return this.getScale(i),[0,n=Math.abs(n*i.x),0,e=Math.abs(e*i.y)]},i.checkIn=function(t,n,e,i){if(!this.mScene)return!1;var o=this.getCheckInBounds();return o[0]>t&&o[0]<n&&o[1]>e&&o[1]<i},i.getCheckInBounds=function(){this._cibs||(this._cibs=[]);var t=this.getLocation(),n=this.mScene.getLocationScale(),e=this.mScene.getLocation();return this._cibs[0]=t.x*n.x+e.x,this._cibs[1]=t.y*n.y+e.y,this._cibs},i.setIsShow=function(t){this.active&&t||(this.active=t)},e}(r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(n){var t,e,o,r,i,c;return{setters:[function(n){t=n.cclegacy,e=n.Button,o=n.Node,r=n.Component,i=n.BlockInputEvents,c=n.js}],execute:function(){t._RF.push({},"2d0e5N24mZO8qHgIq0MnxyA","Utils",void 0);n("default",function(){function n(){}return n.FindChildByName=function(n,t){if(!n.children||n.children.length<=0)return null;for(var e=0;e<n.children.length;e++){var o=n.children[e];if(o.name==t)return o;var r=this.FindChildByName(o,t);if(null!=r)return r}return null},n.getHashCode=function(n){return null!=n._id?n._id:null},n.addButtonClickHandler=function(n,t,i,c,l){var d;if(n instanceof e?d=n:n instanceof o&&(d=n.getComponent(e)),!d)return console.warn("addButtonClickHandler: target node has no button component"),!1;var u=new r.EventHandler;return u.target=t,u.component=i,u.handler=c,u.customEventData=l,d.clickEvents=[],d.clickEvents.push(u),!0},n.addNodeEvent=function(n,t,e,o,r,c){void 0===r&&(r=!1),void 0===c&&(c=!1),r?n.once(t,e,o):n.on(t,e,o),c||n.getComponent(i)||n.addComponent(i)},n.isCCClass=function(n){return n&&n.hasOwnProperty("__ctors__")},n.addNodeScript=function(n,t){if("string"==typeof t){if(null==c.getClassByName(t))return void console.error(" ***** "+t+" does not decorated by ccclass ***** ");null!=n.getComponent(t)||n.addComponent(t)}else if("function"==typeof t){if(!this.isCCClass(t))return void console.error(" ***** "+t+" does not decorated by ccclass ***** ");null!=n.getComponent(t)||n.addComponent(t)}},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ViewConst.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"83c86UK0bpEoKfoIHDHv+sX","ViewConst",void 0),e("default",(function(){})).defaultPrefabPathPrefix="resources://prefabs/",t._RF.pop()}}}));

System.register("chunks:///_virtual/ViewManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./ViewRegisterMgr.ts","./LayerManager.ts","./StringUtils.ts","./ViewConst.ts","./AssetMgr.ts","./Utils.ts"],(function(e){var i,t,n,r,o,s,a,u,c,l,h,w,p,d,f,V,g,v;return{setters:[function(e){i=e.asyncToGenerator,t=e.createForOfIteratorHelperLoose,n=e.regeneratorRuntime},function(e){r=e.cclegacy,o=e.Node,s=e.UITransform,a=e.view,u=e.BlockInputEvents,c=e.isValid,l=e.js,h=e.log},function(e){w=e.ViewShowTypes},function(e){p=e.getViewRegisterVo},function(e){d=e.default},function(e){f=e.default},function(e){V=e.default},function(e){g=e.default},function(e){v=e.default}],execute:function(){r._RF.push({},"484556JSQRI8IRGZiUHI4e8","ViewManager",void 0);var C=e("ViewManager",function(){function e(){this.useCount=0,this.BackGroundUI=0,this.isClosing=!1,this.isOpening=!1,this.ViewCache={},this.ViewStack=[],this.ViewOpenQueue=[],this.ViewCloseQueue=[],this.uiOpenBeforeDelegate=null,this.uiOpenDelegate=null,this.uiCloseDelegate=null}var r=e.prototype;return r.preventTouch=function(e,i){var t=d.getLayer(e);if(t){var n=new o;n.name="preventTouch";var r=n.addComponent(s);return r.setContentSize(a.getVisibleSize()),n.on(o.EventType.TOUCH_START,(function(e){e.propagationStopped=!0}),n),t.addChild(n),r.priority=i-.01,n}console.warn(" -----  "+e+" layer container is null ----- ")},r.autoExecNextUI=function(){if(this.ViewCloseQueue.length>0){var e=this.ViewCloseQueue.shift();this.close(e)}else if(this.ViewOpenQueue.length>0){var i=this.ViewOpenQueue.shift();this.open(i.uiId,i.uiArgs)}},r.autoExecAnimation=function(e,i,t){t()},r.autoLoadRes=function(e,i){i()},r.updateUI=function(){for(var e=0,i=this.ViewStack.length-1;i>=0;--i){var t=this.ViewStack[i].uiView.showType;if(this.ViewStack[i].uiView.node.active=!0,w.ViewFullScreen==t)break;if(w.ViewSingle==t){for(var n=0;n<this.BackGroundUI;++n)this.ViewStack[n]&&(this.ViewStack[n].uiView.node.active=!0);e=this.BackGroundUI;break}}for(var r=e;r<i;++r)this.ViewStack[r].uiView.node.active=!1},r.onViewOpen=function(e,i,t,n){var r=this;if(null!=i){t.uiView=i,i.node.active=!0;var u=i.getComponent(s);if(u||(u=i.addComponent(s)),i.quickClose){var c=i.node.getChildByName("background");if(!c){(c=new o).name="background";var l=c.addComponent(s);l.setContentSize(a.getVisibleSize()),i.node.addChild(c),l.priority=-1}c.targetOff(o.EventType.TOUCH_START),c.on(o.EventType.TOUCH_START,(function(e){e.propagationStopped=!0,r.close(i)}),c)}var h=this.getViewClassName(e.viewCls),w=d.getLayer(e.layer);if(null!=w){w.addChild(i.node),u.priority=t.zOrder||this.ViewStack.length,this.updateUI();var p=0;this.ViewStack.length>1&&(p=this.ViewStack[this.ViewStack.length-2].uiId),i.onOpen(p,n),this.autoExecAnimation(i,"uiOpen",(function(){i.onOpenAniOver()}))}else console.warn(" ----- open "+h+" field container is null ----- ")}},r.open=function(){var e=i(n().mark((function e(i,t){var r,o,s=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p(i)){e.next=4;break}return console.error(" ***** view "+i+" has not registered ***** "),e.abrupt("return");case 4:if(o={uiId:r.id,uiArgs:t,uiView:null},!this.isOpening&&!this.isClosing){e.next=8;break}return this.ViewOpenQueue.push(o),e.abrupt("return");case 8:if(-1==this.getViewIndex(r.id)){e.next=12;break}return this.closeToView(i,t),e.abrupt("return");case 12:o.zOrder=this.ViewStack.length+1,this.ViewStack.push(o),r.preventTouch&&(o.preventNode=this.preventTouch(r.layer,o.zOrder)),this.isOpening=!0,this.getOrCreateUI(r).then((function(e){if(o.isClose||null==a)return console.warn("getOrCreateUI "+r.id+" faile!\n                        close state : "+o.isClose+" , uiView : "+a),s.isOpening=!1,void(o.preventNode&&(o.preventNode.destroy(),o.preventNode=null));s.onViewOpen(r,e,o,t),s.isOpening=!1,s.autoExecNextUI()}));case 17:case"end":return e.stop()}}),e,this)})));return function(i,t){return e.apply(this,arguments)}}(),r.addBlockInputEvent=function(e){e&&(e.getComponent(u)||e.addComponent(u))},r.getOrCreateUI=function(e,t){var r=this;return new Promise(i(n().mark((function i(o,s){var a,u,c,l,h,w,p;return n().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=3;break}return o(null),i.abrupt("return");case 3:if(!(a=r.ViewCache[e.id])){i.next=7;break}return o(a),i.abrupt("return");case 7:return u=r.getViewClassName(e.viewCls),c=e.prefabPathPrefix,f.empty(c)&&(c=V.defaultPrefabPathPrefix),null==(l=e.prefabName)&&(l=u),h=c+l,i.next=15,g.instance.createPrefab(h);case 15:if(w=i.sent){i.next=20;break}return console.error(" ***** open "+u+" failed "+l+" is not exist ***** "),o(null),i.abrupt("return");case 20:w.name=u,v.addNodeScript(w,e.viewCls),(p=r.getViewScript(u,w))&&p.init(t),p.cache&&(r.ViewCache[e.id]=p),o(p);case 26:case"end":return i.stop()}}),i)}))))},r.replace=function(e,i){void 0===i&&(i=null);var t=this.getUnifyParam(e);this.close(this.ViewStack[this.ViewStack.length-1].uiView),this.open(t,i)},r.close=function(e){var i=this,t=this.ViewStack.length;if(t<1||this.isClosing||this.isOpening)e&&this.ViewCloseQueue.push(e);else{var n;if(e)for(var r=this.ViewStack.length-1;r>=0;r--){var o=this.ViewStack[r];if(o.uiView===e){n=o,this.ViewStack.splice(r,1);break}}else n=this.ViewStack.pop();if(void 0!==n){var s=n.uiId,a=n.uiView;if(n.isClose=!0,n.preventNode&&(n.preventNode.destroy(),n.preventNode=null),a){var u=this.ViewStack[t-2];this.updateUI();var c=function(){i.isClosing=!1,u&&u.uiView&&i.isTopView(u.uiId)?(u.uiView.node.active=!0,u.uiView.onTop(s,a.onClose())):a.onClose(),a.cache?(i.ViewCache[s]=a,a.node.removeFromParent(),h("uiView removeFromParent "+n.uiId)):(a.node.destroy(),h("uiView destroy "+n.uiId)),i.autoExecNextUI()};this.autoExecAnimation(a,"uiClose",c)}}}},r.closeAll=function(){for(var e,i=t(this.ViewStack);!(e=i()).done;){var n=e.value;n.isClose=!0,n.preventNode&&(n.preventNode.destroy(),n.preventNode=null),n.uiView&&(n.uiView.onClose(),n.uiView.node.destroy())}this.ViewOpenQueue=[],this.ViewCloseQueue=[],this.ViewStack=[],this.isOpening=!1,this.isClosing=!1},r.closeToView=function(e,i,t){void 0===t&&(t=!0);var n=this.getViewIndex(e);if(-1!=n){n=t?n:n+1;for(var r=this.ViewStack.length-1;r>=n;--r){var o=this.ViewStack.pop();if(o){var s=o.uiId,a=o.uiView;o.isClose=!0,o.preventNode&&(o.preventNode.destroy(),o.preventNode=null),a&&(a.onClose(),a.cache?(this.ViewCache[s]=a,a.node.removeFromParent()):a.node.destroy())}}this.updateUI(),this.ViewOpenQueue=[],this.ViewCloseQueue=[],t&&this.open(e,i)}},r.clearCache=function(){for(var e in this.ViewCache){var i=this.ViewCache[e];c(i.node)&&(c(i),i.node.destroy())}this.ViewCache={}},r.isTopView=function(e){return 0!=this.ViewStack.length&&this.ViewStack[this.ViewStack.length-1].uiId==e},r.getView=function(e){for(var i=0;i<this.ViewStack.length;i++){var t=this.ViewStack[i];if(e==t.uiId)return t.uiView}return null},r.getTopView=function(){return this.ViewStack.length>0?this.ViewStack[this.ViewStack.length-1].uiView:null},r.getViewScript=function(e,i){return i.getComponent(e)},r.getViewClassName=function(e){var i="";return"string"==typeof e?i=e:"function"==typeof e?i=l.getClassName(e):"object"==typeof e?i=l.getClassName(e.constructor):console.error("ViewManager.getViewClassName: cls is not string or function"),i},r.getUnifyParam=function(e){var i=null;return"number"==typeof e||"string"==typeof e?i=e:"function"==typeof e?i=this.getViewClassName(e):"object"==typeof e&&(i=e.id),i},r.getViewIndex=function(e){for(var i=this.getUnifyParam(e),t=0;t<this.ViewStack.length;t++){if(i==this.ViewStack[t].uiId)return t}return-1},r.getIsOpen=function(e){return-1!=this.getViewIndex(e)},e}()),k=e("viewManager",new C);window.viewManager=k,r._RF.pop()}}}));

System.register("chunks:///_virtual/ViewRegisterMgr.ts",["cc"],(function(e){var t,i;return{setters:[function(e){t=e.cclegacy,i=e.js}],execute:function(){e({getRegisteredViews:function(){return r},getViewRegisterVo:function(e){var t=null;if("number"==typeof e||"string"==typeof e){if(null!=(t=n[e]))return t;t=s[e]}else if("function"==typeof e){var r=i.getClassName(e);t=s[r]}return t},registerView:function(e){var t=i.getClassName(e.viewCls);null==e.id&&(e.id=t);r.push(e),n[e.id]=e,s[t]=e}}),t._RF.push({},"7bbdf1rmzpIYZ9xAh0zXTaU","ViewRegisterMgr",void 0);var r=[],n={},s={};t._RF.pop()}}}));

System.register("chunks:///_virtual/ViewRegisterVo.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"ed1027EDmlLsLVYcBYjeW/n","ViewRegisterVo",void 0);e("default",(function(){this.id=void 0,this.parent=void 0,this.viewCls=void 0,this.layer=void 0,this.prefabPathPrefix=void 0,this.prefabName=void 0,this.preventTouch=!1}));i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});